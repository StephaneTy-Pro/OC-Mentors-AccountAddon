// ==UserScript==
// @name         Facturier
// @namespace    https://stephanety-pro.github.io/OC-Mentors-AccountAddon/
// @version      1.10.0014
// @description  Un addon pour vous aider dans votre facturation
// @author       Stéphane TORCHY
// @updateURL    https://raw.githubusercontent.com/StephaneTy-Pro/OC-Mentors-AccountAddon/master/dist/app.min.js
// @downloadURL  https://raw.githubusercontent.com/StephaneTy-Pro/OC-Mentors-AccountAddon/master/dist/app.min.js
// @icon         https://mirrors.creativecommons.org/presskit/icons/heart.red.png
// multiple usage
// @match        https://openclassrooms.com/fr/mentorship/dashboard/mentorship-sessions-history*
// @match        https://openclassrooms.com/fr/mentorship/dashboard/sessions
// @match        https://openclassrooms.com/fr/mentorship/dashboard/booked-mentorship-sessions

// Start at document start https://www.tampermonkey.net/documentation.php#_run_at
// @run-at document-start

// @grant        unsafeWindow
// @grant        GM_addStyle
// @grant        GM_getResourceText
// @grant        GM_registerMenuCommand
// @grant        GM_unregisterMenuCommand
// @grant        GM_xmlhttpRequest
// @grant        GM.xmlHttpRequest
// @grant        GM_notification

// @require      https://cdn.jsdelivr.net/npm/lodash@4.17.19/lodash.min.js
// @require      https://unpkg.com/lowdb@0.17/dist/low.min.js
// @require      https://unpkg.com/lowdb@0.17/dist/LocalStorage.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.8.29/dayjs.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.8.29/locale/fr.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.8.29/plugin/isBetween.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.8.29/plugin/isSameOrBefore.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.8.29/plugin/isSameOrAfter.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.8.29/plugin/customParseFormat.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.8.29/plugin/localeData.min.js


//// GM_Compat : Portable monkey-patching for userscripts
// SRC 				https://github.com/chocolateboy/gm-compat
// permet notamment d'utiliser GMCompat.unsafeWindow.notify('loaded', { value: 42 }) sous chrome
// @require       	https://unpkg.com/gm-compat@1.1.0

//// GM_Config
// SRC 			https://github.com/sizzlemctwizzle/GM_config/wiki
// require      https://openuserjs.org/src/libs/sizzle/GM_config.js (cassé ce jour 28/08/2020);
// @require      https://raw.githubusercontent.com/sizzlemctwizzle/GM_config/master/gm_config.js

//// sweetalert 2
// require      https://cdn.jsdelivr.net/npm/sweetalert2@9/dist/sweetalert2.all.min.js
// @require      https://cdn.jsdelivr.net/npm/sweetalert2@10

//// draggabilly
// @require      https://cdnjs.cloudflare.com/ajax/libs/draggabilly/2.2.0/draggabilly.pkgd.min.js

//// toastify
// @require     https://cdn.jsdelivr.net/npm/toastify-js@1.8.0/src/toastify.min.js
// @resource    toastifycss https://raw.githubusercontent.com/apvarun/toastify-js/master/src/toastify.css

// https://github.com/uzairfarooq/arrive --> included manually
// require     https://raw.githubusercontent.com/uzairfarooq/arrive/master/minified/arrive.min.js

////simple-datatables
//// https://github.com/fiduswriter/Simple-DataTables
// @require     https://cdn.jsdelivr.net/npm/simple-datatables@latest
// @resource    simpledatatablecss https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css


//// MEMOIZATION
//// TODO : check best function
// require https://raw.githubusercontent.com/anywhichway/nano-memoize/master/dist/nano-memoize.min.js
// https://github.com/planttheidea/moize#usage
// @require https://cdn.jsdelivr.net/npm/moize@5.4.7/dist/moize.min.js
// require https://cdn.jsdelivr.net/npm/moize@6.0.2/dist/moize.min.js -> probleme 20210701
// require https://cdn.jsdelivr.net/npm/moize@6.0.3/dist/moize.min.js -> probleme 20210701
// USAGE OF https://caolan.github.io/async/v3/docs.html
// FONCTIONNE PAS require https://cdn.jsdelivr.net/npm/async@3.2.0/memoize.min.js probleme export
// @require https://cdn.jsdelivr.net/npm/async@3.2.0/dist/async.min.js
// TOTEST https://github.com/sindresorhus/p-memoize
// Ne fonctionne pasrequire https://cdn.skypack.dev/p-memoize

//// FETCH INJECT --> included manually
// require https://cdn.jsdelivr.net/npm/fetch-inject

//// PARSER MKDOWN
// @require 	 https://cdn.jsdelivr.net/npm/showdown@1.9.1/dist/showdown.min.js

//// PDF https://pdf-lib.js.org/docs/api/
// @require      https://unpkg.com/pdf-lib@1.9.0/dist/pdf-lib.min.js
// @require      https://unpkg.com/downloadjs@1.4.7/download.js

//// HTMX https://htmx.org --> included dynamically
// require https://unpkg.com/htmx.org@1.1.0/dist/htmx.min.js

//// ALPINE JS --> included dynamically
// require https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js


// ProgressBar
// https://loading.io/progress/
// require https://raw.githubusercontent.com/loadingio/loading-bar/master/dist/loading-bar.js
// resource loading_barcss https://raw.githubusercontent.com/loadingio/loading-bar/master/dist/loading-bar.css
// @require https://loadingio.github.io/loading-bar/dist/loading-bar.js
// @resource loading_barcss https://loadingio.github.io/loading-bar/dist/loading-bar.min.css

// https://www.cssscript.com/demo/text-progress-bar-ascii-loader/
// https://github.com/kimmobrunfeldt/progressbar.js - fonctionne mais probleme avec le easing dans mon popup progress bar
// require https://raw.githubusercontent.com/kimmobrunfeldt/progressbar.js/master/dist/progressbar.min.js
// require https://raw.githubusercontent.com/kimmobrunfeldt/progressbar.js/master/dist/progressbar.js
// https://pvdlg.github.io/uprogress/js-api/#UProgress+start
// https://ricostacruz.com/nprogress


// @require https://unpkg.com/nprogress@0.2.0/nprogress.js
// @resource nprogress_css https://unpkg.com/nprogress@0.2.0/nprogress.css


// semble cassé
// https://github.com/webosorg/Process
// https://unpkg.com/@webos/process@0.2.0/dist/process.js
// https://cdn.jsdelivr.net/npm/@webos/process@0.2.0/dist/process.min.js
// bof ... je ne parviens pas à faire fonctionner l'exemple
// https://cdn.jsdelivr.net/npm/worker-function@2.0.1/WorkerFunction.min.js
// Threading
// require  https://raw.githubusercontent.com/gkjohnson/threading-js/master/umd/Thread.js
// require   https://raw.githubusercontent.com/gkjohnson/threading-js/master/umd/ThreadPool.js
// require   https://raw.githubusercontent.com/gkjohnson/threading-js/master/umd/ThreadQueue.js
// semble cassé
// https://cdn.jsdelivr.net/npm/threads@1.6.3/dist/index.min.js
// https://unpkg.com/paralleljs@1.0/lib/parallel.js
// https://cdn.jsdelivr.net/npm/threads@1.6.3/dist/index.min.js
// Freelancer
// https://github.com/Wildhoney/Freelancer
// fonctionne require https://raw.githubusercontent.com/arqex/worker-function/master/WorkerFunction.js
// ne fonctonne pas https://raw.githubusercontent.com/duart38/Thread/master/Thread.bundle.js
// require      https://cdn.jsdelivr.net/npm/paralleljs@1.0.1/lib/parallel.min.js


/*
 * History
 * cf https://github.com/StephaneTy-Pro/OC-Mentors-AccountAddon/blob/master/CHANGELOG.md
 */
// ==/UserScript==
(()=>{var Ir=Object.create;var Vt=Object.defineProperty;var Nr=Object.getOwnPropertyDescriptor;var jr=Object.getOwnPropertyNames;var Br=Object.getPrototypeOf,kr=Object.prototype.hasOwnProperty;var $r=(d,t,e)=>t in d?Vt(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var Yr=d=>Vt(d,"__esModule",{value:!0});var Lr=(d,t)=>()=>(t||d((t={exports:{}}).exports,t),t.exports);var Pr=(d,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of jr(t))!kr.call(d,s)&&s!=="default"&&Vt(d,s,{get:()=>t[s],enumerable:!(e=Nr(t,s))||e.enumerable});return d},Fr=d=>Pr(Yr(Vt(d!=null?Ir(Br(d)):{},"default",d&&d.__esModule&&"default"in d?{get:()=>d.default,enumerable:!0}:{value:d,enumerable:!0})),d);var G=(d,t,e)=>($r(d,typeof t!="symbol"?t+"":t,e),e);var sr=Lr((mn,hn)=>{(function(d,t){typeof define=="function"&&define.amd?define([],t):typeof hn=="object"&&typeof mn!="undefined"?hn.exports=t():d.Papa=t()})(mn,function d(){"use strict";var t=typeof self!="undefined"?self:typeof window!="undefined"?window:t!==void 0?t:{},e=!t.document&&!!t.postMessage,s=e&&/blob:/i.test((t.location||{}).protocol),n={},o=0,l={parse:function(w,u){var C=(u=u||{}).dynamicTyping||!1;if(A(C)&&(u.dynamicTypingFunction=C,C={}),u.dynamicTyping=C,u.transform=!!A(u.transform)&&u.transform,u.worker&&l.WORKERS_SUPPORTED){var g=function(){if(!l.WORKERS_SUPPORTED)return!1;var L=(N=t.URL||t.webkitURL||null,I=d.toString(),l.BLOB_URL||(l.BLOB_URL=N.createObjectURL(new Blob(["(",I,")();"],{type:"text/javascript"})))),k=new t.Worker(L),N,I;return k.onmessage=E,k.id=o++,n[k.id]=k}();return g.userStep=u.step,g.userChunk=u.chunk,g.userComplete=u.complete,g.userError=u.error,u.step=A(u.step),u.chunk=A(u.chunk),u.complete=A(u.complete),u.error=A(u.error),delete u.worker,void g.postMessage({input:w,config:u,workerId:g.id})}var M=null;return l.NODE_STREAM_INPUT,typeof w=="string"?M=u.download?new f(u):new a(u):w.readable===!0&&A(w.read)&&A(w.on)?M=new b(u):(t.File&&w instanceof File||w instanceof Object)&&(M=new p(u)),M.stream(w)},unparse:function(w,u){var C=!1,g=!0,M=",",L=`\r
`,k='"',N=k+k,I=!1,$=null,P=!1;(function(){if(typeof u=="object"){if(typeof u.delimiter!="string"||l.BAD_DELIMITERS.filter(function(Y){return u.delimiter.indexOf(Y)!==-1}).length||(M=u.delimiter),(typeof u.quotes=="boolean"||typeof u.quotes=="function"||Array.isArray(u.quotes))&&(C=u.quotes),typeof u.skipEmptyLines!="boolean"&&typeof u.skipEmptyLines!="string"||(I=u.skipEmptyLines),typeof u.newline=="string"&&(L=u.newline),typeof u.quoteChar=="string"&&(k=u.quoteChar),typeof u.header=="boolean"&&(g=u.header),Array.isArray(u.columns)){if(u.columns.length===0)throw new Error("Option columns is empty");$=u.columns}u.escapeChar!==void 0&&(N=u.escapeChar+k),typeof u.escapeFormulae=="boolean"&&(P=u.escapeFormulae)}})();var U=new RegExp(v(k),"g");if(typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(w)){if(!w.length||Array.isArray(w[0]))return R(null,w,I);if(typeof w[0]=="object")return R($||F(w[0]),w,I)}else if(typeof w=="object")return typeof w.data=="string"&&(w.data=JSON.parse(w.data)),Array.isArray(w.data)&&(w.fields||(w.fields=w.meta&&w.meta.fields),w.fields||(w.fields=Array.isArray(w.data[0])?w.fields:F(w.data[0])),Array.isArray(w.data[0])||typeof w.data[0]=="object"||(w.data=[w.data])),R(w.fields||[],w.data||[],I);throw new Error("Unable to serialize unrecognized input");function F(Y){if(typeof Y!="object")return[];var H=[];for(var te in Y)H.push(te);return H}function R(Y,H,te){var ue="";typeof Y=="string"&&(Y=JSON.parse(Y)),typeof H=="string"&&(H=JSON.parse(H));var re=Array.isArray(Y)&&0<Y.length,he=!Array.isArray(H[0]);if(re&&g){for(var J=0;J<Y.length;J++)0<J&&(ue+=M),ue+=j(Y[J],J);0<H.length&&(ue+=L)}for(var V=0;V<H.length;V++){var ye=re?Y.length:H[V].length,ce=!1,fe=re?Object.keys(H[V]).length===0:H[V].length===0;if(te&&!re&&(ce=te==="greedy"?H[V].join("").trim()==="":H[V].length===1&&H[V][0].length===0),te==="greedy"&&re){for(var be=[],oe=0;oe<ye;oe++){var W=he?Y[oe]:oe;be.push(H[V][W])}ce=be.join("").trim()===""}if(!ce){for(var ve=0;ve<ye;ve++){0<ve&&!fe&&(ue+=M);var xe=re&&he?Y[ve]:ve;ue+=j(H[V][xe],ve)}V<H.length-1&&(!te||0<ye&&!fe)&&(ue+=L)}}return ue}function j(Y,H){if(Y==null)return"";if(Y.constructor===Date)return JSON.stringify(Y).slice(1,25);P===!0&&typeof Y=="string"&&Y.match(/^[=+\-@].*$/)!==null&&(Y="'"+Y);var te=Y.toString().replace(U,N),ue=typeof C=="boolean"&&C||typeof C=="function"&&C(Y,H)||Array.isArray(C)&&C[H]||function(re,he){for(var J=0;J<he.length;J++)if(-1<re.indexOf(he[J]))return!0;return!1}(te,l.BAD_DELIMITERS)||-1<te.indexOf(M)||te.charAt(0)===" "||te.charAt(te.length-1)===" ";return ue?k+te+k:te}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!e&&!!t.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=x,l.ParserHandle=y,l.NetworkStreamer=f,l.FileStreamer=p,l.StringStreamer=a,l.ReadableStreamStreamer=b,t.jQuery){var c=t.jQuery;c.fn.parse=function(w){var u=w.config||{},C=[];return this.each(function(L){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&t.FileReader)||!this.files||this.files.length===0)return!0;for(var k=0;k<this.files.length;k++)C.push({file:this.files[k],inputElem:this,instanceConfig:c.extend({},u)})}),g(),this;function g(){if(C.length!==0){var L,k,N,I,$=C[0];if(A(w.before)){var P=w.before($.file,$.inputElem);if(typeof P=="object"){if(P.action==="abort")return L="AbortError",k=$.file,N=$.inputElem,I=P.reason,void(A(w.error)&&w.error({name:L},k,N,I));if(P.action==="skip")return void M();typeof P.config=="object"&&($.instanceConfig=c.extend($.instanceConfig,P.config))}else if(P==="skip")return void M()}var U=$.instanceConfig.complete;$.instanceConfig.complete=function(F){A(U)&&U(F,$.file,$.inputElem),M()},l.parse($.file,$.instanceConfig)}else A(w.complete)&&w.complete()}function M(){C.splice(0,1),g()}}}function m(w){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(u){var C=D(u);C.chunkSize=parseInt(C.chunkSize),u.step||u.chunk||(C.chunkSize=null),this._handle=new y(C),(this._handle.streamer=this)._config=C}.call(this,w),this.parseChunk=function(u,C){if(this.isFirstChunk&&A(this._config.beforeFirstChunk)){var g=this._config.beforeFirstChunk(u);g!==void 0&&(u=g)}this.isFirstChunk=!1,this._halted=!1;var M=this._partialLine+u;this._partialLine="";var L=this._handle.parse(M,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var k=L.meta.cursor;this._finished||(this._partialLine=M.substring(k-this._baseIndex),this._baseIndex=k),L&&L.data&&(this._rowCount+=L.data.length);var N=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)t.postMessage({results:L,workerId:l.WORKER_ID,finished:N});else if(A(this._config.chunk)&&!C){if(this._config.chunk(L,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);L=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(L.data),this._completeResults.errors=this._completeResults.errors.concat(L.errors),this._completeResults.meta=L.meta),this._completed||!N||!A(this._config.complete)||L&&L.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),N||L&&L.meta.paused||this._nextChunk(),L}this._halted=!0},this._sendError=function(u){A(this._config.error)?this._config.error(u):s&&this._config.error&&t.postMessage({workerId:l.WORKER_ID,error:u,finished:!1})}}function f(w){var u;(w=w||{}).chunkSize||(w.chunkSize=l.RemoteChunkSize),m.call(this,w),this._nextChunk=e?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(C){this._input=C,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(u=new XMLHttpRequest,this._config.withCredentials&&(u.withCredentials=this._config.withCredentials),e||(u.onload=S(this._chunkLoaded,this),u.onerror=S(this._chunkError,this)),u.open(this._config.downloadRequestBody?"POST":"GET",this._input,!e),this._config.downloadRequestHeaders){var C=this._config.downloadRequestHeaders;for(var g in C)u.setRequestHeader(g,C[g])}if(this._config.chunkSize){var M=this._start+this._config.chunkSize-1;u.setRequestHeader("Range","bytes="+this._start+"-"+M)}try{u.send(this._config.downloadRequestBody)}catch(L){this._chunkError(L.message)}e&&u.status===0&&this._chunkError()}},this._chunkLoaded=function(){u.readyState===4&&(u.status<200||400<=u.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:u.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(C){var g=C.getResponseHeader("Content-Range");return g===null?-1:parseInt(g.substring(g.lastIndexOf("/")+1))}(u),this.parseChunk(u.responseText)))},this._chunkError=function(C){var g=u.statusText||C;this._sendError(new Error(g))}}function p(w){var u,C;(w=w||{}).chunkSize||(w.chunkSize=l.LocalChunkSize),m.call(this,w);var g=typeof FileReader!="undefined";this.stream=function(M){this._input=M,C=M.slice||M.webkitSlice||M.mozSlice,g?((u=new FileReader).onload=S(this._chunkLoaded,this),u.onerror=S(this._chunkError,this)):u=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var M=this._input;if(this._config.chunkSize){var L=Math.min(this._start+this._config.chunkSize,this._input.size);M=C.call(M,this._start,L)}var k=u.readAsText(M,this._config.encoding);g||this._chunkLoaded({target:{result:k}})},this._chunkLoaded=function(M){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(M.target.result)},this._chunkError=function(){this._sendError(u.error)}}function a(w){var u;m.call(this,w=w||{}),this.stream=function(C){return u=C,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var C,g=this._config.chunkSize;return g?(C=u.substring(0,g),u=u.substring(g)):(C=u,u=""),this._finished=!u,this.parseChunk(C)}}}function b(w){m.call(this,w=w||{});var u=[],C=!0,g=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(M){this._input=M,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){g&&u.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),u.length?this.parseChunk(u.shift()):C=!0},this._streamData=S(function(M){try{u.push(typeof M=="string"?M:M.toString(this._config.encoding)),C&&(C=!1,this._checkIsFinished(),this.parseChunk(u.shift()))}catch(L){this._streamError(L)}},this),this._streamError=S(function(M){this._streamCleanUp(),this._sendError(M)},this),this._streamEnd=S(function(){this._streamCleanUp(),g=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(w){var u,C,g,M=Math.pow(2,53),L=-M,k=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,N=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,I=this,$=0,P=0,U=!1,F=!1,R=[],j={data:[],errors:[],meta:{}};if(A(w.step)){var Y=w.step;w.step=function(J){if(j=J,ue())te();else{if(te(),j.data.length===0)return;$+=J.data.length,w.preview&&$>w.preview?C.abort():(j.data=j.data[0],Y(j,I))}}}function H(J){return w.skipEmptyLines==="greedy"?J.join("").trim()==="":J.length===1&&J[0].length===0}function te(){if(j&&g&&(he("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),g=!1),w.skipEmptyLines)for(var J=0;J<j.data.length;J++)H(j.data[J])&&j.data.splice(J--,1);return ue()&&function(){if(!j)return;function V(ce,fe){A(w.transformHeader)&&(ce=w.transformHeader(ce,fe)),R.push(ce)}if(Array.isArray(j.data[0])){for(var ye=0;ue()&&ye<j.data.length;ye++)j.data[ye].forEach(V);j.data.splice(0,1)}else j.data.forEach(V)}(),function(){if(!j||!w.header&&!w.dynamicTyping&&!w.transform)return j;function V(ce,fe){var be,oe=w.header?{}:[];for(be=0;be<ce.length;be++){var W=be,ve=ce[be];w.header&&(W=be>=R.length?"__parsed_extra":R[be]),w.transform&&(ve=w.transform(ve,W)),ve=re(W,ve),W==="__parsed_extra"?(oe[W]=oe[W]||[],oe[W].push(ve)):oe[W]=ve}return w.header&&(be>R.length?he("FieldMismatch","TooManyFields","Too many fields: expected "+R.length+" fields but parsed "+be,P+fe):be<R.length&&he("FieldMismatch","TooFewFields","Too few fields: expected "+R.length+" fields but parsed "+be,P+fe)),oe}var ye=1;return!j.data.length||Array.isArray(j.data[0])?(j.data=j.data.map(V),ye=j.data.length):j.data=V(j.data,0),w.header&&j.meta&&(j.meta.fields=R),P+=ye,j}()}function ue(){return w.header&&R.length===0}function re(J,V){return ye=J,w.dynamicTypingFunction&&w.dynamicTyping[ye]===void 0&&(w.dynamicTyping[ye]=w.dynamicTypingFunction(ye)),(w.dynamicTyping[ye]||w.dynamicTyping)===!0?V==="true"||V==="TRUE"||V!=="false"&&V!=="FALSE"&&(function(ce){if(k.test(ce)){var fe=parseFloat(ce);if(L<fe&&fe<M)return!0}return!1}(V)?parseFloat(V):N.test(V)?new Date(V):V===""?null:V):V;var ye}function he(J,V,ye,ce){var fe={type:J,code:V,message:ye};ce!==void 0&&(fe.row=ce),j.errors.push(fe)}this.parse=function(J,V,ye){var ce=w.quoteChar||'"';if(w.newline||(w.newline=function(oe,W){oe=oe.substring(0,1048576);var ve=new RegExp(v(W)+"([^]*?)"+v(W),"gm"),xe=(oe=oe.replace(ve,"")).split("\r"),Pe=oe.split(`
`),Ne=1<Pe.length&&Pe[0].length<xe[0].length;if(xe.length===1||Ne)return`
`;for(var qe=0,Oe=0;Oe<xe.length;Oe++)xe[Oe][0]===`
`&&qe++;return qe>=xe.length/2?`\r
`:"\r"}(J,ce)),g=!1,w.delimiter)A(w.delimiter)&&(w.delimiter=w.delimiter(J),j.meta.delimiter=w.delimiter);else{var fe=function(oe,W,ve,xe,Pe){var Ne,qe,Oe,ze;Pe=Pe||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Ie=0;Ie<Pe.length;Ie++){var mt=Pe[Ie],Tt=0,Se=0,tt=0;Oe=void 0;for(var Fe=new x({comments:xe,delimiter:mt,newline:W,preview:10}).parse(oe),nt=0;nt<Fe.data.length;nt++)if(ve&&H(Fe.data[nt]))tt++;else{var Re=Fe.data[nt].length;Se+=Re,Oe!==void 0?0<Re&&(Tt+=Math.abs(Re-Oe),Oe=Re):Oe=Re}0<Fe.data.length&&(Se/=Fe.data.length-tt),(qe===void 0||Tt<=qe)&&(ze===void 0||ze<Se)&&1.99<Se&&(qe=Tt,Ne=mt,ze=Se)}return{successful:!!(w.delimiter=Ne),bestDelimiter:Ne}}(J,w.newline,w.skipEmptyLines,w.comments,w.delimitersToGuess);fe.successful?w.delimiter=fe.bestDelimiter:(g=!0,w.delimiter=l.DefaultDelimiter),j.meta.delimiter=w.delimiter}var be=D(w);return w.preview&&w.header&&be.preview++,u=J,C=new x(be),j=C.parse(u,V,ye),te(),U?{meta:{paused:!0}}:j||{meta:{paused:!1}}},this.paused=function(){return U},this.pause=function(){U=!0,C.abort(),u=A(w.chunk)?"":u.substring(C.getCharIndex())},this.resume=function(){I.streamer._halted?(U=!1,I.streamer.parseChunk(u,!0)):setTimeout(I.resume,3)},this.aborted=function(){return F},this.abort=function(){F=!0,C.abort(),j.meta.aborted=!0,A(w.complete)&&w.complete(j),u=""}}function v(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(w){var u,C=(w=w||{}).delimiter,g=w.newline,M=w.comments,L=w.step,k=w.preview,N=w.fastMode,I=u=w.quoteChar===void 0?'"':w.quoteChar;if(w.escapeChar!==void 0&&(I=w.escapeChar),(typeof C!="string"||-1<l.BAD_DELIMITERS.indexOf(C))&&(C=","),M===C)throw new Error("Comment character same as delimiter");M===!0?M="#":(typeof M!="string"||-1<l.BAD_DELIMITERS.indexOf(M))&&(M=!1),g!==`
`&&g!=="\r"&&g!==`\r
`&&(g=`
`);var $=0,P=!1;this.parse=function(U,F,R){if(typeof U!="string")throw new Error("Input must be a string");var j=U.length,Y=C.length,H=g.length,te=M.length,ue=A(L),re=[],he=[],J=[],V=$=0;if(!U)return Ie();if(N||N!==!1&&U.indexOf(u)===-1){for(var ye=U.split(g),ce=0;ce<ye.length;ce++){if(J=ye[ce],$+=J.length,ce!==ye.length-1)$+=g.length;else if(R)return Ie();if(!M||J.substring(0,te)!==M){if(ue){if(re=[],Ne(J.split(C)),mt(),P)return Ie()}else Ne(J.split(C));if(k&&k<=ce)return re=re.slice(0,k),Ie(!0)}}return Ie()}for(var fe=U.indexOf(C,$),be=U.indexOf(g,$),oe=new RegExp(v(I)+v(u),"g"),W=U.indexOf(u,$);;)if(U[$]!==u)if(M&&J.length===0&&U.substring($,$+te)===M){if(be===-1)return Ie();$=be+H,be=U.indexOf(g,$),fe=U.indexOf(C,$)}else{if(fe!==-1&&(fe<be||be===-1)){if(!(fe<W)){J.push(U.substring($,fe)),$=fe+Y,fe=U.indexOf(C,$);continue}var ve=Tt(fe,W,be);if(ve&&ve.nextDelim!==void 0){fe=ve.nextDelim,W=ve.quoteSearch,J.push(U.substring($,fe)),$=fe+Y,fe=U.indexOf(C,$);continue}}if(be===-1)break;if(J.push(U.substring($,be)),ze(be+H),ue&&(mt(),P))return Ie();if(k&&re.length>=k)return Ie(!0)}else for(W=$,$++;;){if((W=U.indexOf(u,W+1))===-1)return R||he.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:re.length,index:$}),Oe();if(W===j-1)return Oe(U.substring($,W).replace(oe,u));if(u!==I||U[W+1]!==I){if(u===I||W===0||U[W-1]!==I){fe!==-1&&fe<W+1&&(fe=U.indexOf(C,W+1)),be!==-1&&be<W+1&&(be=U.indexOf(g,W+1));var xe=qe(be===-1?fe:Math.min(fe,be));if(U[W+1+xe]===C){J.push(U.substring($,W).replace(oe,u)),U[$=W+1+xe+Y]!==u&&(W=U.indexOf(u,$)),fe=U.indexOf(C,$),be=U.indexOf(g,$);break}var Pe=qe(be);if(U.substring(W+1+Pe,W+1+Pe+H)===g){if(J.push(U.substring($,W).replace(oe,u)),ze(W+1+Pe+H),fe=U.indexOf(C,$),W=U.indexOf(u,$),ue&&(mt(),P))return Ie();if(k&&re.length>=k)return Ie(!0);break}he.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:re.length,index:$}),W++}}else W++}return Oe();function Ne(Se){re.push(Se),V=$}function qe(Se){var tt=0;if(Se!==-1){var Fe=U.substring(W+1,Se);Fe&&Fe.trim()===""&&(tt=Fe.length)}return tt}function Oe(Se){return R||(Se===void 0&&(Se=U.substring($)),J.push(Se),$=j,Ne(J),ue&&mt()),Ie()}function ze(Se){$=Se,Ne(J),J=[],be=U.indexOf(g,$)}function Ie(Se){return{data:re,errors:he,meta:{delimiter:C,linebreak:g,aborted:P,truncated:!!Se,cursor:V+(F||0)}}}function mt(){L(Ie()),re=[],he=[]}function Tt(Se,tt,Fe){var nt={nextDelim:void 0,quoteSearch:void 0},Re=U.indexOf(u,tt+1);if(tt<Se&&Se<Re&&(Re<Fe||Fe===-1)){var en=U.indexOf(C,Re);if(en===-1)return nt;Re<en&&(Re=U.indexOf(u,Re+1)),nt=Tt(en,Re,Fe)}else nt={nextDelim:Se,quoteSearch:tt};return nt}},this.abort=function(){P=!0},this.getCharIndex=function(){return $}}function E(w){var u=w.data,C=n[u.workerId],g=!1;if(u.error)C.userError(u.error,u.file);else if(u.results&&u.results.data){var M={abort:function(){g=!0,O(u.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:T,resume:T};if(A(C.userStep)){for(var L=0;L<u.results.data.length&&(C.userStep({data:u.results.data[L],errors:u.results.errors,meta:u.results.meta},M),!g);L++);delete u.results}else A(C.userChunk)&&(C.userChunk(u.results,M,u.file),delete u.results)}u.finished&&!g&&O(u.workerId,u.results)}function O(w,u){var C=n[w];A(C.userComplete)&&C.userComplete(u),C.terminate(),delete n[w]}function T(){throw new Error("Not implemented.")}function D(w){if(typeof w!="object"||w===null)return w;var u=Array.isArray(w)?[]:{};for(var C in w)u[C]=D(w[C]);return u}function S(w,u){return function(){w.apply(u,arguments)}}function A(w){return typeof w=="function"}return s&&(t.onmessage=function(w){var u=w.data;if(l.WORKER_ID===void 0&&u&&(l.WORKER_ID=u.workerId),typeof u.input=="string")t.postMessage({workerId:l.WORKER_ID,results:l.parse(u.input,u.config),finished:!0});else if(t.File&&u.input instanceof File||u.input instanceof Object){var C=l.parse(u.input,u.config);C&&t.postMessage({workerId:l.WORKER_ID,results:C,finished:!0})}}),(f.prototype=Object.create(m.prototype)).constructor=f,(p.prototype=Object.create(m.prototype)).constructor=p,(a.prototype=Object.create(a.prototype)).constructor=a,(b.prototype=Object.create(m.prototype)).constructor=b,l})});var ft={async XHR(d){let t=window.GM_xmlhttpRequest||(GM?GM.xmlHttpRequest:null);return t?new Promise((e,s)=>{Object.assign(d,{onabort:s,onerror:s,onload:e,ontimeout:s}),t(d)}):Promise.reject()},async getValue(d,t=null){return window.GM_getValue?Promise.resolve(GM_getValue(d)||t):await GM.getValue(d)||t},async setValue(d,t){window.GM_setValue?GM_setValue(d,t):GM.setValue(d,t)}};var Tn="OC-Addons",Ai="St\xE9phane TORCHY",B="background-color:green;color:white",Ei="background-color:black;color:white",Ge="background-color:coral;color:white",kt="background-color:cyan;color:white",me="background-color:red;color:white",We="background-color:blue;color:white",Ze="auto-financ\xE9",je="financ\xE9 par un tiers",ht="autre",gt="r\xE9alis\xE9e",pt="annul\xE9e",yt="annul\xE9e tardivement",bt="\xE9tudiant absent",$t="\xE9tudiante absente",vt=6,Dn=30,On=35,Mn=40,In=45,Nn=50,jn=55,Z=0,X=1,ee=2,xi=[{pathId:158,path:"158-trouvez-lemploi-qui-vous-correspond",value:2}],se=0,ae=1,ne=2,de=3,q=0,Q=1,z=2,Bn=0,kn="completed",$n="canceled",Yn="late canceled",Ln="marked student as absent",Yt="ol";var Pn=function(){return new Promise(d=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",d):d()})},Rr=Object.prototype.toString;function Hr(d){return d==null?d===void 0?"[object Undefined]":"[object Null]":Rr.call(d)}function Fn(d){let t=typeof d;return t=="symbol"||t==="object"&&d!=null&&Hr(d)=="[object Symbol]"}function Ur(d){if(typeof d=="string"||Fn(d))return d;let t=`${d}`;return t=="0"&&1/d==-INFINITY?"-0":t}function tn(d,t){if(typeof d!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");let e=function(...s){let n=t?t.apply(this,s):s[0],o=e.cache;if(o.has(n))return o.get(n);let l=d.apply(this,s);return e.cache=o.set(n,l)||o,l};return e.cache=new(tn.Cache||Map),e}tn.Cache=Map;var qr=500;function Gr(d){let t=tn(d,e=>{let{cache:s}=t;return s.size===qr&&s.clear(),e});return t}var Vr=".".charCodeAt(0),Qr=/\\(\\)?/g,zr=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Wr=Gr(d=>{let t=[];return d.charCodeAt(0)===Vr&&t.push(""),d.replace(zr,(e,s,n,o)=>{let l=e;n?l=o.replace(Qr,"$1"):s&&(l=s.trim()),t.push(l)}),t}),Kr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jr=/^\w*$/;function Zr(d,t){if(Array.isArray(d))return!1;let e=typeof d;return e==="number"||e==="boolean"||d==null||Fn(d)?!0:Jr.test(d)||!Kr.test(d)||t!=null&&d in Object(t)}function Xr(d,t){return Array.isArray(d)?d:Zr(d,t)?[d]:Wr(d)}function eo(d,t){t=Xr(t,d);let e=0,s=t.length;for(;d!=null&&e<s;)d=d[Ur(t[e++])];return e&&e==s?d:void 0}function to(d,t,e){let s=d==null?void 0:eo(d,t);return s===void 0?e:s}var Qt=async function(d="",t="",e=!1){console.info(`%cfetch() waiting return from : ${d}`,B);let s=await ft.XHR({method:"GET",url:d,responseType:"text/html",headers:{"User-Agent":"Mozilla/5.0"},onprogress:function(v){}}).catch(v=>{console.error(`%cError ${v}`,me)}),o=new DOMParser().parseFromString(s.responseText.replace(/\n/mg,""),"text/html");if(o.querySelector("meta[id=captcha-bypass]")!==null)throw console.error(`%cError CloudFlare CAPTCHA : ${o.querySelector("title").innerText}`,B),new Error("Must Respond to Cloudflare Captcha or waiting....");if(t.length>0&&t.toUpperCase().startsWith("JSON:")){var c=t.split(":"),m=c[1],f=c[2]||"",p=c[3]||"";if(m.length>0){var a=JSON.parse(o.getElementById(m).textContent),b=to(a,f,p);return b}}var y={};return e===!0?y=o.querySelectorAll(t):y=o.querySelector(t),y};var Dt=function(d,t=-1){try{var e=(d.querySelector("a").href||"/").split("/");return e[e.length+t]}catch(s){console.error(`%cError in getkey${s.stack||s}`,me)}},Rn=function(d){var t=d.trim().split(" ");try{var e=dayjs_locale_fr.months.findIndex(s=>s===t[1])+1}catch(s){console.error(`%cError in extractDate${s.stack||s}`,me)}return`${t[2]}-${e}-${t[0]}T${t[4]}`};var Ke=function(d){return new Promise(t=>setTimeout(t,d))},Hn=function(d){return d.substring(d.lastIndexOf(".")+1,d.length)||d},Lt=function(d,t){for(var e=d.split("."),s=t.split("."),n=0;n<3;n++){var o=Number(e[n]),l=Number(s[n]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return 0},Un=function(t,e){return console.info("Reading:",t),fetch(t,{mode:"same-origin"}).then(function(s){return s.blob()}).then(function(s){var n=new FileReader;n.addEventListener("loadend",function(){e(this.result)}),n.readAsText(s)})},qn=function(d){let t=d,e=d.reduce(function(p,a){return p*a});var s=new Array(e);let n=function(...p){let a=p.pop();if(p.length!==d.length)throw"Wrong matrix dimensions, need "+d.length+", you provide "+a.length+"!";if(f(p)===0)throw"Wrong type for set need one or more int has dimension, check type of!";let b=m(p);return s[b]=a,a},o=function(...p){if(p.length!==d.length)throw"Wrong matrix dimensions, need "+d.length+", you provide "+p.length+"!";if(f(p)===0)throw"Wrong type for set need one or more int has dimension, check type of!";let a=m(p);return s[a]},l=function(...p){let a=m(p);return s[a]=void 0,s[a]===void 0},c=function(){console.group("dump table"),console.table(s),console.groupEnd("dump table")},m=function(p){return p.reduce(function(a,b,y,v){let x=t.slice(y+1),E=x.length>0?x.reduce(function(O,T){return O*T}):1;return a+b*E},0)},f=function(p){return p.reduce((a,b)=>a&typeof b=="number",1)};return Object.freeze({set:n,get:o,del:l,toConsole:c})},Gn=function(d,t=0){let e=3735928559^t,s=1103547991^t;for(let n=0,o;n<d.length;n++)o=d.charCodeAt(n),e=Math.imul(e^o,2654435761),s=Math.imul(s^o,1597334677);return e=Math.imul(e^e>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),s=Math.imul(s^s>>>16,2246822507)^Math.imul(e^e>>>13,3266489909),4294967296*(2097151&s)+(e>>>0)},pe=function(d,t,e=Error){if(!d)throw new e(t)};var Vn=d=>d==null;var nn=d=>Array.isArray(d),Qn=d=>d.toString().trim().length<="function(){}".length;var _t=function(d){var t;return function(){var e=this,s=arguments;t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame(function(){d.apply(e,s)})}};var zn=function(d){let t=Date.now(),e=null;do e=Date.now();while(e-t<d)};HTMLElement.prototype.appendFirst=function(d){this.firstChild?this.insertBefore(d,this.firstChild):this.appendChild(d)};var Ot=async function(d=null,t=null,e=!0){var s="";s+="<style>",s+="form {display: grid;padding: 1em;background: #f9f9f9;border: 1px solid #c1c1c1;margin: 2rem auto 0 auto;max-width: 600px;padding: 1em;}",s+="form input {background: #fff;border: 1px solid #9c9c9c;}",s+="form button {background: lightgrey;padding: 0.7em;width: 100%;border: 0;}",s+="form button:hover {background: gold;}",s+="form label {padding: 0.5em 0.5em 0.5em 0;}",s+="form input {padding: 0.7em;margin-bottom: 0.5rem;}",s+="form input:focus {outline: 3px solid gold;}",s+="@media (min-width: 400px) {form {grid-template-columns: 200px 1fr;grid-gap: 16px;}form label {text-align: right;grid-column: 1 / 2;}form input, form button {grid-column: 2 / 3;}}",s+="</style>",s+='<form class="form1" action="">',s+='<label for="dtFrom" class="date">Date de d\xE9but</label>',d?s+='<input id="dtFrom" type="date" max="2030-12-31" min="2010-12-31" value="'+dayjs(d).format("YYYY-MM-DD")+'">':s+='<input id="dtFrom" type="date" max="2030-12-31" min="2010-12-31">',s+='<label for="dtTo" class="date">Date de fin</label>',d?s+='<input id="dtTo" type="date" max="2030-12-31" min="2010-12-31" value="'+dayjs(t).format("YYYY-MM-DD")+'">':s+='<input id="dtTo" type="date" max="2030-12-31" min="2010-12-31">',s+="</form>";let{value:n}=await Swal.fire({title:"<strong>Choix de la p\xE9riode</strong>",icon:"info",html:s,showCloseButton:!0,focusConfirm:!1,position:"top-start",grow:"row",footer:"Choisissez la p\xE9riode pour la s\xE9lection des temps factur\xE9s",showLoaderOnConfirm:!0,preConfirm:()=>[document.getElementById("dtFrom").value,document.getElementById("dtTo").value],onRender:o=>{},onOpen:o=>{e===!0&&o.querySelector("#dtFrom").addEventListener("change",_handler=function(){document.getElementById("dtTo").value=dayjs(document.getElementById("dtFrom").value).endOf("month").format("YYYY-MM-DD")})},onClose:o=>{e===!0&&o.querySelector("#dtFrom").removeEventListener("change",_handler)},onAfterClose:o=>{},onDestroy:o=>{}});return d=dayjs(n[0]),t=dayjs(n[1]),await Ke(250),[d,t]},Mt=async function(d){await Swal.fire({position:"top-end",icon:"success",title:d,showConfirmButton:!1,timer:1500})};var rt=class{},wt=rt;G(wt,"tbl_name","f_archives"),G(wt,"add",async function(t){let e=K.Cfg.dbase,s=dayjs().format("YYYY-MM-DDTHH:mm:ssZ[Z]"),n={id:t[0].to.format("YYYYMM"),data:t,created_at:t[0].now};console.log(`%cWill create archive for id ${t[0].to.format("YYYYMM")} (YYYYMM)`,B),e.get(rt.tbl_name).push(JSON.parse(JSON.stringify(n))).write()}),G(wt,"exists",function(t){return K.Cfg.dbase.get(rt.tbl_name).find({id:t}).value()!==void 0}),G(wt,"get",function(t){var s=K.Cfg.dbase.get(rt.tbl_name).find({id:t}).value();if(s===void 0)throw Error("Erreur qui ne devrait jamais arriver en Archive.get");return console.log(`%cWill use archive for id ${t} (YYYYMM)`,B),s}),G(wt,"delete",function(t=null,e=null){let s=K.Cfg.dbase;if(typeof t=="string"&&(t=t.format("YYYY-MM-DD")),typeof e=="string"&&(e=e.format("YYYY-MM-DD")),t===null&&e==null){console.log("%cWanna suppress ALL Archives from DB ",B),s.get(rt.tbl_name).remove().write();return}if(e==null){s.get(rt.tbl_name).remove(function(n){return dayjs(n.id,"YYYYMM").isBefore(e),"month"}).write();return}if(t==null){s.get(rt.tbl_name).remove(function(n){return dayjs(n.id,"YYYYMM").isAfter(t,"month")}).write();return}s.get(rt.tbl_name).remove(function(n){return dayjs(n.id,"YYYYMM").isBetween(t,e,"month","[]")}).write()});var St=wt;var rn=class{},Pt=rn;G(Pt,"isInOldMode",function(t){var e=null;typeof t=="string"?e=dayjs(t):e=t;try{return e.isBefore(rn.getOldModeDate())}catch(s){throw Error("Erreur qui ne devrait jamais arriver en IsInOldMode (probablement un probleme sur la conversion de la date en objet dayjs:"+s.stack||s)}}),G(Pt,"getOldModeDate",function(){return dayjs("2020-06-01")}),G(Pt,"getAppVersion",function(){return GM.info.script.version});var Ce=Pt;var no=function(){let d="students_history",t=1,e=2,s=function(b){if(b.toUpperCase()==="FUNDING")return t;if(b.toUpperCase()==="PATH")return e;throw Error("Erreur qui ne devrait jamais arriver en getype")},n=function(b,y,v=null){return l(b,t,y,v)},o=function(b,y,v=null){return l(b,e,y,v)},l=function(b,y,v,x=null){let E=!1;typeof b=="number"&&(b=b.toString(10)),pe(typeof b=="string","You must provide a string.",TypeError);let O=K.Cfg.dbase;typeof x=="string"&&(x=dayjs(x)),x===null&&(x=dayjs()),pe(x instanceof dayjs,"created date must be a string, a dayjs instance or null.",TypeError);let T={id:b,type:0|y,value:v,date:x.valueOf(),humanDate:x.format("YYYY-MM-DDTHH:mm:ssZZ")};return E===!0&&console.log(`%cAdd in student history at date ${dayjs(T.date).format("YYYY-MM-DDTHH:mm:ssZZ")} data ${v} with type:${y} cf const of object`,B),O.get(d).push(JSON.parse(JSON.stringify(T))).write()},c=function(b,y=null,v=null){let x=K.Cfg.dbase;return b==null&&y==null&&v==null?(console.log("%cRemove all in student history",B),x.get(d).remove().write()):(typeof v=="string"&&(v=dayjs(v)),v==null?y==null?(console.log(`%cRemove for student id:${b} history for all type of event`,B),x.get(d).remove({id:b}).write()):(console.log(`%cRemove for student id:${b} history with event type:${y} cf const of object`,B),x.get(d).remove({id:b,type:y}).write()):(console.log(`%cRemove for student id:${b} history at date ${v.format("DD/MM/YYYY")} with event type:${y} cf const of object`,B),x.get(d).remove({id:b,type:y,date:v.valueOf()}).write()))},m=function(b,y,v=null){let x=!1,E=K.Cfg.dbase;typeof v=="string"&&(v=dayjs(v)),v===null&&(v=dayjs()),x===!0&&console.log("%cSearching in student history at date %o ",B,v),x===!0&&console.log(`%cSearching in student history at date ${v.format("DD/MM/YYYY")} any data with type:${y} cf const of object`,B);var O=+v.valueOf(),T=E.get(d).filter(A=>A.id===b&&A.type&y).map(A=>A.date-O).filter(A=>A>=0).value();if(T.length==0){x===!0&&console.log(`%cThere is no data in student history at date ${v.format("DD/MM/YYYY")} with type:${y} cf const of object`,B);return}let S=O+(A=>Math.min(...A))(T);return E.get(d).filter(A=>A.id===b&&A.type&y&&A.date==S).value()[0]},f=function(b){return a(b,t)},p=function(b){return a(b,e)},a=function(b,y){return b.type&y};return Object.freeze({addFunding:n,addPath:o,getType:s,remove:c,find:m,isFunding:f,isPath:p,tbl_name:d})},ro=no(),Ve=ro;var on={APP_DEBUG_STYLE:["color: #373737","background-color: #CC6","padding: 2px 4px","border-radius: 2px"].join(";"),VERBOSE:!0,DEBUG:!0,NAME:"Api"},oo=function(){let d={},t="0",e=on.VERBOSE,s="https://api.openclassrooms.com",n="pending",o="canceled",l="completed",c="late canceled",m="marked student as absent",f=async function(){let j=await a();return j=JSON.parse(j),t=j.id,t},p=async function(){if(d.length==0)throw new Error("_header is empty, no xhr have been trapped so could't do some api request")},a=async function(){let j=s+"/me";return await P(j)},b=async function(j){let Y=`${s}/mentors/${j}`;return await P(Y)},y=function(j,Y){return{Range:`items=${j}-${Y}`}},v=async(j=dayjs(),Y=0,H=19)=>await O("AFTER",j,[n],Y,H),x=async(j=dayjs(),Y=0,H=19)=>await O("BEFORE",j,[n],Y,H),E=async(j,Y=0,H=19)=>await T(j,Y,H),O=async function(j="BEFORE",Y,H=[o,l,c,m],te=0,ue=19){bDebug=!0,typeof Y=="string"&&(Y=dayjs(Y)),pe(nn(H)===!0,"You must provide an array as param aFilter.",TypeError),pe(Y instanceof dayjs,"date must be a string or a dayjs object.",TypeError);let re=H.join(","),he=encodeURIComponent(Y.format("YYYY-MM-DDTHH:MM:ss[Z]"));re=encodeURIComponent(re);let J="";t==0&&await f(),j==="AFTER"?(J=`${s}/users/${t}/sessions?actor=expert&after=${he}&life-cycle-status=${re}`,console.log("URL IS %s",J)):(J=`${s}/users/${t}/sessions?actor=expert&before=${he}&life-cycle-status=${re}`,console.log("URL IS %s",J));let V=y(te,ue);return bDebug&&console.log("%c_getSessionOnDate url to call is:%s , params are %o",B,J,V),await k(J,y(te,ue))},T=async function(j=[],Y=0,H=19){let te=`${on.NAME}::_getSession()`,ue=on.DEBUG;pe(nn(j)===!0,"You must provide an array as param aFilter.",TypeError),j.length==0&&(j=[o,l,c,m]);let re=j.join(",");re=encodeURIComponent(re),t==0&&await f();let he=`${s}/users/${t}/sessions?actor=expert&life-cycle-status=${re}`,J=y(Y,H);ue&&console.log("%c%s%c Url to call is:%o , params are %o",B,te,"",he,J);let V=await k(he,J);if(V==null)throw console.error("%cAPI have a problem returned value %o is null|undefined",me,V),new Error(`Request:${s}/users/${t}/sessions?actor=expert&life-cycle-status=${re} have a problem`);return V.errors&&console.error("%cAPI return an error %s",me,V.errors.message),V},D=async function(j){let Y=`${s}/users/${j}`;return await k(Y)},S=async function(j){let Y=`${s}/users/${j}/availabilities`;return await k(Y)},A=async function(j,Y=0,H=19){let te=`${s}/users/${j}/events`;return await k(te,y(Y,H))},w=async function(j,Y){typeof Y=="string"&&(Y=dayjs(Y)),pe(Y instanceof dayjs,"date must be a string or a dayjs object.",TypeError);let H=encodeURIComponent(Y.format("YYYY-MM-DDTHH:MM:ss[Z]")),te=`${s}/users/${j}/events?after=${H}`;return await k(te)},u=async function(j,Y){typeof Y=="string"&&(Y=dayjs(Y)),pe(Y instanceof dayjs,"date must be a string or a dayjs object.",TypeError);let H=encodeURIComponent(Y.format("YYYY-MM-DDTHH:MM:ss[Z]")),te=`${s}/users/${j}/events?before=${H}`;return await k(te)},C=async function(j){await p();let Y=`${s}/users/${j}/paths/followed-path`;return await k(Y)},g=async function(j){let Y=`${s}/users/${j}/paths`;return await k(Y)},M=async function(j=null){if(j===null){let te=await a();te=JSON.parse(te),j=te.id}let Y=`${s}/mentors/${j}/students`,H;try{H=await k(Y)}catch(te){console.error("%c[getUserStudents()] Trapped error %o",me,te)}finally{return H}},L=async function(j=null,Y,H,te){if(j===null){let V=await a();V=JSON.parse(V),j=V.id}let ue=`${s}/mentoring-sessions`,he=await N(ue,{},{mentorId:j,projectId:Y,studentId:H,sessionDate:te});if(typeof he=="string"){let V=JSON.parse(he);if("errors"in V&&V.errors.length==1&&V.errors[0].code==="SESSION_ALREADY_EXISTS"){let ye=V.errors[0];console.error("%c[Api.bookStudent()] call bookStudent error[%s] :%s ",me,ye.code,ye.message)}else console.log("%c[Api.bookStudent()] return an unknow value :%o",me,V);return V}let J=await he.json();console.log("%c[Api.bookStudent()] return :%o ",B,J)},k=async function(j,Y={}){await p();let H=await P(j,Y);if(typeof H=="string"){let te=JSON.parse(H);if(typeof te.errors!="undefined"){let ue=te.errors.reduce((re,he)=>`${re}{v.message}`);throw console.error("%c[Api.xGet()] call _fetchGet error :%s ",me,ue.message),new Error(`[Api.xGet()] Irrecoverable error :' ${ue.message}'`)}return H}throw new Error(`[Api.xGet()] Irrecoverable error result is not a string but a :' ${typeof H}'`)},N=async function(j,Y={},H={},te=!0){await p();let ue=await U(j,Y,H);if(console.log("%c[Api.xPost()] call _fetchPost with url :%s and with data:%o",B,j,H),typeof ue=="string"){let re=JSON.parse(ue);if(typeof re.errors!="undefined"){if(re.errors.length==1&&re.errors[0].code==="SESSION_ALREADY_EXISTS"||re.errors.length==1&&re.errors[0].code==="TOO_LOW_ERROR"&&re.errors[0].field==="sessionDate")return ue;console.error("%c[Api.xPost()] raw list of error :%o ",me,re);let he=re.errors.reduce((J,V)=>`${J}{v.message}`);if(console.error("%c[Api.xPost()] call _fetchPost error :%s ",me,he.message),te===!0)throw new Error(`[Api.xPost()] Irrecoverable error :' ${he.message}'`);return}return ue}if(te===!0)throw new Error(`[Api.xPost()] Irrecoverable error result is not a string but a :' ${typeof ue}'`)},I=function(j){t=j},$=function(j){return decodeURI(j)!==decodeURIComponent(j)},P=async function(j="",Y={},H="json",te="",ue=!0,re=!1){let he=Object.assign({"User-Agent":"Mozilla/5.0"},d,Y);if(H.toLowerCase()==="json"){let V=await ft.XHR({method:"GET",url:j,responseType:"application/json",headers:he}).catch(ye=>{if(Vn(V)){if(re===!0)throw new Error(`[Api._fetchGet()] Repsponse is undefined : ${ye}'`);return null}return console.error("%c[_fetchGet()]Error is %o",me,ye),null});return V.responseText}if(H.toLowerCase==="html"){let V=await ft.XHR({method:"GET",url:j,responseType:"application/json",headers:he}).catch(fe=>{console.error("%c[Api_fetchGet()]Error is %o",me,fe)}),ce=new DOMParser().parseFromString(V.responseText.replace(/\n/mg,""),"text/html");var J={};return ue===!0?J=ce.querySelectorAll(te):J=ce.querySelector(te),J}},U=async function(j="",Y={},H={}){console.info(`%c[Api._fetchPost()] waiting return from : ${j}`,B,j);let te=Object.assign({"User-Agent":"Mozilla/5.0"},d,Y);return console.log("%c[Api._fetchPost()]final header is %o",B,te),console.log("%c[Api._fetchPost()]data is %o",B,H),(await ft.XHR({method:"POST",url:j,responseType:"application/json",headers:te,data:JSON.stringify(H)}).catch(re=>{console.error("%c[Api_fetchPost()]Error is %o",me,re)})).responseText},F=function(){let j=/^https:\/\/api.openclassrooms.com/g;var Y=window.XMLHttpRequest.prototype.open,H=window.XMLHttpRequest.prototype.send,te=window.XMLHttpRequest.prototype.setRequestHeader,ue=function(V,ye,ce,fe,be){return this._url=ye,this._requestHeaders={},this._knox=[],Y.apply(this,arguments)},re=function(){if(this.readyState===4&&this.status&&this.status>=200&&this.status<300&&this._url.match(j))for(var V in this._knox)d[this._knox[V].key]=this._knox[V].value},he=function(V){return this.onreadystatechange=re,H.apply(this,arguments)},J=function(V,ye){return this._url.match(j)&&this._knox.push({key:V,value:ye}),this._requestHeaders[V]=ye,te.apply(this,arguments)};window.XMLHttpRequest.prototype.open=ue,window.XMLHttpRequest.prototype.send=he,window.XMLHttpRequest.prototype.setRequestHeader=J},R=function(){let j=!1,Y=/^https:\/\/api.openclassrooms.com/g,H="color:DarkSalmon;background-color:AliceBlue;";var te=window.XMLHttpRequest.prototype.open,ue=window.XMLHttpRequest.prototype.send,re=window.XMLHttpRequest.prototype.setRequestHeader,he=function(ce,fe,be,oe,W){return j===!0&&console.log("%cmethod %o url:%o, async:%o, user %o, password:%o",H,ce,fe,be,oe,W),this._url=fe,this._requestHeaders={},this._knox=[],te.apply(this,arguments)},J=function(){if(j===!0&&console.log("%cReady state changed to: %o",H,this.readyState),this.readyState===4&&this.status&&this.status>=200&&this.status<300){if(this._url.match(Y)){j===!0&&console.log("%cOPENCLASSROOMS API",H);for(var ce in this._knox)d[this._knox[ce].key]=this._knox[ce].value;j===!0&&console.log("%c _header is %o",H,d),j===!0&&($(this._url)?console.log("%cDECODED URL:%s",H,decodeURIComponent(this._url)):console.log("%c DECODED URL:%s",H,decodeURI(this._url)))}j===!0&&console.log("%cResponse is :%o",H,this.response)}},V=function(ce){return j===!0&&console.log("%csendReplacement(%o)",H,ce),this.onreadystatechange=J,ue.apply(this,arguments)},ye=function(ce,fe){return this._url.match(Y)&&this._knox.push({key:ce,value:fe}),this._requestHeaders[ce]=fe,re.apply(this,arguments)};window.XMLHttpRequest.prototype.open=he,window.XMLHttpRequest.prototype.send=V,window.XMLHttpRequest.prototype.setRequestHeader=ye};return F(),Object.freeze({bookStudent:L,forge:I,getMe:a,getMentor:b,getPendingSessionAfter:v,getPendingSessionBefore:x,getHistorySession:E,getUser:D,getUserAvailabilities:S,getUserEvents:A,getUserEventsAfter:w,getUserEventsBefore:u,getUserFollowedPath:C,getUserPath:g,getUserStudents:M,xGet:k,xPost:N})},io=oo(),It=io;var le=(d,t)=>function(){return t||(0,d[Object.keys(d)[0]])((t={exports:{}}).exports,t),t.exports},Ye=le({"src/lib/isFunction.js"(d,t){t.exports=function(s){return typeof s=="function"}}}),Xe=le({"src/lib/isNil.js"(d,t){t.exports=function(s){return s==null}}}),so=le({"src/lib/fail.js"(d,t){t.exports=function(s){throw new TypeError("[tcomb] "+s)}}}),Ft=le({"src/lib/getFunctionName.js"(d,t){t.exports=function(s){return s.displayName||s.name||"<function"+s.length+">"}}}),Wn=le({"src/lib/stringify.js"(d,t){var e=Ft();function s(n,o){return typeof o=="function"?e(o):o}t.exports=function(o){try{return JSON.stringify(o,s,2)}catch(l){return String(o)}}}}),Ae=le({"src/lib/assert.js"(d,t){var e=Ye(),s=Xe(),n=so(),o=Wn();function l(c,m){c!==!0&&(e(m)?m=m():s(m)&&(m='Assert failed (turn on "Pause on exceptions" in your Source panel)'),l.fail(m))}l.fail=n,l.stringify=o,t.exports=l}}),zt=le({"src/lib/isString.js"(d,t){t.exports=function(s){return typeof s=="string"}}}),ot=le({"src/lib/isArray.js"(d,t){t.exports=function(s){return Array.isArray?Array.isArray(s):s instanceof Array}}}),it=le({"src/lib/isObject.js"(d,t){var e=Xe(),s=ot();t.exports=function(o){return!e(o)&&typeof o=="object"&&!s(o)}}}),Le=le({"src/lib/isType.js"(d,t){var e=Ye(),s=it();t.exports=function(o){return e(o)&&s(o.meta)}}}),Be=le({"src/lib/getTypeName.js"(d,t){var e=Le(),s=Ft();t.exports=function(o){return e(o)?o.displayName:s(o)}}}),Rt=le({"src/lib/forbidNewOperator.js"(d,t){var e=Ae(),s=Be();t.exports=function(o,l){e(!(o instanceof l),function(){return"Cannot use the new operator to instantiate the type "+s(l)})}}}),He=le({"src/lib/irreducible.js"(d,t){var e=Ae(),s=zt(),n=Ye(),o=Rt();t.exports=function(c,m){function f(p,a){return p}return f.meta={kind:"irreducible",name:c,predicate:m,identity:!0},f.displayName=c,f.is=m,f}}}),sn=le({"src/lib/Any.js"(d,t){var e=He();t.exports=e("Any",function(){return!0})}}),ao=le({"src/lib/Array.js"(d,t){var e=He(),s=ot();t.exports=e("Array",s)}}),Wt=le({"src/lib/isBoolean.js"(d,t){t.exports=function(s){return s===!0||s===!1}}}),Kn=le({"src/lib/Boolean.js"(d,t){var e=He(),s=Wt();t.exports=e("Boolean",s)}}),lo=le({"src/lib/Date.js"(d,t){var e=He();t.exports=e("Date",function(s){return s instanceof Date})}}),uo=le({"src/lib/Error.js"(d,t){var e=He();t.exports=e("Error",function(s){return s instanceof Error})}}),Kt=le({"src/lib/Function.js"(d,t){var e=He(),s=Ye();t.exports=e("Function",s)}}),Jn=le({"src/lib/Nil.js"(d,t){var e=He(),s=Xe();t.exports=e("Nil",s)}}),an=le({"src/lib/isNumber.js"(d,t){t.exports=function(s){return typeof s=="number"&&isFinite(s)&&!isNaN(s)}}}),Zn=le({"src/lib/Number.js"(d,t){var e=He(),s=an();t.exports=e("Number",s)}}),Qe=le({"src/lib/isTypeName.js"(d,t){var e=Xe(),s=zt();t.exports=function(o){return e(o)||s(o)}}}),st=le({"src/lib/isIdentity.js"(d,t){var e=Ae(),s=Kn(),n=Le(),o=Be();t.exports=function(c){return n(c)?c.meta.identity:!0}}}),at=le({"src/lib/create.js"(d,t){var e=Le(),s=Ft(),n=Ae(),o=Wn();t.exports=function(c,m,f){return e(c)?!c.meta.identity&&typeof m=="object"&&m!==null?new c(m,f):c(m,f):m}}}),dt=le({"src/lib/is.js"(d,t){var e=Le();t.exports=function(n,o){return e(o)?o.is(n):n instanceof o}}}),dn=le({"src/lib/refinement.js"(d,t){var e=Ae(),s=Qe(),n=Ye(),o=Rt(),l=st(),c=at(),m=dt(),f=Be(),p=Ft();function a(y,v){return"{"+f(y)+" | "+p(v)+"}"}function b(y,v,x){var E=x||a(y,v),O=l(y);function T(D,S){var A=c(y,D,S);return A}return T.meta={kind:"subtype",type:y,predicate:v,name:x,identity:O},T.displayName=E,T.is=function(D){return m(D,y)&&v(D)},T.update=function(D,S){return T(e.update(D,S))},T}b.getDefaultName=a,t.exports=b}}),co=le({"src/lib/Integer.js"(d,t){var e=dn(),s=Zn();t.exports=e(s,function(n){return n%1==0},"Integer")}}),fo=le({"src/lib/Object.js"(d,t){var e=He(),s=it();t.exports=e("Object",s)}}),po=le({"src/lib/RegExp.js"(d,t){var e=He();t.exports=e("RegExp",function(s){return s instanceof RegExp})}}),ln=le({"src/lib/String.js"(d,t){var e=He(),s=zt();t.exports=e("String",s)}}),mo=le({"src/lib/Type.js"(d,t){var e=He(),s=Le();t.exports=e("Type",s)}}),un=le({"src/lib/dict.js"(d,t){var e=Ae(),s=Qe(),n=Ye(),o=Be(),l=st(),c=it(),m=at(),f=dt();function p(b,y){return"{[key: "+o(b)+"]: "+o(y)+"}"}function a(b,y,v){var x=v||p(b,y),E=o(b),O=o(y),T=l(b)&&l(y);function D(S,A){if(T)return S;var w=!0,u={};for(var C in S)if(S.hasOwnProperty(C)){C=m(b,C,null);var g=S[C],M=m(y,g,null);w=w&&g===M,u[C]=M}return w&&(u=S),u}return D.meta={kind:"dict",domain:b,codomain:y,name:v,identity:T},D.displayName=x,D.is=function(S){if(!c(S))return!1;for(var A in S)if(S.hasOwnProperty(A)&&(!f(A,b)||!f(S[A],y)))return!1;return!0},D.update=function(S,A){return D(e.update(S,A))},D}a.getDefaultName=p,t.exports=a}}),cn=le({"src/lib/mixin.js"(d,t){var e=Xe(),s=Ae();t.exports=function(o,l,c){if(e(l))return o;for(var m in l)l.hasOwnProperty(m)&&(o[m]=l[m]);return o}}}),Xn=le({"src/lib/isUnion.js"(d,t){var e=Le();t.exports=function(n){return e(n)&&n.meta.kind==="union"}}}),ho=le({"src/lib/declare.js"(d,t){var e=Ae(),s=Qe(),n=Le(),o=Xe(),l=cn(),c=Be(),m=Xn(),f=1;t.exports=function(a){var b;function y(v,x){return b(v,x)}return y.define=function(v){return m(v)&&y.hasOwnProperty("dispatch")&&(v.dispatch=y.dispatch),b=v,l(y,b,!0),a&&(b.displayName=y.displayName=a,y.meta.name=a),y.meta.identity=b.meta.identity,y.prototype=b.prototype,y},y.displayName=a||c(y)+"$"+f++,y.meta={identity:!1},y.prototype=null,y}}}),go=le({"src/lib/enums.js"(d,t){var e=Ae(),s=Qe(),n=Rt(),o=an(),l=zt(),c=it();function m(p){return Object.keys(p).map(function(a){return e.stringify(a)}).join(" | ")}function f(p,a){var b=a||m(p);function y(v,x){return v}return y.meta={kind:"enums",map:p,name:a,identity:!0},y.displayName=b,y.is=function(v){return(l(v)||o(v))&&p.hasOwnProperty(v)},y}f.of=function(p,a){p=l(p)?p.split(" "):p;var b={};return p.forEach(function(y){b[y]=y}),f(b,a)},f.getDefaultName=m,t.exports=f}}),er=le({"src/lib/list.js"(d,t){var e=Ae(),s=Qe(),n=Ye(),o=Be(),l=st(),c=at(),m=dt(),f=ot();function p(b){return"Array<"+o(b)+">"}function a(b,y){var v=y||p(b),x=o(b),E=l(b);function O(T,D){if(E)return T;for(var S=!0,A=[],w=0,u=T.length;w<u;w++){var C=T[w],g=c(b,C,null);S=S&&C===g,A.push(g)}return S&&(A=T),A}return O.meta={kind:"list",type:b,name:y,identity:E},O.displayName=v,O.is=function(T){return f(T)&&T.every(function(D){return m(D,b)})},O.update=function(T,D){return O(e.update(T,D))},O}a.getDefaultName=p,t.exports=a}}),yo=le({"src/lib/isMaybe.js"(d,t){var e=Le();t.exports=function(n){return e(n)&&n.meta.kind==="maybe"}}}),bo=le({"src/lib/maybe.js"(d,t){var e=Ae(),s=Qe(),n=Ye(),o=yo(),l=st(),c=sn(),m=at(),f=Jn(),p=Rt(),a=dt(),b=Be();function y(x){return"?"+b(x)}function v(x,E){if(o(x)||x===c||x===f)return x;var O=E||y(x),T=l(x);function D(S,A){return f.is(S)?S:m(x,S,A)}return D.meta={kind:"maybe",type:x,name:E,identity:T},D.displayName=O,D.is=function(S){return f.is(S)||a(S,x)},D}v.getDefaultName=y,t.exports=v}}),tr=le({"src/lib/getDefaultInterfaceName.js"(d,t){var e=Be();function s(n){return"{"+Object.keys(n).map(function(o){return o+": "+e(n[o])}).join(", ")+"}"}t.exports=s}}),vo=le({"src/lib/isStruct.js"(d,t){var e=Le();t.exports=function(n){return e(n)&&n.meta.kind==="struct"}}}),_o=le({"src/lib/isInterface.js"(d,t){var e=Le();t.exports=function(n){return e(n)&&n.meta.kind==="interface"}}}),wo=le({"src/lib/decompose.js"(d,t){var e=Le();function s(c){return e(c)&&c.meta.kind==="subtype"}function n(c){return s(c)?[c.meta.predicate].concat(n(c.meta.type)):[]}function o(c){return s(c)?o(c.meta.type):c}function l(c){return{predicates:n(c),unrefinedType:o(c)}}t.exports=l}}),nr=le({"src/lib/extend.js"(d,t){var e=Ae(),s=Ye(),n=ot(),o=cn(),l=vo(),c=_o(),m=it(),f=dn(),p=wo();function a(E,O,T){var D=E.reduce(function(S,A){return f(S,A)},O);return T&&(D.displayName=T,D.meta.name=T),D}function b(E){return m(E)?E:E.meta.props}function y(E){return m(E)?null:E.meta.defaultProps}function v(E,O){Array.prototype.push.apply(E,O)}function x(E,O,T){var D={},S={},A=[],w={};O.forEach(function(C,g){var M=p(C),L=M.unrefinedType;v(A,M.predicates),o(D,b(L)),o(S,L.prototype),o(w,y(L),!0)}),T=E.getOptions(T),T.defaultProps=o(w,T.defaultProps,!0);var u=a(A,E(D,{strict:T.strict,defaultProps:T.defaultProps}),T.name);return o(u.prototype,S),u}t.exports=x}}),So=le({"src/lib/struct.js"(d,t){var e=Ae(),s=Qe(),n=ln(),o=Kt(),l=Wt(),c=it(),m=Xe(),f=at(),p=Be(),a=un(),b=tr(),y=nr();function v(T){return"Struct"+b(T)}function x(T,D){return y(O,T,D)}function E(T){return c(T)||(T=m(T)?{}:{name:T}),T.hasOwnProperty("strict")||(T.strict=O.strict),T.hasOwnProperty("defaultProps")||(T.defaultProps={}),T}function O(T,D){D=E(D);var S=D.name,A=D.strict,w=D.defaultProps,u=S||v(T);function C(g,M){if(C.is(g))return g;if(!(this instanceof C))return new C(g,M);for(var L in T)if(T.hasOwnProperty(L)){var k=T[L],N=g[L];N===void 0&&(N=w[L]),this[L]=f(k,N,null)}}return C.meta={kind:"struct",props:T,name:S,identity:!1,strict:A,defaultProps:w},C.displayName=u,C.is=function(g){return g instanceof C},C.update=function(g,M){return new C(e.update(g,M))},C.extend=function(g,M){return x([C].concat(g),M)},C}O.strict=!1,O.getOptions=E,O.getDefaultName=v,O.extend=x,t.exports=O}}),rr=le({"src/lib/tuple.js"(d,t){var e=Ae(),s=Qe(),n=Ye(),o=Be(),l=st(),c=ot(),m=at(),f=dt();function p(b){return"["+b.map(o).join(", ")+"]"}function a(b,y){var v=y||p(b),x=b.every(l);function E(O,T){if(x)return O;for(var D=!0,S=[],A=0,w=b.length;A<w;A++){var u=b[A],C=O[A],g=m(u,C,null);D=D&&C===g,S.push(g)}return D&&(S=O),S}return E.meta={kind:"tuple",types:b,name:y,identity:x},E.displayName=v,E.is=function(O){return c(O)&&O.length===b.length&&b.every(function(T,D){return f(O[D],T)})},E.update=function(O,T){return E(e.update(O,T))},E}a.getDefaultName=p,t.exports=a}}),Ao=le({"src/lib/union.js"(d,t){var e=Ae(),s=Qe(),n=Ye(),o=Be(),l=st(),c=ot(),m=at(),f=dt(),p=Rt(),a=Xn(),b=Xe();function y(x){return x.map(o).join(" | ")}function v(x,E){var O=E||y(x),T=x.every(l);function D(S,A){if(T)return S;var w=D.dispatch(S);return!w&&D.is(S)?S:m(w,S,A)}return D.meta={kind:"union",types:x,name:E,identity:T},D.displayName=O,D.is=function(S){return x.some(function(A){return f(S,A)})},D.dispatch=function(S){for(var A=0,w=x.length;A<w;A++){var u=x[A];if(a(u)){var C=u.dispatch(S);if(!b(C))return C}else if(f(S,u))return u}},D.update=function(S,A){return D(e.update(S,A))},D}v.getDefaultName=y,t.exports=v}}),Eo=le({"src/lib/func.js"(d,t){var e=Ae(),s=Qe(),n=Kt(),o=ot(),l=er(),c=it(),m=at(),f=Xe(),p=Wt(),a=rr(),b=Ft(),y=Be(),v=Le();function x(D,S){return"("+D.map(y).join(", ")+") => "+y(S)}function E(D){return n.is(D)&&c(D.instrumentation)}function O(D){for(var S=D.length,A=!1,w=S-1;w>=0;w--){var u=D[w];if(!v(u)||u.meta.kind!=="maybe")return w+1;A=!0}return A?0:S}function T(D,S,A){D=o(D)?D:[D];var w=A||x(D,S),u=D.length,C=O(D);function g(M,L){return E(M)?M:g.of(M)}return g.meta={kind:"func",domain:D,codomain:S,name:A,identity:!0},g.displayName=w,g.is=function(M){return E(M)&&M.instrumentation.domain.length===u&&M.instrumentation.domain.every(function(L,k){return L===D[k]})&&M.instrumentation.codomain===S},g.of=function(M,L){if(g.is(M))return M;function k(){var N=Array.prototype.slice.call(arguments),I=N.length;if(!1)var $;if(L&&I<u){var P=Function.prototype.bind.apply(M,[this].concat(N)),U=T(D.slice(I),S);return U.of(P,!0)}else return m(S,M.apply(this,N))}return k.instrumentation={domain:D,codomain:S,f:M},k.displayName=b(M),k},g}T.getDefaultName=x,T.getOptionalArgumentsIndex=O,t.exports=T}}),xo=le({"src/lib/intersection.js"(d,t){var e=Ae(),s=Qe(),n=Ye(),o=ot(),l=st(),c=dt(),m=Be(),f=st();function p(b){return b.map(m).join(" & ")}function a(b,y){var v=y||p(b),x=b.every(f);function E(O,T){return O}return E.meta={kind:"intersection",types:b,name:y,identity:x},E.displayName=v,E.is=function(O){return b.every(function(T){return c(O,T)})},E.update=function(O,T){return E(e.update(O,T))},E}a.getDefaultName=p,t.exports=a}}),or=le({"src/lib/assign.js"(d,t){function e(s,n){for(var o in n)n.hasOwnProperty(o)&&(s[o]=n[o]);return s}t.exports=e}}),Co=le({"src/lib/interface.js"(d,t){var e=Ae(),s=Qe(),n=ln(),o=Kt(),l=Wt(),c=it(),m=Xe(),f=at(),p=Be(),a=un(),b=tr(),y=st(),v=dt(),x=nr(),E=or();function O(S,A){return x(D,S,A)}function T(S){return c(S)||(S=m(S)?{}:{name:S}),S.hasOwnProperty("strict")||(S.strict=D.strict),S}function D(S,A){A=T(A);var w=A.name,u=A.strict,C=w||b(S),g=Object.keys(S).map(function(L){return S[L]}).every(y);function M(L,k){if(g)return L;if(!1&&u)for(var N in L);var I=!0,$=g?{}:E({},L);for(var P in S){var U=S[P],F=L[P],R=f(U,F,null);I=I&&F===R,$[P]=R}return I&&($=L),$}return M.meta={kind:"interface",props:S,name:w,identity:g,strict:u},M.displayName=C,M.is=function(L){if(m(L))return!1;if(u){for(var k in L)if(!S.hasOwnProperty(k))return!1}for(var N in S)if(!v(L[N],S[N]))return!1;return!0},M.update=function(L,k){return M(e.update(L,k))},M.extend=function(L,k){return O([M].concat(L),k)},M}D.strict=!1,D.getOptions=T,D.getDefaultName=b,D.extend=O,t.exports=D}}),To=le({"src/lib/update.js"(d,t){var e=Ae(),s=it(),n=Ye(),o=ot(),l=an(),c=or();function m(S){return s(S)?S instanceof Date||S instanceof RegExp?S:c({},S):o(S)?S.concat():S}function f(S){return a.commands.hasOwnProperty(S)}function p(S){return a.commands[S]}function a(S,A){var w=S,u=!1,C;for(var g in A)A.hasOwnProperty(g)&&(f(g)?(C=p(g)(A[g],w),C!==S?(u=!0,w=C):w=S):(w===S&&(w=m(S)),C=a(w[g],A[g]),u=u||C!==w[g],w[g]=C));return u?w:S}function b(S,A){return S(A)}function y(S,A){return S.length>0?A.concat(S):A}function v(S,A){if(S.length>0){A=m(A);for(var w=0,u=S.length;w<u;w++)delete A[S[w]]}return A}function x(S){return S}function E(S,A){return S.length>0?(A=m(A),S.reduce(function(w,u){return w.splice.apply(w,u),w},A)):A}function O(S,A){if(S.from!==S.to){A=m(A);var w=A[S.to];A[S.to]=A[S.from],A[S.from]=w}return A}function T(S,A){return S.length>0?S.concat(A):A}function D(S,A){var w=!1,u=m(A);for(var C in S)S.hasOwnProperty(C)&&(u[C]=S[C],w=w||u[C]!==A[C]);return w?u:A}a.commands={$apply:b,$push:y,$remove:v,$set:x,$splice:E,$swap:O,$unshift:T,$merge:D},t.exports=a}}),Do=le({"src/lib/match.js"(d,t){var e=Ae(),s=Ye(),n=Le(),o=sn();t.exports=function(c){for(var m,f,p,a,b=1,y=arguments.length;b<y;)if(m=arguments[b],f=arguments[b+1],p=arguments[b+2],s(p)&&!n(p)?b=b+3:(p=f,f=o.is,b=b+2),m.is(c)&&f(c))return p(c);e.fail("Match error")}}}),Oo=le({"src/index.js"(d,t){var e=Ae();e.Any=sn(),e.Array=ao(),e.Boolean=Kn(),e.Date=lo(),e.Error=uo(),e.Function=Kt(),e.Nil=Jn(),e.Number=Zn(),e.Integer=co(),e.IntegerT=e.Integer,e.Object=fo(),e.RegExp=po(),e.String=ln(),e.Type=mo(),e.TypeT=e.Type,e.Arr=e.Array,e.Bool=e.Boolean,e.Dat=e.Date,e.Err=e.Error,e.Func=e.Function,e.Num=e.Number,e.Obj=e.Object,e.Re=e.RegExp,e.Str=e.String,e.dict=un(),e.declare=ho(),e.enums=go(),e.irreducible=He(),e.list=er(),e.maybe=bo(),e.refinement=dn(),e.struct=So(),e.tuple=rr(),e.union=Ao(),e.func=Eo(),e.intersection=xo(),e.subtype=e.refinement,e.inter=Co(),e.interface=e.inter,e.assert=e,e.update=To(),e.mixin=cn(),e.isType=Le(),e.is=dt(),e.getTypeName=Be(),e.match=Do(),t.exports=e}}),De=Oo();var Mo=De.struct({id:De.String,fullname:De.String,path:De.String,funding:De.String,created:De.String},"StudentData"),ge=class{static modifyFunding(t,e,s){typeof e=="string"&&(e=dayjs(e)),pe(created instanceof dayjs,"modifyFunding date must be a string, a dayjs instance or null.",TypeError);let n=ge.getFunding(t,e);if(s.toLower()===n.toLower()){console.log(`%cFundingMode ${s} is identical as current: ${sCurrent}, nothing to do`,B);return}(s!==Ze||s!=je||s!==ht)&&console.log(`%cWarning this state is unknown ${s}`,Ge);let o=K.Cfg.dbase,l=dayjs().format("YYYY-MM-DDTHH:mm:ssZZ");if(e===null&&(e=l),oLastHistory=Ve.find(t,Ve.getType("FUNDING"),e),o.get(ge.tbl_name).find({id:t}).assign({funding:s}).write(),Ve.addFunding(t,n,l),e.isSameOrAfter(Ce.getOldModeDate()))var c=o.get("sessions").filter(function(f){return f.who_id===t&&dayjs(f.when).isSameOrAfter(e,"day")});else var c=o.get("sessions").filter(function(p){p.who_id===t&&dayjs(p.when).isSameOrAfter(Ce.getOldModeDate(),"day")});for(var m=c.value().length;m-=1;)console.log(`There is ${m} elements left to update`,B),c.get(m).assign({funding:s}).write()}},we=ge;G(we,"tbl_name","students"),G(we,"ocmapper",async function(t){let e=!1;try{let s=await ge.getFundingFomDashboard(t.id);e===!0&&console.log("%cocmapper() funding is %o",B,s);let n=t.id.toString(10),o=t.displayName,l=t.followedLearningPath.learningPathTitle,c;l.length==0?c="non d\xE9fini":c=l;let m=s.toLowerCase(),f=dayjs().format("YYYY-MM-DDTHH:mm:ssZ[Z]");return Mo({id:n,fullname:o,path:c,funding:m,created:f})}catch(s){console.error("%c,IRRECOVERABLE ERROR in StudentData.ocmapper: %o",me,s)}}),G(we,"add",function(t,e="noname",s="nopath",n="unknown",o){let l=K.Cfg.dbase;var c=dayjs().format("YYYY-MM-DDTHH:mm:ssZ[Z]");let m={id:t,fullname:e,path:s,funding:n,created:c};ge._save(m)}),G(we,"_checkObject",function(t){!1===!0&&console.log("%cChecking object student:%o ",B,t),pe(typeof t.id=="string","Student object id need to be a string.",TypeError),pe(typeof t.fullname=="string","Student object fullname need to be a number.",TypeError),pe(typeof t.path=="string","Student object path need to be a string.",TypeError),pe(typeof t.funding=="string","Student object funding need to be a string.",TypeError),pe(typeof t.created=="string","Student object created need to be a string.",TypeError)}),G(we,"_save",function(t){let e=!1;ge._checkObject(t),e===!0&&console.log("%cSaving student %o to DB",B,t),K.Cfg.dbase.get(ge.tbl_name).push(JSON.parse(JSON.stringify(t))).write()}),G(we,"exists",function(t,e=null){let s=!1,n=ge.findById(t,e);return s===!0&&console.log(`%cStudent ${t} exists in db ? ${n!==void 0}`,B),n!==void 0}),G(we,"findById",function(t,e=null){let s=GM_config.get("use_student_cache");if(s===!1&&console.log("%cache \xE9tudiant desactiv\xE9 dans les options",B),typeof t=="number"&&(t=t.toString(10)),pe(typeof t=="string","You must provide a string.",TypeError),typeof e=="string"&&(e=dayjs(e)),e==null)return s===!1?ge._findById(t,e):ge.m_findById(t,"null");let n;return s===!1?(console.log("%cfindById() (without cache) searching student %s at date %s",B,t,e.toISOString()),n=ge._findById(t,e.toISOString()),console.log("%cfindById() (without cache) found student %o",B,n)):(console.log("%cfindById() (with cache) searching student %s at date %s",B,t,e.toISOString()),n=ge.m_findById(t,e.toISOString()),console.log("%cfindById() (with cache) found student %o",B,n)),n}),G(we,"_findById",function(t,e=null){let s=!1,n=K.Cfg.dbase;typeof e=="string"&&(e=dayjs(e)),s===!0&&console.log(`%c_findById() searching student with id:(${typeof t})${t} in db`,B);var o=n.get(ge.tbl_name).find({id:t}).value();if(s===!0&&console.log("%c_findById() searching student:%s (date not used at this stade of process) in db result in :%o",B,t,o),o!==void 0){if(e!==null){var l={...o},c=Ve.find(t,Ve.getType("FUNDING"),e);c!==void 0&&(l.funding=c.value);var m=Ve.find(t,Ve.getType("PATH"),e);return m!==void 0&&(l.path=m.value),l}return s===!0&&console.log("%c_findById() student final %o is found",B,o),o}}),G(we,"m_findById",moize.default(ge._findById,{maxAge:6e5,isSerialized:!0})),G(we,"findByFullName",function(t){let e=GM_config.get("use_student_cache");return e===!1&&console.log("%cache \xE9tudiant desactiv\xE9 dans les options",B),pe(typeof t=="string","You must provide a string.",TypeError),e===!1?ge._findByFullName(t):ge.m_findByFullName(t)}),G(we,"_findByFullName",function(t){let e=!1,s=K.Cfg.dbase;e===!0&&console.log(`%c[_findByFullName()] searching student with name:(${typeof t})${t} in db`,B);var n=s.get(ge.tbl_name).find({fullname:t}).value();if(e===!0&&console.log("%c[_findByFullName()] student %o is found",B,n),n!==void 0)return n}),G(we,"m_findByFullName",moize.default(ge._findByFullName,{maxAge:6e5,isSerialized:!0})),G(we,"getFunding",async function(t,e=null){return typeof e=="string"&&(e=dayjs(e)),await ge.m_getFunding(t,e)}),G(we,"_getFunding",async function(t,e=null){let s=ge.findById(t,e);return s===void 0?(console.log('%c[Student._getFunding()]Student %s is not in db, fetching data:"funded mode" from webpage',B,t),s=await ge.getFundingFomDashboard(t),console.log("%c[Student._getFunding()]Student %s funding is %o",B,t,s),s.toLowerCase()):s.funding.toLowerCase()}),G(we,"m_getFunding",moize.default(ge._getFunding,{maxAge:6e5,isSerialized:!0,isPromise:!0})),G(we,"isAutoFunded",function(t){return console.log("%cFUNCTION DEPRECATED !!!!!!!!!!!!!!!!!!!!!! ",me),ge.getFunded(t).toLowerCase()===Ze}),G(we,"getFundingFomDashboard",async function(t){let e=await Qt(`https://openclassrooms.com/fr/mentorship/students/${t}/dashboard`,"JSON:studentDetailsConfiguration:configStudent.isFinancialAidStudent:PAS DE MODE DE FINANCEMENT");if(e===null)throw console.error("%c[Student.getFundingFomDashboard()]Student probleme with css path ui have changed since last version",me),new Error("Application need an update, UI Change please post a ticket on github");return e===!0?je:Ze}),G(we,"getPath",async function(t,e=null){let s=ge.findById(t,e);if(s==null){console.log(`%cStudent ${t} is not in db, fetching data: 'path' from webpage ....`,B);let n=await Qt(`https://openclassrooms.com/fr/mentorship/students/${t}/dashboard`,"a[href*='paths/']");return n.innerText.length==0&&console.error(`%cStudent path is not readable from url : https://openclassrooms.com/fr/mentorship/students/${t}/dashboard`,me),n.innerText.trim()}else return s.path}),G(we,"delete",function(t=null,e=null){let s=K.Cfg.dbase;if(typeof t=="string"&&(t=t.format("YYYY-MM-DD")),typeof e=="string"&&(e=e.format("YYYY-MM-DD")),t===null&&e==null){console.log("%cWanna suppress ALL Students from DB",B),s.get(ge.tbl_name).remove().write();return}if(e==null){s.get(ge.tbl_name).remove(function(n){return dayjs(n.created,"YYYY-MM-DDTHH:mm:ssZ[Z]").isBefore(e,"day")}).write();return}if(t==null){s.get(ge.tbl_name).remove(function(n){return dayjs(n.created,"YYYY-MM-DDTHH:mm:ssZ[Z]").isAfter(t,"day")}).write();return}s.get(ge.tbl_name).remove(function(n){return dayjs(n.created,"YYYY-MM-DDTHH:mm:ssZ[Z]").isBetween(t,e,"day","[]")}).write()}),G(we,"deleteById",function(t,e=null){K.Cfg.dbase.get("students").remove(n=>n.id===t).write(),console.log(`%cAll students with id:${t} are removed from DataBase`,B)}),G(we,"getAll",async(t,e)=>{let s=!1;var n=!1;let o=K.Cfg.dbase;var l="table.crud-list tbody";s===!0&&console.log("%c[getAll()] Enter function",B);let c=await It.getUserStudents();var m=JSON.parse(c);s===!0&&console.log("%cgetAll() collect this array of stundent %o",B,m);let f=dayjs().format("YYYY-MM-DDTHH:mm:ssZ[Z]");var p=performance.now();await ge.ocmapper(m[0]),s===!0&&console.log(`%cEstimated time for updating : ${(performance.now()-p)*m.length} ms`,B),Swal.fire({position:"top-end",icon:"info",toast:!0,title:`mise \xE0 jour de la base de donn\xE9e des \xE9tudiants...
cela peut prendre du temps ~ ${(performance.now()-p)*m.length/1e3} s`,showConfirmButton:!1,timer:1e3}),await Ke(1e3),s===!0&&console.log("%cWill process all students of board",B);for(let b of m){let y=await ge.ocmapper(b);s===!0&&console.log('%c Working on student "%s"',B,y.fullname),Mt(`Collecte les donn\xE9es de l'\xE9tudiant : ${y.fullname}`);var a=ge.m_findById(y.id,null);if(a===void 0){s===!0&&console.log(`%cStudent ${y.fullname} (id:${y.id}) not present in student database will create it`,B),ge.add(y.id,y.fullname,y.path,y.funding,y.created);continue}y.funding.toLowerCase()!==a.funding.toLowerCase()&&(o.get(ge.tbl_name).find({id:y.id}).assign({funding:y.funding}).write(),Ve.addFunding(y.id,a.funding,dayjs()),console.log(`%c[Student.getAll]Student ${y.fullname}(id:${y.id}) was already present in database but change of funding was detected (from ${a.funding.toLowerCase()} to ${y.funding.toLowerCase()})`,B)),y.path!==a.path&&(o.get(ge.tbl_name).find({id:y.id}).assign({path:y.path}).write(),Ve.addPath(y.id,a.path,dayjs()),console.log(`%c[Student.getAll]Student ${y.fullname}(id:${y.id}) was already present in database but change of path was detected (from ${a.path} to ${y.path})`,B))}moize.default.isMoized(ge.m_findById)&&ge.m_findById.clear(),moize.default.isMoized(ge.m_findByFullName)&&ge.m_findByFullName.clear(),moize.default.isMoized(ge.m_getFunding)&&ge.m_getFunding.clear(),console.log("%c[Student.getAll]Student cache cleared",B)}),G(we,"showList",function(){let e=K.Cfg.dbase.get(ge.tbl_name).value();var s="";s+="<table>",s+="<caption>Liste des \xE9tudiant</caption>",s+="<thead>",s+="<tr>",s+="<th>Nom</th><th>Parcours</th><th>Financement</th><th>Date de cr\xE9ation</th><th>Edition</th>",s+="</tr>",s+="</thead>",s+="<tbody>";for(var n in e)s+="<tr>",s+=`<td>${e[n].fullname}</td><td>${e[n].path}</td><td>${e[n].funding}</td>`,s+=`<td>${dayjs(e[n].created,"YYYY-MM-DDTHH:mm:ssZ[Z]").format("DD/MM/YYYY \xE0 HH:mm")}</td>`,s+=`<td><a href="https://openclassrooms.com/fr/mentorship/students/${e[n].id}/dashboard">${e[n].id}</a></td>`,s+="</tr>";s+="</tbody>",s+="</table>",Swal.fire({title:"<strong>Liste des Etudiants</strong>",icon:"info",html:s,showCloseButton:!0,focusConfirm:!1,position:"top-start",grow:"fullscreen",onOpen:o=>{var l=o.querySelector("table"),c=new simpleDatatables.DataTable(l)}})}),G(we,"createManually",async function(t,e,s){let n=["non pr\xE9sent dans la liste","Chef de projet digital","Chef de projet SI","D\xE9veloppeur d'application - Frontend","D\xE9veloppeur Web","Expert en strat\xE9gie marketing et communication ","Production de contenu web avec CMS et Content Marketing ","Tech lead"];var o="";o+="<style>",o+="form {display: grid;padding: 1em;background: #f9f9f9;border: 1px solid #c1c1c1;margin: 2rem auto 0 auto;max-width: 600px;padding: 1em;}",o+="form input {background: #fff;border: 1px solid #9c9c9c;}",o+="form button {background: lightgrey;padding: 0.7em;width: 100%;border: 0;}",o+="form button:hover {background: gold;}",o+="form label {padding: 0.5em 0.5em 0.5em 0;}",o+="form input {padding: 0.7em;margin-bottom: 0.5rem;}",o+="form input:focus {outline: 3px solid gold;}",o+="@media (min-width: 400px) {form {grid-template-columns: 200px 1fr;grid-gap: 16px;}label {text-align: right;grid-column: 1 / 2;}input,button {grid-column: 2 / 3;}}",o+="</style>",o+='<form class="form1" action="">',o+='<label for="student_id" class="name">Reference</label>',o+='<input id="student_id" type="text" value="'+t+'">',o+='<label for="student_name" class="name">Name</label>',o+='<input id="student_name" type="text" value="'+e+'">',o+='<label for="funding">Autofinanc\xE9</label>',o+='<input id="funding" type="checkbox" value="autofunded">',o+='<label for="student_path">Parcours</label>',o+='<input id="student_path" name="student_path" type="text" list="student_path-list">',o+='<datalist id="student_path-list">';for(var l in n)o+=`<option>${n[l]}</option>`;o+="/<datalist>",o+='<label for="session_date">Date</label>',o+='<input id="session_date" type="date" max="2030-12-31" min="2010-12-31" value="'+dayjs(s).format("YYYY-MM-DD")+'">',o+="</form>";let{value:c}=await Swal.fire({title:"<strong>Ajout d'un \xE9tudiant en mode manuel</strong>",icon:"info",html:o,showCloseButton:!0,focusConfirm:!1,position:"top-start",grow:"row",footer:`votre \xE9tudiant(e) ${e} n'a pas \xE9t\xE9 trouv\xE9`,preConfirm:()=>({student_id:document.getElementById("student_id").value,student_name:document.getElementById("student_name").value,student_path:document.getElementById("student_path").value,student_funding:document.getElementById("funding").checked,session_date:document.getElementById("session_date").value})});if(c&&c.hasOwnProperty("student_id")){var m="";c.student_funding===!0?m=Ze:m=je,ge.add(c.student_id,c.student_name,c.student_path,m,c.session_date)}});var _e=we;var Io=function(){let d="refs",t=0,e=1,s=2,n={DEFAULT:0,SESSIONID_DATEREFID:1},o=function(){K.Cfg.dbase.get("refs").value()===void 0&&(console.log("%cDb dont' contain ref table create it",B),K.Cfg.dbase.assign({refs:[]}).write())},l=function(b,y,v=n.DEFAULT){let x=K.Cfg.dbase;var E=dayjs().format("YYYY-MM-DDTHH:mm:ssZ[Z]");let T=c({key1:b,key2:y,type:v,created:E,updated:E});zn(50),pe(Array.isArray(T)&&T.length>0,"Database insertion fail")},c=function(b){return K.Cfg.dbase.get(At.tbl_name).push(JSON.parse(JSON.stringify(b))).write()};return Object.freeze({tbl_name:d,TYPE:n,add:l,updKey1:function(b,y,v=n.DEFAULT){let x=K.Cfg.dbase,E;E=x.get(At.tbl_name).find(O=>O.key2===b&&O.type===v).assign({key1:y}).write(),console.log("%cNeedle  %o mValue %o sType %o",B,b,y,v),console.log("%c_r %o",B,E),pe(Array.isArray(E)&&E.length>0,"Database insertion fail")},updKey2:function(b,y,v=n.DEFAULT){let x=K.Cfg.dbase,E;E=x.get(At.tbl_name).find(O=>O.key1===b&&O.type===v).assign({key2:y}).write(),console.log("%cNeedle  %o mValue %o sType %o",B,b,y,v),console.log("%c_r %o",B,E),pe(Array.isArray(E)&&E.length>0,"Database insertion fail")},checkSupport:o,exists:function(b,y,v=n.DEFAULT){let x=At.getByKey(b,y,v);return console.log(`%cRef ${b} exists in db ? ${x!==void 0}`,B),x!==void 0},getByKey:function(b,y=1,v=n.DEFAULT){pe(typeof y=="number","You must provide a number as index of key.",TypeError);let x=K.Cfg.dbase,E=null;if(y==1&&(E=x.get(At.tbl_name).find(O=>O.key1===b&&O.type===v).value()),y==2&&(E=x.get(At.tbl_name).find(O=>O.key2===b&&O.type===v).value()),E!=null)return E}})},At=Io(),Me=At;var No=function(){let d="meta",t=function(f){return pe(typeof f=="string","You must provide a string.",TypeError),K.Cfg.dbase.get(Ht.tbl_name).find({key:"dbVersion"}).assign({value:f}).write().value},e=function(){let f=K.Cfg.dbase.get(Ht.tbl_name).find({key:"dbVersion"}).value();return typeof f=="undefined"?-1:f.value},s=function(){return K.Cfg.dbase.get("meta").remove(f=>!0).write()},n=function(){return console.log("%c resetDbVersion NE FONCTIONNE PAS",me),K.Cfg.dbase.get("meta").find({key:"dbVersion"}).remove(f=>!0).write()},o=function(f){return pe(typeof f=="string","You must provide a string.",TypeError),K.Cfg.dbase.get(Ht.tbl_name).find({key:"studentLstUpd"}).assign({value:f}).write().value},l=function(){let f=K.Cfg.dbase.get(Ht.tbl_name).find({key:"studentLstUpd"}).value();return typeof f=="undefined"?-1:f.value};return Object.freeze({checkSupport:function(){K.Cfg.dbase.get("meta").value()===void 0&&(console.log("%cDb dont' contain meta table create it",B),K.Cfg.dbase.assign({meta:[]}).write()),e()==-1&&K.Cfg.dbase.get("meta").push({key:"dbVersion",value:"1.0.0"}).write(),l()==-1&&K.Cfg.dbase.get("meta").push({key:"studentLstUpd",value:dayjs("19701006").toISOString()}).write()},getDbVersion:e,setDbVersion:t,delDbVersion:n,setStudentListUpd:o,getStudentListUpd:l,remStudentListUpd:function(){return o(dayjs("19701006").toISOString())},tbl_name:d})},Ht=No(),ke=Ht;var lt=function(){let t="history_session_cache",e=!1,s=function(){e===!0&&console.log("%cDb dont' contain table history_session_cache table, will create it",B),K.Cfg.dbase.assign({history_session_cache:[]}).write()},n=function(){return K.Cfg.dbase.get(t).value()!==void 0};return{find:function(a){if(n===!1)throw new Error("%c_HistoryDb:DBFindInTable() failed reason : table is not defined",B);return e===!0&&console.log('%c_HistoryDb:DBFindInTable()  Request is App.Cfg.dbase.get("%s").find(%o).value()',B,t,a),K.Cfg.dbase.get(t).find(a).value()},getAll:function(){if(n===!1)throw new Error("%c_HistoryDb:DBGetAll() failed reason : table is not defined",B);return e===!0&&console.log('%c_HistoryDb:DBGetAll()  Request is App.Cfg.dbase.get("%s").value()',B,t),K.Cfg.dbase.get(t).value()},insert:function(a){return n===!1&&s(),e===!0&&console.log("%c_HistoryDb:DBInsertInTable table:%s data:%o)",B,t,a),K.Cfg.dbase.get(t).push(a).write()},remove:function(a={}){if(n===!1)throw new Error("%c_HistoryDb:DBRemove() failed reason : table is not defined",B);return e===!0&&console.log("%c_HistoryDb:DBRemove with filter",B),Qn(a)===!0&&console.log("%c_HistoryDb:DBRemove /! filter is empty",B),K.Cfg.dbase.get(t).remove(a).write()},reset:function(){return e===!0&&console.log("%c_History:DBResetTable",B),K.Cfg.dbase.get(t).remove().write()},update:function(a,b){if(n===!1)throw new Error("%c_HistoryDb:DBUpdateInTable() failed reason : table is not defined",B);return K.Cfg.dbase.get(t).find(a).assign(b).write()}}}(),jo=function(){let d="history_session_cache",t={VERBOSE:!1,DEBUG:!1},e=function(){let p=t.DEBUG;K.Cfg.dbase.get("history_session_cache").value()===void 0&&(p&&console.log("%cDb dont' contain history_session_cache table create it",B),K.Cfg.dbase.assign({history_session_cache:[]}).write())},s=function(p){let a=t.DEBUG;typeof p=="string"&&(p=dayjs(p)),pe(p instanceof dayjs,"date must be a string or a dayjs object.",TypeError);let b=lt.find({id:+p.format("YYYYMMDD")});return a&&console.log(`%cHistory:_exists ${p.format("YYYYMMDD")} in db ? ${b!==void 0}`,B),b!==void 0},n=function(p){let a=t.DEBUG;if(typeof p=="string"&&(p=dayjs(p)),pe(p instanceof dayjs,"date must be a string or a dayjs object.",TypeError),p.get("day")<p.daysInMonth()&&(p=p.endOf("month")),a===!0&&console.log(`%cSearch in history session cache data for id: ${p.format("DD/MM/YYYY")}`,B),s(p)===!0){if(_r=lt.find({id:+p.format("YYYYMMDD")}),typeof _r.index!==void 0)return _r.index;throw new Error("_getSessionIndex() failed reason : property index is unknown")}return-1},o=function(p){let a=t.DEBUG;typeof p=="string"&&(p=dayjs(p)),pe(p instanceof dayjs,"date must be a string or a dayjs object.",TypeError),a===!0&&console.log(`%cSearch in history session cache NEAREST cached data for id: ${p.format("DD/MM/YYYY")}`,B);let b=+p.format("YYYYMMDD"),y=lt.getAll();if(y.length===0)return a===!0&&console.log("%cHistory session cache is empty",B),-1;y=y.map(E=>+E.id-b).filter(E=>E>0);let v=E=>Math.min(...E);if(y.length==0)return a===!0&&console.log("%cAll indexes  %o are later than your date:%s",B,lt.getAll(),p.format("DD/MM/YYYY")),-1;let x=v(y)+b;if(a===!0&&console.log("%cNearest data in history session cache is data with id: %o",B,x),s(x)===!0){if(y=lt.find({id:+x.format("YYYYMMDD")}),typeof y.index!==void 0)return y.index;throw new Error("[History._getNearestSessionIndex()] failed reason : property index is unknown")}return-1},l=function(p){let a=n(p);return a===-1&&(a=o(p)),a},c=function(p=null,a=null){let b=t.VERBOSE;typeof p=="string"&&(p=dayjs(p)),typeof a=="string"&&(a=dayjs(a)),p===null&&a===null&&(b===!0&&console.info("%c%s%c Reset all data",kt,"Historyremove()",""),m());let y=function(){};return p!==null&&a!==null&&(b===!0&&console.info("%c%s%c remove data from %s to %s",kt,"Historyremove()","",p.format("DD/MM/YYYY"),a.format("DD/MM/YYYY")),y=function(v){return dayjs(v.id.toString(10)).isBetween(p,a,"day","[]")}),p==null&&a!==null&&(b===!0&&console.info("%c%s%c remove all data until %s",kt,"Historyremove()","",a.format("DD/MM/YYYY")),y=function(v){return dayjs(v.id.toString(10)).isBefore(a,"day")}),p!=null&&a==null&&(b===!0&&console.info("%c%s%c remove all data since %s",kt,"Historyremove()","",p.format("DD/MM/YYYY")),y=function(v){return dayjs(v.id.toString(10)).isAfter(p,"day")}),lt.remove(y)},m=function(){return lt.reset()};return Object.freeze({tbl_name:d,getSameOrNearestSessionIndex:l,remove:c,reset:m,setSessionIndex:function(p,a=0){let b=t.DEBUG;typeof p=="string"&&(p=dayjs(p)),pe(p instanceof dayjs,"date must be a string or a dayjs object.",TypeError),p.get("day")<p.daysInMonth()&&(p=p.endOf("month"));let y=n(p);return y==-1?y=lt.insert({id:+p.format("YYYYMMDD"),index:a}):y=lt.update({id:+p.format("YYYYMMDD")},{index:a}),y}})},Bo=jo(),Et=Bo;var ko=De.struct({id:De.String,cid:De.maybe(De.Integer),who_id:De.String,who_name:De.String,type:De.String,lvl:De.Integer,when:De.Date,path:De.String,funding:De.String},"SessionData");ko.prototype.ocmapper=function(d){};var Ee=class{static getBetween(t,e){return typeof t=="string"&&(t=dayjs(t)),typeof e=="string"&&(t=dayjs(e)),K.Cfg.dbase.get(Ee.tbl_name).filter(o=>dayjs(o.when).isSameOrBefore(e,"day")&&dayjs(o.when).isSameOrAfter(t,"day")).value()}},$e=Ee;G($e,"tbl_name","sessions"),G($e,"_checkObject",function(t){!1===!0&&console.log("%cChecking object session:%o ",B,t),pe(typeof t.id=="string","Session object id need to be a string.",TypeError),pe(typeof t.cid=="number","Session object cid need to be a number.",TypeError),pe(typeof t.who_id=="string","Session object who_id need to be a string.",TypeError),pe(typeof t.who_name=="string","Session object who_name need to be a string.",TypeError),pe(typeof t.status=="string","Session object status need to be a string.",TypeError),pe(typeof t.type=="string","Session object type need to be a string.",TypeError),pe(typeof t.lvl=="string","Session object lvl need to be a string.",TypeError),pe(typeof t.when=="string","Session object when need to be a string.",TypeError),pe(typeof t.path=="string","Session object path need to be a string.",TypeError),pe(typeof t.funding=="string","Session object funding need to be a string.",TypeError)}),G($e,"add",async function(t){let e=30,s=!1,n=!1;n===!0&&console.log("%c[Session.add()].................................. Start",B),n===!0&&console.log("%cSession.add() so you wanna add a session %o to database",B,t);let o=K.Cfg.dbase;if(GM_config.get("checksessionalreadyexists")===!0&&(s=!0),n===!0&&console.log("%cSession.add() will search if session %o is already in database",B,t),t.id.length>0){if(s===!0&&Ee.exists(t.id)===!0){n===!0&&console.info(`%cSession.add() session id:${t.id} already present in database table sessions, skip it!`,B);return}}else if(s===!0&&Ee.exists(t.cid)===!0){n===!0&&console.info(`%cSession.add() session cid:${t.cid} already present in database table sessions, skip it!`,B);return}s===!1&&n===!0&&console.info("%cSession.add() you have choose not to verify if session exist in database before adding it so !",B),t.type.toLowerCase()==="presentation"&&(t.type="soutenance"),Ce.isInOldMode(dayjs(t.when))?(t.funding=je,t.type.toLowerCase()==="soutenance"?t.path="n/a (defense)":t.path="n/a (old mode)"):t.type.toLowerCase()==="soutenance"?(n===!0&&console.log("%c[Session.add()]This is a defense nothing to do specially for now",B),t.funding=je,t.path="n/a (defense)"):(_e.exists(t.who_id)===!1&&(console.warn("%c[Session.add()]Student %s[%s] not in Db, will updating student db by fetching students list from dashboard",Ge,t.who_name,t.who_id),dayjs(ke.getStudentListUpd()).diff(dayjs(),"m")<-e?(n===!0&&console.log("%c[Session.add()]Last Update of Student BDD was %i min ago which was more than treshold for update:%i, so will start to do a full update of student base",B,dayjs(ke.getStudentListUpd()).diff(dayjs(),"m"),e),await _e.getAll(),n===!0&&console.log("%c[Session.add()]Student database updated set lastupdate value to:%s",B,dayjs().toISOString()),n===!0&&console.log("%c[Session.add()]Delete cache of student",B),ke.setStudentListUpd(dayjs().toISOString())):(console.log("%c[Session.add()]last Update of database DB was less than %i min ago so will not update it",B,e),n===!0&&console.log("%c[Session.add()]student %s[%s] not exists, bd was updated less than %i, i have to manually create student",B,t.who_name,t.who_id,e),await _e.createManually(t.who_id,t.who_name,t.when),moize.default.isMoized(_e.m_findById)&&_e.m_findById.has([t.who_id,null])&&(n===!0&&console.log("%c[Session.add()]student %s[%s] is in cache have to delete it",B,t.who_name,t.who_id),_e.m_findById.remove([t.who_id,null]),n===!0&&console.log("%c[Session.add()]student %s[%s] removed from the m_findById function cache",B,t.who_name,t.who_id))),console.log("%c[Student.add()] pr\xE9c\xE9demment notre \xE9tudiant %s[%s]  n'existait pas existe t'il maintenant ?",B,t.who_name,t.who_id),console.log("%c[Student.add()] la r\xE9ponse est :%o",B,_e.exists(t.who_id,t.when)),_e.exists(t.who_id,t.when)==!1&&(console.warn(`%c[Session.add()] Student ${t.who_name}[${t.who_id}] which exists at ${t.when} still not exit in Db, have to manually create him/her`,Ge),await _e.createManually(t.who_id,t.who_name,t.when),moize.default.isMoized(_e.m_findById)&&_e.m_findById.has([t.who_id,t.when])&&(_e.m_findById.remove([t.who_id,t.when]),n===!0&&console.log("%c[Session.add()]student %s removed from the m_findById function cache",B,t.who_id)))),t.funding=await _e.getFunding(t.who_id,t.when),t.path=await _e.getPath(t.who_id,t.when)),t.cid===void 0&&(n===!0&&console.log("%c[Session.add()] need to calculate a cid]",B),t.cid=Ee.getHashId(t.when,t.who_id)),n===!0&&console.log("%cSession.add() calculated id:%s",B,t.cid),_r=Me.getByKey(t.cid,2,Me.TYPE.SESSIONID_DATEREFID),_r!==void 0&&(n===!0&&console.log("%cSession.add() I've found a ref %d by using key (%s)%d",B,_r.key1,typeof t.cid,t.cid),t.id=_r.key1.toString()),Ee._save(t),n===!0&&console.log("%c[Session.add()].................................. End",B)}),G($e,"_save",function(t){var e=!1;Ee._checkObject(t),t.lvl==""&&(t.lvl="2"),t.lvl.lvl=parseInt(t.lvl.lvl,10),bDebug===!0&&console.log(`%c[Session._save()] saving session id:${t.id} of ${t.who_name}[cid:${t.cid}](${t.who_id}) at ${t.when} to DB`,B),K.Cfg.dbase.get(Ee.tbl_name).push(JSON.parse(JSON.stringify(t))).write()}),G($e,"exists",function(t){let e=K.Cfg.dbase;var s=!1;s===!0&&console.log(`%c[Session.exist()] will search existence of session id:(${typeof t})${t} in database`,B);var n=Ee.findById(t);return n!==void 0}),G($e,"findById",function(t){let e=K.Cfg.dbase;var s=e.get(Ee.tbl_name).find({id:t}).value();return s===void 0&&(s=e.get(Ee.tbl_name).find({cid:t}).value()),s}),G($e,"delete",function(t=null,e=null){let s=K.Cfg.dbase;if(typeof t=="string"&&(t=t.format("YYYY-MM-DD")),typeof e=="string"&&(e=e.format("YYYY-MM-DD")),t===null&&e==null){console.log("%cWanna suppress ALL Sessions from DB",B),s.get(Ee.tbl_name).remove().write();return}if(e==null){s.get(Ee.tbl_name).remove(function(n){return dayjs(n.when).isBefore(e),"day"}).write();return}if(t==null){s.get(Ee.tbl_name).remove(function(n){return dayjs(n.when).isAfter(t,"day")}).write();return}s.get(Ee.tbl_name).remove(function(n){return dayjs(n.when).isBetween(t,e,"day","[]")}).write()}),G($e,"deleteById",function(t){K.Cfg.dbase.get("sessions").remove(s=>s.id===t).write(),console.log(`%cSession ${t} suppressed from DB`,B)}),G($e,"parseTable",function(t){var e=t.children[0].children[0].innerText,s=Dt(t.children[0]),n=t.children[1].children[0].innerText.trim(),o=Dt(t.children[1],-2),l=t.children[2].innerText.trim().toLowerCase(),c=t.children[3].children.length?t.children[3].children[0].innerText.trim().toLowerCase():"session",m=-1;t.children[4].children.length>0&&(m=t.children[4].children[0].innerText.trim()),e=Rn(e);var f={id:s,when:e,who_id:o,who_name:n,status:l,type:c,lvl:m};return f}),G($e,"getHashId",function(t,e){return t instanceof dayjs&&(t=t.toISOString()),typeof e=="number"&&(e=e.toString(10)),pe(typeof t=="string"&&typeof e=="string","getId need two string",TypeError),Gn(t+e)}),G($e,"parseRow",function(t){!0===!0&&console.log("%cparseRow() Row is %o",B,t);var s=t.children[0].innerText.length>0?t.children[0].innerText.trim().toLowerCase():"session",n=t.children[0].querySelector("svg").getAttribute("aria-label").trim().toLowerCase(),o=t.children[1].querySelector("time").dateTime;o=dayjs(o).toISOString();var l=Dt(t.children[2],-2),c=t.children[2].innerText.trim(),m=Ee.getHashId(o,l),f=t.children[3].innerText.trim();f=f.replace(/[^\d]/gmis,"");var p={id:"",cid:m,when:o,who_id:l,who_name:c,status:n,type:s,lvl:f};return p}),G($e,"getSessionsFromAPI",async function(t,e){let s=!1,n=999,o=0,l=!0,c=0,m=20;typeof t=="string"&&(t=dayjs(t)),pe(t instanceof dayjs,"dtFrom must be a string or a dayjs object.",TypeError),typeof e=="string"&&(e=dayjs(e)),pe(e instanceof dayjs,"dtTo must be a string or a dayjs object.",TypeError);let f=Et.getSameOrNearestSessionIndex(e);f!==void 0&&typeof f=="number"&&f>c&&(c=f);var p=e.diff(t,"d")+1;for(NProgress.start();l===!0;){if(o>n){console.error("%c[Session.getSessionsFromAPI()] EMERGENCY EXIT LOOP",me);break}o+=1;var a=c+(m-1),b=await It.getHistorySession([],c,a);if(b===null)throw new Error("Api.getHistorySession is null");var y=JSON.parse(b);if(y.errors)throw Object.entries(oSession.errors).forEach(E=>console.log("%cApi.getHistorySession send us some errors : %s",Ge,E[1].message)),new Error("Api.getHistorySession send us some errors ");s===!0&&console.log("%cgetSessionsFromAPI() Sessions are %o",B,y),c=a+1,oSession=Ee.parseRowFromApi(y[y.length-1]),console.log("%c[Session.getSessionsFromAPI()]La derni\xE8re session r\xE9cuper\xE9e par api date de:%s et nous collectons les sessions entre %s et %s",B,dayjs(oSession.when).format("DD/MM/YYYY"),dayjs(t).format("DD/MM/YYYY"),dayjs(e).format("DD/MM/YYYY")),s===!0&&console.log("%cgetSessionsFromAPI() last session of loaded page is %o",B,oSession),console.log("%c[Session.getSessionsFromAPI()] compare last session date %s avec la date de d\xE9but %s est ce ant\xE9rieur  %o",B,dayjs(oSession.when).format("DD/MM/YYYY"),dayjs(t).format("DD/MM/YYYY"),dayjs(oSession.when).isBefore(t)),dayjs(oSession.when).isBefore(t)===!0&&(l=!1,s===!0&&console.log("%cgetSessionsFromAPI() last session is before start date of parsing %s STOP browsing....",B,dayjs(oSession.dtFrom).format("DD/MM/YYYY")),Et.setSessionIndex(oSession.when,c));let x=y.filter(E=>dayjs(E.sessionDate).isBetween(t,e,"day","[]"));s===!0&&console.log("%cgetSessionsFromAPI() Filtered on date Sessions are %o",B,x);for(let E of x){oSession=Ee.parseRowFromApi(E),s===!0&&console.log("%cgetSessionsFromAPI()  will call Session.add() on %o",B,oSession);let O=await Ee.add(oSession);var v=dayjs(e).diff(oSession.when,"d")+1;NProgress.set(v/p)}c=a+1}NProgress.done(),await Mt(`Collecte des sessions du ${t.format("DD/MM/YYYY")} au ${e.format("DD/MM/YYYY")} termin\xE9e`)}),G($e,"parseRowFromApi",function(t){bDebug=!1,bDebug===!0&&console.log("%cparseRowFromApi() oSession is %o",B,t);let e={};return e.id="",e.who_id=t.recipient.id,typeof e.who_id=="number"&&(e.who_id=e.who_id.toString(10)),e.who_name=t.recipient.displayableName,t.status===kn&&(e.status=gt),t.status===$n&&(e.status=pt),t.status===Yn&&(e.status=yt),t.status===Ln&&(e.status=bt),e.status===void 0&&(e.status=t.status),e.type=t.type,e.type.toLowerCase()==="mentoring"&&(e.type="mentorat"),e.lvl=t.projectLevel,e.lvl==null&&(e.lvl=""),e.when=dayjs(t.sessionDate).toISOString(),e.path=null,e.funding=null,e.cid=Ee.getHashId(e.when,e.who_id),e});var Te=$e;var Ut=class{},Nt=Ut;G(Nt,"calculateBill",function(t,e){let s=e.format("YYYYMM");return St.exists(s)===!0?(console.log(`%cUse Archived version ${s} of accounting`,B),St.get(s).data):(typeof t=="string"&&(t=t.format("YYYY-MM-DD")),typeof e=="string"&&(e=e.format("YYYY-MM-DD")),Ut.m_calculateBill(t,e))}),G(Nt,"_calculateBill",function(t,e){typeof t=="string"&&(t=dayjs(t)),typeof e=="string"&&(e=dayjs(e));let s=dayjs().format("YYYY-MM-DDTHH:mm:ssZ[Z]");var n=0,o=0,l=performance.now();let f=K.Cfg.dbase.get(Te.tbl_name).filter(u=>dayjs(u.when).isSameOrBefore(e,"day")&&dayjs(u.when).isSameOrAfter(t,"day")).value(),p=f.length,a={from:t,to:e,created_at:null,maxLevel:vt,number:0,amount:0,errors:{funding:[],level:[],path:[],status:[],type:[]},flatFee:[]},b=0,y=0,v=[];n=performance.now();let x=Ut.getPriceList(t);o=performance.now(),console.log("%cGetPriceList took "+(o-n)+" milliseconds.",We);let E=qn([vt+1,vt+1,vt+1,vt+1]);for(var O=0;O<p;O+=1){let u=f[O];var T=0;u.status===gt&&(T=se),u.status===pt&&(T=ae),u.status===yt&&(T=ne),(u.status===bt||u.status===$t)&&(T=de);var D=0;u.type.toLowerCase()==="session"&&(D=q),u.type.toLowerCase()==="mentorat"&&(D=Bn),u.type.toLowerCase()==="soutenance"&&(D=Q),u.path!=null&&u.path.toLowerCase()==="158-trouvez-lemploi-qui-vous-correspond"&&u.type!=="soutenance"&&(D=z);var S=0;let C=Ce.isInOldMode(t);if(C===!0&&(S=u.isFunded===!0?X:Z),u.funding===Ze&&(S=Z),u.funding===je&&(S=X),u.funding===ht&&(S=ee),u.lvl==""){a.errors.level.push(u);continue}if(typeof u.lvl=="string"&&(u.lvl=parseInt(u.lvl,10)),u.lvl<0){a.errors.level.push(u);continue}if(C===!1&&u.funding!==Ze&&u.funding!==je&&u.funding!==ht){a.errors.funding.push(u);continue}if(u.type.toLowerCase()!=="session"&&u.type.toLowerCase()!=="mentorat"&&D!==Q&&D!==z){a.errors.type.push(u);continue}if(u.status!==gt&&u.status!==pt&&u.status!==yt&&u.status!==bt&&u.status!==$t){a.errors.status.push(u);continue}let g=E.get(D,T,S,+u.lvl);g===void 0&&(g={number:0,amount:0,data:[]}),g.number+=1,b+=1,u.lvl<0?(g.amount+=0,y+=0):(g.amount+=1*x[u.lvl][D][T][S],y+=1*x[u.lvl][D][T][S]),g.data.push(u),E.set(D,T,S,+u.lvl,g),D===q&&S===Z&&u.status!==pt&&v.push({id:+u.who_id,who_id:u.who_id,who_name:u.who_name})}var A=[];n=performance.now(),A=_.uniqBy(v,"id"),a.flatFee=A,a.number=b,a.amount=y,a.number+a.errors.funding.length+a.errors.level.length+a.errors.path.length+a.errors.status.length+a.errors.type.length<p&&(console.log(`%cError total number of sessions is ${p} and total number of sessions in bill ${b} + all errors are different`,me),console.log("errors are",a.errors),console.log("sessions are",f)),a.created_at=s,E.set(0,0,0,0,a);var w=performance.now();return console.log("%cFunction took "+(w-l)+" milliseconds.",We),a.errors.funding.length+a.errors.level.length+a.errors.path.length+a.errors.status.length+a.errors.type.length>0&&console.log("%cWarning some errors found %o",Ge,a.errors),E}),G(Nt,"m_calculateBill",moize.default(Ut._calculateBill,{maxAge:12e4,isSerialized:!0})),G(Nt,"getPriceList",function(t){typeof t=="string"&&(t=dayjs(t));var e=[0,Dn,On,Mn,In,Nn,jn];let s=Ce.isInOldMode(t);var n=new Array(7);for(let o=1;o<=vt;o+=1){let l=e[o],c=e[o]/2,m=e[o]/4;s?(n[o]=new Array(3),n[o][q]=new Array(5),n[o][q][se]=new Array(4),n[o][q][se][Z]=l,n[o][q][se][X]=l,n[o][q][se][ee]=l,n[o][q][ae]=new Array(4),n[o][q][ae][Z]=0,n[o][q][ae][X]=0,n[o][q][ae][ee]=0,n[o][q][ne]=new Array(4),n[o][q][ne][Z]=c,n[o][q][ne][X]=c,n[o][q][ne][ee]=c,n[o][q][de]=new Array(4),n[o][q][de][Z]=c,n[o][q][de][X]=c,n[o][q][de][ee]=c,n[o][Q]=new Array(5),n[o][Q][se]=new Array(4),n[o][Q][se][Z]=l,n[o][Q][se][X]=l,n[o][Q][se][ee]=l,n[o][Q][ae]=new Array(4),n[o][Q][ae][Z]=0,n[o][Q][ae][X]=0,n[o][Q][ae][ee]=0,n[o][Q][ne]=new Array(4),n[o][Q][ne][Z]=c,n[o][Q][ne][X]=c,n[o][Q][ne][ee]=c,n[o][Q][de]=new Array(4),n[o][Q][de][Z]=c,n[o][Q][de][X]=c,n[o][Q][de][ee]=c,n[o][z]=new Array(5),n[o][z][se]=new Array(4),n[o][z][se][Z]=l,n[o][z][se][X]=l,n[o][z][se][ee]=l,n[o][z][ae]=new Array(4),n[o][z][ae][Z]=0,n[o][z][ae][X]=0,n[o][z][ae][ee]=0,n[o][z][ne]=new Array(4),n[o][z][ne][Z]=c,n[o][z][ne][X]=c,n[o][z][ne][ee]=c,n[o][z][de]=new Array(4),n[o][z][de][Z]=c,n[o][z][de][X]=c,n[o][z][de][ee]=c):(n[o]=new Array(3),n[o][q]=new Array(5),n[o][q][se]=new Array(4),n[o][q][se][Z]=c,n[o][q][se][X]=l,n[o][q][se][ee]=l,n[o][q][ae]=new Array(4),n[o][q][ae][Z]=0,n[o][q][ae][X]=0,n[o][q][ae][ee]=0,n[o][q][ne]=new Array(4),n[o][q][ne][Z]=0,n[o][q][ne][X]=0,n[o][q][ne][ee]=0,n[o][q][de]=new Array(4),n[o][q][de][Z]=m,n[o][q][de][X]=c,n[o][q][de][ee]=c,n[o][Q]=new Array(5),n[o][Q][se]=new Array(4),n[o][Q][se][Z]=l,n[o][Q][se][X]=l,n[o][Q][se][ee]=l,n[o][Q][ae]=new Array(4),n[o][Q][ae][Z]=0,n[o][Q][ae][X]=0,n[o][Q][ae][ee]=0,n[o][Q][ne]=new Array(4),n[o][Q][ne][Z]=0,n[o][Q][ne][X]=0,n[o][Q][ne][ee]=0,n[o][Q][de]=new Array(4),n[o][Q][de][Z]=c,n[o][Q][de][X]=c,n[o][Q][de][ee]=c,n[o][z]=new Array(5),n[o][z][se]=new Array(4),n[o][z][se][Z]=l,n[o][z][se][X]=l,n[o][z][se][ee]=l,n[o][z][ae]=new Array(4),n[o][z][ae][Z]=0,n[o][z][ae][X]=0,n[o][z][ae][ee]=0,n[o][z][ne]=new Array(4),n[o][z][ne][Z]=0,n[o][z][ne][X]=0,n[o][z][ne][ee]=0,n[o][z][de]=new Array(4),n[o][z][de][Z]=c,n[o][z][de][X]=c,n[o][z][de][ee]=c)}return n});var et=Nt;var fn=function(d,t){let e=[[0,1,2,3,4,5,5],[5,1,2,3,4,5,5],[4,5,1,2,3,4,4],[3,4,5,1,2,3,3],[2,3,4,5,1,2,2],[1,2,3,4,5,1,1],[0,1,2,3,4,5,0]];return Math.trunc(t.diff(d,"days")/7)*5+e[d.day()][t.day()]};var jt=class{};G(jt,"detail_bill","truc"),G(jt,"getListDetailBill",function(t,e){let n=K.Cfg.dbase.get(Te.tbl_name).filter(O=>dayjs(O.when).isSameOrBefore(e,"day")&&dayjs(O.when).isSameOrAfter(t,"day")).sortBy(function(O){return dayjs(O.when).valueOf()}).value(),o=Ce.getOldModeDate(),l=et.getPriceList(o.subtract(1,"day")),c=et.getPriceList(o),m=0;var f=_.cloneDeep(n);for(var p in f){var a=0,b=0,y=!0,v=0;f[p].status===gt&&(v=se),f[p].status===pt&&(v=ae),f[p].status===yt&&(v=ne),(f[p].status===bt||f[p].status===$t)&&(v=de);var x=0;f[p].type.toLowerCase()==="session"&&(x=q),f[p].type.toLowerCase()==="soutenance"&&(x=Q),f[p].path!=null&&f[p].path.toLowerCase()==="158-trouvez-lemploi-qui-vous-correspond"&&f[p].type!=="soutenance"&&(x=z);var E=0;f[p].funding===Ze&&(E=Z),f[p].funding===je&&(E=X),f[p].funding===ht&&(E=ee),Ce.isInOldMode(dayjs(f[p].when))?a=+f[p].lvl>0?l[+f[p].lvl][x][v][E]:0:(y=!1,a=+f[p].lvl>0?c[+f[p].lvl][x][v][E]:0),m+=a,f[p].iPu=a,f[p].oldMode=y,f[p].iCumul=m}return f}),G(jt,"getListStatistic",function(t,e){let s=t.clone(),n=s.endOf("month"),o=[],l=[],c=0,m=e.diff(t,"month");for(var f=performance.now();s.isSameOrBefore(e,"day");)o.push(et.calculateBill(s,n)),s=s.add(1,"month"),n=s.endOf("month");var p=performance.now();console.log("%cComputed data between the two dates in"+(p-f)+" milliseconds.",We),s=t.clone(),n=s.endOf("month");let a=0,b=0,y=0,v=0,x=0,E=0,O=0;for(;c<=m;){let D=o[c].get(0,0,0,0),S=D.maxLevel;l[c]={header:{dtFrom:null,dtTo:null,created_at:null},sessions:{total:0,nb:0,pu:0,nbc:0},defenses:{total:0,nb:0,pu:0,nbc:0},coaches:{total:0,nb:0,pu:0,nbc:0},bonus:0,kpi:{jrs:0,hrs:0,hrsp:0}};let A=1;for(;A<S;){let u=0,C=0,g=0,M=0;a=o[c].get(q,se,Z,A),y=typeof a=="undefined"?0:a.number,v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(q,se,X,A),b=typeof a=="undefined"?0:a.number,v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(q,se,ee,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=typeof a=="undefined"?0:a.number,Ce.isInOldMode(s)?(l[c].kpi.hrs+=(a+b+y)*(45/60),l[c].kpi.hrsp+=(a+b+y)*(GM_config.get("nbHrsS")/60)):(l[c].kpi.hrs+=y*(30/60),l[c].kpi.hrsp+=y*(GM_config.get("nbHrsAfM")/60),l[c].kpi.hrs+=(a+b)*(45/60),l[c].kpi.hrsp+=(a+b)*(GM_config.get("nbHrsfM")/60)),a=o[c].get(q,ae,Z,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(q,ae,X,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(q,ae,ee,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,Ce.isInOldMode(s)?(a=o[c].get(q,ne,Z,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(q,ne,X,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(q,ne,ee,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount):(a=o[c].get(q,ne,Z,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(q,ne,X,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(q,ne,ee,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount),a=o[c].get(q,de,Z,A),y=typeof a=="undefined"?0:a.number,v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(q,de,X,A),b=typeof a=="undefined"?0:a.number,v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(q,de,ee,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=typeof a=="undefined"?0:a,l[c].kpi.hrs+=(a+b+y)*(15/60),l[c].kpi.hrsp+=(a+b+y)*(15/60),u=l[c].sessions.total,C=l[c].sessions.nb,g=l[c].sessions.pu,M=l[c].sessions.nbc,l[c].sessions={total:x+u,nb:v+C,pu:(x+u)/(v+C),nbc:E+M},u=0,C=0,g=0,M=0,v=0,x=0,E=0,O=0,a=o[c].get(Q,se,Z,A),y=typeof a=="undefined"?0:a.number,v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(Q,se,X,A),b=typeof a=="undefined"?0:a.number,v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(Q,se,ee,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=typeof a=="undefined"?0:a.number,l[c].kpi.hrs+=(a+b+y)*(45/60),l[c].kpi.hrsp+=(a+b+y)*(GM_config.get("nbHrsD")/60),a=o[c].get(Q,ae,Z,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(Q,ae,X,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(Q,ae,ee,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(Q,ne,Z,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(Q,ne,X,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(Q,ne,ee,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(Q,de,Z,A),y=typeof a=="undefined"?0:a.number,v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(Q,de,X,A),b=typeof a=="undefined"?0:a.number,v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(Q,de,ee,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=typeof a=="undefined"?0:a.number,l[c].kpi.hrs+=(a+b+y)*(15/60),l[c].kpi.hrsp+=(a+b+y)*(15/60),u=l[c].defenses.total,C=l[c].defenses.nb,g=l[c].defenses.pu,M=l[c].defenses.nbc,l[c].defenses={total:x+u,nb:v+C,pu:(x+u)/(v+C),nbc:E+M},u=0,u=0,C=0,g=0,M=0,v=0,x=0,E=0,O=0,a=o[c].get(z,se,Z,A),y=typeof a=="undefined"?0:a.number,v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(z,se,X,A),b=typeof a=="undefined"?0:a.number,v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(z,se,ee,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=typeof a=="undefined"?0:a.number,l[c].kpi.hrs+=(a+b+y)*(45/60),l[c].kpi.hrsp+=(a+b+y)*(GM_config.get("nbHrsC")/60),a=o[c].get(z,ae,Z,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(z,ae,X,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(z,ae,ee,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(z,ne,Z,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(z,ne,X,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(z,ne,ee,A),E=typeof a=="undefined"?E:E+a.number,O=typeof a=="undefined"?O:O+a.amount,a=o[c].get(z,de,Z,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(z,de,X,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,a=o[c].get(z,de,ee,A),v=typeof a=="undefined"?v:v+a.number,x=typeof a=="undefined"?x:x+a.amount,u=l[c].coaches.total,C=l[c].coaches.nb,g=l[c].coaches.pu,M=l[c].coaches.nbc,a=typeof a=="undefined"?0:a.number,l[c].kpi.hrs+=a*(15/60),l[c].kpi.hrsp+=a*(15/60),l[c].coaches={total:x+u,nb:v+C,pu:(x+u)/(v+C),nbc:E+M},A+=1}let w=D.flatFee.length;for(var T=0;T<w;T+=1)l[c].bonus+=30;n.isAfter(e,"day")&&(n=e.clone()),l[c].kpi.jrs=fn(s,n),l[c].header.dtFrom=s.format("YYYY-MM-DD"),l[c].header.dtTo=n.format("YYYY-MM-DD"),l[c].header.created_at=dayjs().format("YYYY-MM-DD HH:mm:ss"),s=s.add(1,"month"),n=s.endOf("month"),c+=1}return l}),G(jt,"getListStatisticOld",function(t,e){let s=t.clone(),n=s.endOf("month"),o=[],l=[],c=e.get("month")-t.get("month");for(var m=performance.now();s.isSameOrBefore(e,"day");)o.push(et.calculateBill(s,n)),s=s.add(1,"month"),n=s.endOf("month");var f=performance.now();console.log("%cComputed data between the two dates in"+(f-m)+" milliseconds.",We);let p=0;for(s=t.clone(),n=s.endOf("month"),console.log(o);p<=c;){let a=o[p][0].max_level;l[p]={header:{dtFrom:null,dtTo:null,created_at:null},sessions:{total:0,nb:0,pu:0,nbc:0},defenses:{total:0,nb:0,pu:0,nbc:0},coaches:{total:0,nb:0,pu:0,nbc:0},bonus:0,kpi:{jrs:0,hrs:0,hrsp:0}};let b=1;for(;b<a;){let y=[...Array(8).keys()];for(let v=0;v<y.length;v+=1)l[p].sessions.total+=o[p][b].sessions.number[v]*o[p][b].sessions.pu[v],l[p].sessions.nb+=o[p][b].sessions.number[v],l[p].defenses.total+=o[p][b].defenses.number[v]*o[p][b].defenses.pu[v],l[p].defenses.nb+=o[p][b].defenses.number[v],Ce.isInOldMode(s)?[1,5].includes(v)&&(l[p].sessions.nbc+=o[p][b].sessions.number[v],l[p].defenses.nbc+=o[p][b].defenses.number[v]):[1,2,5,6].includes(v)&&(l[p].sessions.nbc+=o[p][b].sessions.number[v],l[p].defenses.nbc+=o[p][b].defenses.number[v]),Ce.isInOldMode(s)?(l[p].kpi.hrs+=(o[p][b].sessions.number[v]-o[p][b].defenses.number[v])*(45/60),l[p].kpi.hrsp+=(o[p][b].sessions.number[v]-o[p][b].defenses.number[v])*(GM_config.get("nbHrsfM")/60)):([4,5,6,7].includes(v)&&(l[p].kpi.hrs+=(o[p][b].sessions.number[v]-o[p][b].defenses.number[v])*(30/60),l[p].kpi.hrsp+=(o[p][b].sessions.number[v]-o[p][b].defenses.number[v])*(GM_config.get("nbHrsAfM")/60)),[0,1,2,3].includes(v)&&(l[p].kpi.hrs+=(o[p][b].sessions.number[v]-o[p][b].defenses.number[v])*(45/60),l[p].kpi.hrsp+=(o[p][b].sessions.number[v]-o[p][b].defenses.number[v])*(GM_config.get("nbHrsfM")/60))),l[p].kpi.hrs+=o[p][b].defenses.number[v]*(45/60),l[p].kpi.hrsp+=o[p][b].defenses.number[v]*(GM_config.get("nbHrsD")/60);b+=1}l[p].sessions.pu=l[p].sessions.total/(l[p].sessions.nb-l[p].sessions.nbc),l[p].defenses.pu=l[p].defenses.total/(l[p].defenses.nb-l[p].defenses.nbc),l[p].coaches.total=l[p].sessions.total-l[p].defenses.total,l[p].coaches.nb=l[p].sessions.nb-l[p].defenses.nb,l[p].coaches.nbc=l[p].sessions.nbc-l[p].defenses.nbc,l[p].coaches.pu=l[p].coaches.total/(l[p].coaches.nb-l[p].coaches.nbc);for(let y=0;y<o[p][0].bonus.length;y+=1)l[p].bonus+=o[p][0].bonus[y].sessions>0?30:0;n.isAfter(e,"day")&&(n=e.clone()),l[p].kpi.jrs=fn(s,n),l[p].header.dtFrom=s.format("YYYY-MM-DD"),l[p].header.dtTo=n.format("YYYY-MM-DD"),l[p].header.created_at=dayjs().format("YYYY-MM-DD HH:mm:ss"),s=s.add(1,"month"),n=s.endOf("month"),p+=1}return l});var Jt=jt;var pn=class{static changePgIfNeeded(t,e,s,n){var o=n.getPageCount(),l=n.getPages()[o-1],c=l.fontSize,m=l.getFont(),f=l.lineHeight;return t<e&&(s=1,l=n.addPage(),l.font=m,l.setFontSize(c),l.lineHeight=f),[s,l]}};G(pn,"addFooter",async function(t,e,s={}){let{degrees:n,PDFDocument:o,rgb:l,StandardFonts:c}=PDFLib,m=t.getPageCount(),f="8".repeat(m),p=await t.embedFont(c.TimesRoman),a=12,b=p.widthOfTextAtSize(`page ${f} / ${f}`,a),y=10,v=10,x=1,E=l(0/255,0/255,0/255),O=l(253/255,246/255,227/255),T=5,D=5,S=3,A=3,w=!0;t.getPages().forEach((u,C)=>{if(!(w===!0&&C==0)){let{width:g,height:M}=u.getSize(),L=a+2*x+S+A;u.moveTo(y+T,a+A),u.setFont(p),u.setFontSize(a),u.setFontColor(l(1,0,0)),e!==void 0&&u.drawText(`${e}`),u.drawText(`page ${C+1} / ${m}`,{x:g-b-D}),u.drawRectangle({x:y,y:10,width:g-(y+v),height:L,color:O,opacity:.6,borderColor:E,borderWidth:x})}})});var ut=pn;var ir=async function(){let d=K.Cfg.dbase;return await Swal.mixin({confirmButtonText:"Suivant &rarr;",showCancelButton:!0,progressSteps:["0","1","2","3","4","5"],onOpen:function(a){console.log("...onOpen")},onRender:function(a){console.log("....onUpdate")},onClose:function(a){console.log(".....onClose")},onAfterClose:function(a){console.log("......onAfterClose")},onDestroy:function(a){console.log(".......onDestroy")}}).queue([{title:"Migration de la base",html:"<p>Cette migration va corriger la base et ajouter les nouveaux champs n\xE9cessaires, l`interrpuption du traitement est sans danger (mais ce n' est pas une raison !)</p>"},{title:"Correction de la table \xE9tudiant",html:"<p>Correction de la liste des \xE9tudiants (who_id)",onOpen:async function(a){console.log("%cMigration table des \xE9tudiants correction du who_id",B),Swal.showLoading();var b=dayjs("2020-06-01"),y=d.get("students"),v=y.value(),x=d.get("sessions").filter(S=>dayjs(S.when).isSameOrAfter(b,"day")),E=y.size().value(),O=Swal.getContent().textContent;for(m=0;m<E;m+=1){var T=x.find(A=>A.who_name===v[m].fullname).value();T!==void 0&&y.get(m).assign({who_id:T.who_id}).write();let S=Swal.getContent();S!=null&&(S.innerHTML=`${O}<br /><p>Traitement en cours : ${m}/${v.length}</p>`),await Ke(1)}Swal.hideLoading();let D=Swal.getContent();D!=null&&(D.textContent=`Traitement termin\xE9 : ${v.length}/${v.length}`)}},{title:"Correction de la table \xE9tudiant",html:"<p>Correction de la liste des \xE9tudiants funded devient funding</p>",onOpen:async function(a){console.log("%cMigration : table des \xE9tudiants suppression de l'ancien champs et ajout du champs funding",B),Swal.showLoading();for(var b=d.get("students"),y=b.size().value(),v=Swal.getContent().textContent,x=0;x<y;x+=1){var E=b.get(x).value().fundedby;if(E===void 0){console.log("%cStudent ${oListStudents.get(i).who_name} already converted, skip it",B);continue}b.get(x).unset(["fundedby"]).assign({funding:E}).write(),console.log("%cStudent ${oListStudents.get(i).who_name} create field funding and remove fundedby",B);let T=Swal.getContent();T!=null&&(T.innerHTML=`${v}<br /><p>Traitement en cours : ${x}/${y}</p>`),await Ke(1)}Swal.hideLoading();let O=Swal.getContent();O!=null&&(O.textContent=`Traitement termin\xE9 : ${y}/${y}`)}},{title:"Correction table Etudiants",html:"<p>Correction de la liste des sessions, ajout du path dans la session</p>",onOpen:async function(a){console.log("%cMigration table des sessions correction de id_who",B),Swal.showLoading();var b=dayjs("2020-06-01"),y=d.get("students"),v=y.value(),x=d.get("sessions").filter(A=>dayjs(A.when).isSameOrAfter(b,"day")),E=x.filter(A=>A.type!="soutenance").value(),O=Swal.getContent().textContent;for(m=0;m<E.length;m+=1){var T=y.find({who_id:E[m].who_id}).value();console.log("found",T);var D=T!==void 0&&T.path.length>0?T.path:"0-unknown";d.get("sessions").find({id:E[m].id}).assign({path:D}).write();let A=Swal.getContent();A!=null&&(A.innerHTML=`${O}<br /><p>Traitement en cours : ${m}/${E.length}</p>`),await Ke(1)}Swal.hideLoading();let S=Swal.getContent();S!=null&&(S.textContent=`Traitement termin\xE9 : ${m}/${E.length}`)}},{title:"Migration de la table des Sessions",html:'<p>Correction de la liste des sessions, suppression du champs "isFunded"</p>',onOpen:async function(a){console.log("%cMigration : table des sessions suppression de isFunded",B),Swal.showLoading();for(var b=dayjs("2020-06-01"),y=d.get("students").value(),v=d.get("sessions").filter(D=>dayjs(D.when).isSameOrAfter(b,"day")),x=Swal.getContent().textContent,E=v.value().length;E-=1;){var O=v.get(E);O.value().isFunded===void 0||O.value().isFunded===void 0?console.log(`%cSkip ${O.value()} already converted`,B):O.unset(["isFunded"]).write();let D=Swal.getContent();D!=null&&(D.innerHTML=`${x}<br /><p>Traitement en cours : il reste ${E} \xE9lements \xE0 convertir</p>`),await Ke(1)}Swal.hideLoading();let T=Swal.getContent();T!=null&&(T.textContent=`Traitement en termin\xE9 : ${v.value().length}/${v.value().length}`)}},{title:"Migration de la table des Sessions",html:"<p>Correction de la liste des sessions, ajout de funding</p>",onOpen:async function(a){console.log("%cMigration : table des sessions ajout de fundedBy",B),Swal.showLoading();for(var b=dayjs("2020-06-01"),y=d.get("students").value(),v=d.get("sessions").filter(A=>dayjs(A.when).isSameOrAfter(b,"day")),x=v.filter(A=>A.type!="soutenance"),E=Swal.getContent().textContent,O=x.value().length;O-=1;){var T=x.get(O);T.value().funding!==void 0?console.log(`%cSkip ${T.value()} already converted`,B):T.assign({funding:_e.getFunding(T.value().who_id)}).write();let A=Swal.getContent();A.innerHTML=`${E}<br /><p>Traitement en cours : il rest ${O}\xE9lements \xE0 convertir</p>`,await Ke(1)}for(var D=O,x=v.filter(A=>A.type=="soutenance"),O=0;O<x.value().length;O+=1){x.get(O).assign({funding:je}).write();let w=Swal.getContent();w!=null&&(w.innerHTML=`${E}<br /><p>Traitement en cours : ${D+O}/${v.value().length}</p>`),await Ke(1)}Swal.hideLoading();let S=Swal.getContent();S!=null&&(S.textContent=`Traitement termin\xE9 :  ${v.value().length}/${v.value().length}`)}}]).then(a=>{if(a.value){let b=JSON.stringify(a.value);Swal.fire({title:"Traitement termin\xE9!",html:`
			Your answers:
			<pre><code>${b}</code></pre>
		  `,confirmButtonText:"Lovely!"})}else return console.log("%c resultat en erreur",B,a,a.dismiss===Swal.DismissReason.cancel),-1});var e,s,n;for(m=0;m<s.length;m+=1){var o;o!==void 0&&d.get("students").find({fullname:o.who_name}).assign({who_id:o.who_id}).write()}var l;for(m=0;m<l.length;m+=1){var o,c;d.get("sessions").find({id:l[m].id}).assign({path:c}).write()}for(var m;m<n.value().length;m+=1)n.get(m).unset(["isFunded"]).write();for(var f,m;m<f.value().length;m+=1){var p=f.get(m);p.assign({fundedBy:_e.getFunded(p.value().who_id)}).write()}for(var f,m;m<f.value().length;m+=1)f.get(m).assign({fundedBy:je}).write()};var ar=Fr(sr()),gn=class{},Je=gn;G(Je,"save",function(){return console.log("%cWanna save DBASE",B),JSON.stringify(K.Cfg.dbase.getState())}),G(Je,"load",function(t){return console.log(`%cWanna load ${t} in DBASE`,B),console.log("%c !!!!!! TYPE NOT CHECKED BE CARREFULL",B),K.Cfg.dbase.setState(JSON.parse(t)).write()}),G(Je,"update",async function(t){console.log(`%cIs there any update to DB to go to version ${t}`,B);let e=[{version:"1.00.0006",action:ir}];for(let n=0,o=e.length;n<o;n++)if(Lt(t,e[n].version)==0)if(console.log(`%cFound an update to DB version '${e[n].version}' proceed conversion...`,B),await e[n].action()==-1)console.log(`%cError something was wrong during update of database from version: ${ke.getVersion()} to version:${e[n].version}.... you have canceled it`,me),Swal.fire({icon:"error",title:"Oops...",text:`Quelque chose s'est mal pass\xE9 ou vous avez annul\xE9 l'update 

Utiliser l'application dans ces conditions n'est pas garanti  !`,footer:'<a href="https://github.com/StephaneTy-Pro/OC-Mentors-AccountAddon/issues">G\xE9n\xE9rer un bug?</a>'});else{let c=ke.setDbVersion(t);console.log(`%cChanged DB to version ${c}`,B)}let s=ke.setDbVersion(t);console.log(`%cChanged DB to version ${s}`,B)}),G(Je,"erase",function(t){return console.log(`%cErase all data of table: ${t}`,B),K.Cfg.dbase.get(t).remove().write()}),G(Je,"loadTable",function(t,e){if(table_exist(t))return K.Cfg.dbase.set(t,e).write();throw"Table :"+t+", not exists in DB !"}),G(Je,"table_exist",t=>K.Cfg.dbase.has(t).value),G(Je,"table_export",function(t){if(table_exist(t))return JSON.stringify(K.Cfg.dbase.get(t).value());throw"Table :"+t+", not exists id DB !"}),G(Je,"exportTblToCSV",function(t="",e,s){let n=gn.exportTblToJSON(t,e,s),o={quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:`\r
`,skipEmptyLines:!1,columns:null};return ar.default.unparse(n,o)}),G(Je,"exportTblToJSON",function(t="",e,s){if(t=="")return console.log("%cIrrecoverable Error: You forget to define a data table name",me),-1;if(e!==null&&e!==""&&(dtFrom=dayjs(e)),s!==null&&s!==""&&(dtTo=dayjs(s)),K.Cfg.dbase.has(t).value==!1)return console.log(`%cIrrecoverable Error: table ${t} don't exist`,me),-1;if(t===Te.tbl_name){if(typeof dtFrom=="object"&&dtTo==="object")return K.Cfg.dbase.get(t).filter(n=>dayjs(n.when).isSameOrBefore(dtTo,"day")&&dayjs(n.when).isSameOrAfter(dtFrom,"day")).value();if(typeof dtFrom=="object")return K.Cfg.dbase.get(t).filter(n=>dayjs(n.when).isSameOrAfter(dtFrom,"day")).value();if(typeof dtTo=="object")return K.Cfg.dbase.get(t).filter(n=>dayjs(n.when).isSameOrBefore(dtTo,"day")).value()}return K.Cfg.dbase.get(t).value()});var xt=Je;var qt=async function(){var d="";d+="<style>div.about_content {background-color: #fed9ff;/*width: 600px;*/height: var(--heigth, 80%);overflow-x: hidden;overflow-y: auto;text-align: left;padding: 20px;}</style>",d+='<div class="about_content" style="--heigth: 600px;">',d+='<div class="about_content__wrapper">';var e=(await ft.XHR({method:"GET",url:"https://raw.githubusercontent.com/StephaneTy-Pro/OC-Mentors-AccountAddon/master/README.md",responseType:"text/html",headers:{"User-Agent":"Mozilla/5.0"}})).responseText,s=new showdown.Converter,n=s.makeHtml(e);d+=n,d+="</div>",d+="</div>",Swal.fire({title:`<strong>A propos de ${Tn}</strong>`,icon:"info",html:d,showCloseButton:!0,focusConfirm:!1,position:"center-start",grow:"fullscreen"})},$o=function(d){if(d.querySelector(".Facturier__cbox input[type=checkbox]")===null){var t=yn(d);typeof t!="undefined"&&d.appendChild(t)}else lr(d)};var yn=function(d,t=!0){let e=!1,s="do.js#_buildCbox()::";if(e&&console.log("%c%s%c _buildCbox is %o",B,s,"",d),d.children.length!==1){console.error("Le DOM des lignes d'historique n'est plus conforme");return}let n=d.children[0],o;if(n.querySelector("svg")===null){console.info("%c%s%c je ne trouve pas de balise svg enfant, cette ligne pose probleme %o",Ge,s,"",n);return}var l=n.querySelector("svg").getAttribute("aria-label");if(e&&console.log("\xE9tat: %s",l),o=n.querySelector("svg"),o.dataset.facturierType="state",o.dataset.facturierValue=l,n.querySelector("p")===null){console.info("%c%s%c je ne trouve pas de balise p enfant, cette ligne pose probleme %o",Ge,s,"",n);return}var c=n.querySelector("p").innerText;e&&console.log("type de session: %s",c),o=n.querySelector("p"),o.dataset.facturierType="sessionType",o.dataset.facturierValue=c,o=n.querySelector("time");var m=o.getAttribute("datetime").trim();if(e&&console.log("date et horaire de session: %s",m),e&&console.log("date et horaire de session to iso %s",dayjs(m).toISOString()),o.dataset.facturierType="sessionDateTime",o.dataset.facturierValue=dayjs(m).toISOString(),o=n.querySelector("time").closest("div").nextElementSibling.querySelector("a"),o===null&&(o=n.querySelector("time").closest("div").nextElementSibling.querySelector("p")),o===null){console.error("Le DOM des lignes d'hsitorique n'est plus conforme");return}var f=o.innerText;e&&console.log("nom de l'\xE9tudiant: %s",f),o.dataset.facturierType="sessionStudentName",o.dataset.facturierValue=f,o=n.children[3];let p;o.querySelector("p")!==null&&o.querySelector("p").nextElementSibling!==null&&o.querySelector("p").nextElementSibling.querySelector("span")!==null&&(o=o.querySelector("p").nextElementSibling.querySelector("span"),p=o.innerText,e&&console.log("expertise: %s",p),o.dataset.facturierType="sessionLevel",o.dataset.facturierValue=p);let a=T=>T.querySelector("[data-facturier-type='sessionType'][data-facturier-value='Soutenance']")!==null,b=T=>T.querySelector("[data-facturier-type='sessionType'][data-facturier-value='Mentorat']")!==null;e&&console.log("ligne: %o type de session Mentorat:%o Soutenance:%o",n,b(n),a(n)),console.log("Tous les a de la ligne renvoient : %o",d.querySelectorAll("a")),console.log("Tous les a de la ligne renvoient : %o",n.querySelectorAll("a"));let y="";if(a(n)===!0&&(e&&console.log("check for url in colum 4 %o",n.children[4]),o=n.children[4],o.querySelector("a")!==null&&(y=o.querySelector("a").href,e&&console.log("Valeur du href %s",y),e&&console.log("will replace %s by %s",document.location.origin+"/users/",""),y=y.replace(document.location.origin+"/users/",""),y=y.substring(y.indexOf("/"),-1),e&&console.log("isDefense =  true, unique id of student: %s",y))),b(n)===!0&&(e&&console.log("check for url in colum 2 %o",n.children[2]),o=n.children[2],o.querySelector("a")!==null)){y=o.querySelector("a").href,e&&console.log("Valeur du href %s",y);let T=document.location.pathname.split("/")[1];e&&console.log("will replace %s by %s",`${document.location.origin}/${T}/mentorship/dashboard/students/`,""),y=y.replace(`${document.location.origin}/${T}/mentorship/dashboard/students/`,""),e&&console.log("isSession =  true unique id of student: %s",y)}b(n)===!0&&y.length==0&&(y=_e.findByFullName(f).id),e&&console.log("unique id of student: %s",y),o=n.querySelector(".Facturier__cbox"),o!==null&&o.remove();var v=n.children[0].cloneNode();n.setAttribute("style","grid-template-columns:15rem 1fr 1fr 5.5rem 6.5rem 1rem");var x=dayjs(m).toISOString(),E="-1";y.length>0&&(e&&console.log("date is %s will search hash(%s,%s)",m,x,y),E=Te.getHashId(x,y));var O=document.createElement("input");return O.type="checkbox",O.name="name",e&&console.log("%ciHash is %c (%o)%o",B,"",typeof E,E),O.value=E,O.onclick=function(T){T.stopPropagation()},bChecked=Te.exists(E),bChecked===!0&&(O.checked=!0),v.appendChild(O),v.setAttribute("style","order:4;"),v.classList.add("Facturier__cbox"),v},dr=function(d){let t=!1,e="do.js#updCboxValue()::";if(t&&console.log("%c%s%c oLine is %o",B,e,"",d),d.querySelector("input")===null){t&&console.log("%c%s%c updCboxValue no input in %o, have to return",B,e,"",d);return}let s=d.querySelector("input"),n=b=>b.querySelector("[data-facturier-type='sessionDateTime']").getAttribute("data-facturier-value"),o=b=>b.querySelector("[data-facturier-type='sessionStudentName']").getAttribute("data-facturier-value"),l=b=>b.querySelector("[data-facturier-type='sessionType'][data-facturier-value='Soutenance']")!==null,c=b=>b.querySelector("[data-facturier-type='sessionType'][data-facturier-value='Mentorat']")!==null;if(c(d)===!1&&l(d)===!1){console.error("%cSomething wrong not possible to update input on line %o there is not type for session",me,d);return}let m=n(d);t&&console.log("date et horaire de session: %s",m);let f="";l(d)===!0&&(t&&console.log("check for url in colum 4 %o",d.children[4]),_oEl=d.children[4],_oEl.querySelector("a")!==null&&(f=_oEl.querySelector("a").href,f=f.replace(document.location.origin+"/users/",""),f=f.substring(f.indexOf("/"),-1),t&&console.log("isDefense =  true, unique id of student: %s",f))),c(d)===!0&&(t&&console.log("check for url in colum 2 %o",d.children[2]),_oEl=d.children[2],_oEl.querySelector("a")!==null&&(f=_oEl.querySelector("a").href,f=f.replace(document.location.origin+"/mentorship/dashboard/students/",""),t&&console.log("isSession =  true unique id of student: %s",f)));var p=dayjs(m).toISOString(),a="-1";if(f.length>0)a=Te.getHashId(p,f);else{let b="";b=_e.findByFullName(o(d)).id,b.length>0&&(a=Te.getHashId(p,b))}s.value=a,bChecked=Te.exists(a),console.log(`%cIs the session with cid ${a} (this is the calculated id) in db ? ${bChecked}`,B),bChecked===!0&&(s.checked=!0)},lr=function(d){try{oInput=d.querySelector("input")}catch(e){throw Error("IRRECOVERABLE ERROR: no input element")}let t=parseInt(oInput.value,10);bChecked=Te.exists(t),bChecked===!0?oInput.checked=!0:oInput.checked=!1},Zt=function(){let d=!0,t="do.js#addCbox()::";var e=Yt,s=document.querySelector(e),n=!0;if(s===null)throw console.log(`%cERROR:Could'nt find the table which display sessions : ${s}`,me),new Error("!!!! IRRECOVERABLE ERROR NO TABLE OF SESSIONS FOUNDED");if(s.querySelector(".Facturier__cbox input[type=checkbox]")===null){var s=document.querySelector(`${e}`).children;for(let[p,a]of Object.entries(s)){if(a.nodeName==="DIV"&&a.classList.contains("Facturier__cbox_all")){console.log("MON ENTETE"),a.dataset.facturierType="header";continue}if(a.querySelector("span")===null){console.log("UNE ETIQUETTE MOIS"),a.dataset.facturierType="section_month";continue}let b=a.children[0],y=yn(a);y!==null&&typeof y!="undefined"?(d&&console.log("%c%s%c returned object to add to line is %o",B,t,"",y),b.appendChild(y)):d&&console.warn("%c%s%c ptoblem returned object to add to line is %o (null or undefined)",Ge,t,"",y)}if(document.querySelector(`${e} .Facturier__cbox_all`)===null){let p=(b,y)=>y.insertAdjacentElement("beforebegin",b);var o=document.querySelector(`${e} li`);let a=o.firstChild.classList;var l=document.createElement("input");l.type="checkbox",l.name="name",l.value="value",l.id="id",l.onclick=function(){document.querySelectorAll(".Facturier__cbox input[type=checkbox]").forEach(b=>b.checked=!b.checked)},l.style="visibility: hidden;";var c=document.createElement("label");c.innerText="in DB",c.style="display:block;text-align:right;",c.onMouseOver="this.style.cursor=pointer;",c.onMouseOut="this.style.cursor=auto;",c.appendChild(l);var m=document.createElement("div");m.classList=a,m.classList.add("Facturier__cbox_all"),m.appendChild(c),p(m,document.querySelector(`${e} li`))}}else{var s=document.querySelector(`${e}`).children;for(let[p,a]of Object.entries(s)){if(a.firstChild.nodeName!=="A")continue;let b=a.firstChild;b.querySelector(".Facturier__cbox input[type=checkbox]")===null?b.appendChild(yn(b)):lr(b)}}},ur=function(d){return $o(d)},cr=async function(){var[d,t]=await Ot(dayjs().startOf("month"),dayjs().endOf("month"));let e=Jt.getListDetailBill(d,t),s="";s+="<table>",s+="<thead>",s+="<tr><th>Quand</th><th>Qui</th><th>Financ\xE9 ?</th><th>Type</th><th>Niveau</th><th>Ancien Mode ?</th><th>Statut</th><th>PU HT</th><th>Cumul</th></tr>",s+="<thead>",s+="<tbody>";for(let n=0;n<e.length;n+=1)s+="<tr>",s+=`<td>${dayjs(e[n].when).format("DD/MM/YYYY \xE0 HH:mm:ss")}</td>`,s+=`<td>${e[n].who_name}</td><td>${e[n].funding}</td>`,sType=e[n].type,e[n].path!=null&&e[n].path.toLowerCase()==="158-trouvez-lemploi-qui-vous-correspond"&&e[n].type!=="soutenance"&&(sType="Coaching"),s+=`<td>${sType}</td><td>${e[n].lvl}</td>`,s+=`<td>${e[n].oldMode===!0?"Oui":"Non"}</td>`,s+=`<td>${e[n].status}</td>`,s+=`<td>${e[n].iPu}</td><td>${e[n].iCumul}\u20AC</td>`,s+="</tr>";s+="</tbody>",s+="</table>",Swal.fire({title:`<strong>Liste d\xE9taill\xE9es des sessions du ${d.format("DD/MM/YYYY")} au ${t.format("DD/MM/YYYY")}</strong>`,icon:"info",html:s,showCloseButton:!0,focusConfirm:!1,position:"center-start",grow:"fullscreen",onOpen:n=>{var o=n.querySelector("table"),l=new simpleDatatables.DataTable(o)}})},fr=async function(){var d=!0,[t,e]=await Ot(dayjs().startOf("month"),dayjs().endOf("month"));d==!0&&console.log("%ccollectAuto() Wanna collect from %s to %s",B,t.format("DD/MM/YYYY"),e.format("DD/MM/YYYY"));var s=await Te.getSessionsFromAPI(t,e);d==!0&&console.log("%ccollectAuto() Sessions are is %o",B,s)},pr=async function(){var d=Yt,t=document.querySelectorAll(d);GM_addStyle(".ldBar path.mainline{stroke-width:10;stroke:#09f;stroke-linecap:round}"),GM_addStyle(".ldBar path.baseline{stroke-width:14;stroke:#f1f2f3;stroke-linecap:round;filter:url(#custom-shadow)}");let e='<div id="pbar" class="ldBar label-center" data-value="0" data-path="M0 0 L200 0 L200 1"></div>';Swal.fire({title:"Traitement en cours!",html:e,confirmButtonText:"Lovely!",onBeforeOpen:function(s){var n=new ldBar("#pbar")},onRender:function(s){},onOpen:async function(s){for(var n=document.getElementById("pbar").ldBar,o=0;o<t.length;o+=1){var l=t[o].parentElement.parentElement,c=Te.parseRow(l);await Te.add(c),n.set(o/t.length*100,!1)}n.set(100,!1),Swal.getTitle()&&(Swal.getTitle().innerText="Traitement termin\xE9 !")},onClose:function(s){},onAfterClose:function(s){},onDestroy:function(s){}})},mr=function(){let d=unsafeWindow.Facturier.cfg.dbase,t=unsafeWindow.Facturier.libs.find(m=>m.id=="dayjs").ptr,e=unsafeWindow.Facturier.libs.find(m=>m.id=="fetchInject").ptr,s=unsafeWindow.Facturier.klass.find(m=>m.id=="Session").ptr,n=unsafeWindow.Facturier.klass.find(m=>m.id=="Student").ptr,o=unsafeWindow.Facturier.klass.find(m=>m.id=="History").ptr,l=unsafeWindow.Facturier.klass.find(m=>m.id=="Archive").ptr,c=unsafeWindow.Facturier.klass.find(m=>m.id=="StudentHistory").ptr;console.log("%cd_dbase, d_dayjs, d_Session, d_Student, d_History, d_Archive, d_StudentHistory are exported",B),console.log("%cfor examples write all code after $>",B),console.group("%cd_dbase",B),console.log("example : get last session in db $>d_dbase.get(d_Session.tbl_name).last().value();"),console.log("          get first student in db $>d_dbase.get(d_Student.tbl_name).first().value()"),console.log("          or d_dbase.get(d_Student.tbl_name).get(0).value()"),console.log("          get all sessions grouped by month/yyyy in db $>d_dbase.get(d_Session.tbl_name).groupBy( v => d_dayjs(v.when).format('MM/YYYY')).value()"),console.log("          get all table $> d_dbase.value()"),console.groupEnd(),console.group("%cd_fetchInject",B),console.log("same as fetchInject libs : https://habd.as/code/fetch-inject/"),console.groupEnd(),console.group("%cd_dayjs",B),console.log("same as dayjs libs"),console.groupEnd(),console.group("%cd_Student",B),console.log("find a student by id \xA4 d_Student.findById(STUDENT_ID, (DATE) ); // date is optionnal"),console.groupEnd(),console.group("%cd_Session",B),console.log("get a list of session \xA4 d_Session.getBetween('2020-08-01','2020-08-31')"),console.log("delete a session by id \xA4 d_Session.deleteById(SESSION_ID);"),console.groupEnd(),console.group("%cSome combinated example",B),console.log("Delete last saved session :  d_Session.deleteById( d_dbase.get(d_Session.tbl_name).last().value().id ); "),console.log("Find all session between 01/08/2020 and 31/08/2020 :  d_dbase.get(d_Session.tbl_name).filter( v => d_dayjs(v.when).isSameOrBefore('20200831', 'day') && d_dayjs(v.when).isSameOrAfter('20200801', 'day')).value(); "),console.groupEnd();debugger};var hr=function(){let{degrees:d,PDFDocument:t,rgb:e,StandardFonts:s}=PDFLib;async function n(){let m=await fetch("https://pdf-lib.js.org/assets/with_update_sections.pdf").then(E=>E.arrayBuffer()),f=await t.load(m),p=await f.embedFont(s.Helvetica),b=f.getPages()[0],{width:y,height:v}=b.getSize();b.drawText("This text was added with JavaScript!",{x:5,y:v/2+300,size:50,font:p,color:e(.95,.1,.1),rotate:d(-45)});let x=await f.save();download(x,"pdf-lib_modification_example.pdf","application/pdf")}async function o(){let c=await t.create(),m=await c.embedFont(s.TimesRoman),f=c.addPage(),{width:p,height:a}=f.getSize(),b=30;f.drawText("Creating PDFs in JavaScript is awesome!",{x:50,y:a-4*b,size:b,font:m,color:e(0,.53,.71)});let y=await c.save();download(y,"pdf-lib_modification_example.pdf","application/pdf")}async function l(){var[c,m]=await Ot(dayjs().startOf("month"),dayjs().endOf("month"));let f=Jt.getListDetailBill(c,m),p=await t.create(),a=await p.embedFont(s.TimesRoman),b=p.addPage(),{width:y,height:v}=b.getSize(),x=30;b.drawText(`Prestations en d\xE9tail 

 du ${c.format("DD/MM/YYYY")} au ${m.format("DD/MM/YYYY")}`,{x:50,y:v/2-x,size:x,font:a,color:e(116/255,81/255,235/255)});let E=12,O=1.25,T=p.addPage();T.setFontSize(E),T.line_space=O,T.font=a;let D=1,S=20,A=O*E+S,w=v/2,u=function(oe){let W="LOrEm ipsum DOLor sit aMet, conSEc/tetUr 25 porttitor. ";return oe*1.0925*(a.widthOfTextAtSize(W,E)/W.length)},C=[0,18,36,10,13,8,5,7],g=[C[0],u(C[1]),u(C[2]),u(C[3]),u(C[4]),u(C[5]),u(C[6]),u(C[7])],M=b.lineHeight,L=25;for(let oe=1;oe<f.length;oe+=1){if(w=v-O*E*D,w<A&&(D=1,T=p.addPage(),T.font=a,T.setFontSize(E),T.line_space=O,w=v-O*E*D),D===1){let qe=["","Quand","Qui","Financ\xE9","Type-Niv.","Statut","Pu","Cumul"],Oe=L;T.moveTo(Oe,w);for(let ze=1;ze<qe.length;ze+=1)T.drawText(qe[ze],{x:Oe}),Oe+=g[ze];D+=1,w=v-O*E*D}let W=L;T.drawText(dayjs(f[oe].when).format("DD/MM/YYYY \xE0 HH:mm"),{font:a,size:E,y:w,x:W,lineHeight:M}),W+=g[1],T.drawText(f[oe].who_name.trim().slice(0,C[2]),{font:a,size:E,y:w,x:W,lineHeight:M}),W+=g[2];let ve=f[oe].funding.trim().slice(0,C[3]);f[oe].funding==="auto-financ\xE9"&&(ve="Au. Fin."),f[oe].funding==="financ\xE9 par un tiers"&&(ve="Fin."),T.drawText(ve,{font:a,size:E,y:w,x:W,lineHeight:M}),W+=g[3];let xe=f[oe].type;f[oe].path!=null&&f[oe].path.toLowerCase()==="158-trouvez-lemploi-qui-vous-correspond"&&f[oe].type!=="soutenance"&&(xe="Coaching");let Pe=`${xe.trim().slice(0,C[4]-2)}-${f[oe].lvl.toString()}`;T.drawText(Pe,{font:a,size:E,y:w,x:W,lineHeight:M}),W+=g[4];let Ne=f[oe].status;f[oe].status==="\xE9tudiant absent"&&(Ne="absent"),f[oe].status==="\xE9tudiante absente"&&(Ne="absente"),f[oe].status==="annul\xE9e tardivement"&&(Ne="an. tard."),T.drawText(Ne,{font:a,size:E,y:w,x:W,lineHeight:M}),W+=g[5],T.drawText(f[oe].iPu.toString(),{font:a,size:E,y:w,x:W,lineHeight:M}),W+=g[6],T.drawText(f[oe].iCumul.toString(),{font:a,size:E,y:w,x:W,lineHeight:M}),D+=1}var k=await et.calculateBill(c,m);let I=k.get(0,0,0,0).maxLevel,$=Ce.getOldModeDate(),P=et.getPriceList($.subtract(1,"day")),U=et.getPriceList($);var F=1;let R=!1;var j=[q,Q,z],Y=["Sessions","Soutenance","Coaching"],H=[0,1,2,3],te=["R\xE9alis\xE9e","Annul\xE9e","Annul\xE9e tardivement","Etudiant(e) absent(e)"],ue=[Z,X,ee],re=["Autofinanc\xE9s","Financ\xE9s","Autres"];D=1,T=p.addPage();let he=["","Quand","Qui","Nb","Pu","Cumul"],J=[0,18,50,3,5,7],V=[C[0],u(C[1]),u(C[2]),u(C[3]),u(C[4]),u(C[5])],ye="";for(_iSessionType=0,_iSessionTypeLength=j.length;_iSessionType<_iSessionTypeLength;_iSessionType+=1){for(;F<=I;){for([D,T]=ut.changePgIfNeeded(w,A,D,p),w=v-O*E*D,_iSessionQuality=0,_iSessionQualityLength=H.length;_iSessionQuality<_iSessionQualityLength;_iSessionQuality+=1)for(_iFunding=0,_iFundingLength=ue.length;_iFunding<_iFundingLength;_iFunding+=1){if(_i0=k.get(j[_iSessionType],H[_iSessionQuality],ue[_iFunding],F),typeof _i0=="undefined"&&R===!1)continue;_i0.data=_i0.data.reverse();let oe=L;if(ye=`${Y[_iSessionType]} de Niveau ${F} Etudiants ${re[_iFunding]}`,T.moveTo(oe,w),T.drawText(ye,{font:a,size:E+4,y:w,x:oe,lineHeight:M}),oe+=15,D+=1,[D,T]=ut.changePgIfNeeded(w,A,D,p),w=v-O*E*D,T.moveTo(oe,w),T.drawText(te[_iSessionQuality],{font:a,size:E+2,y:w,x:oe,lineHeight:M}),oe+=15,D+=1,[D,T]=ut.changePgIfNeeded(w,A,D,p),w=v-O*E*D,typeof _i0=="undefined"){T.drawText(`d\xE9sol\xE9 pas de r\xE9sultat pour cette section au niveau de facturation (${F})`,{font:a,size:E,y:w,x:oe,lineHeight:M}),D+=1,[D,T]=ut.changePgIfNeeded(w,A,D,p),w=v-O*E*D;continue}let W=oe,ve=0;T.moveTo(oe,w);for(let xe=1;xe<he.length;xe+=1)T.drawText(he[xe],{font:a,size:E+2,y:w,x:W,lineHeight:M}),W+=V[xe];D+=1,[D,T]=ut.changePgIfNeeded(w,A,D,p),w=v-O*E*D,W=oe;for(var ce=0,fe=_i0.data.length;ce<fe;ce+=1)W=oe,T.drawText(dayjs(_i0.data[ce].when).format("DD/MM/YYYY \xE0 HH:mm"),{font:a,size:E,y:w,x:W,lineHeight:M}),W+=V[1],T.drawText(_i0.data[ce].who_name.trim().slice(0,J[1]),{font:a,size:E,y:w,x:W,lineHeight:M}),W+=V[2],T.drawText((ce+1).toString(),{font:a,size:E,y:w,x:W,lineHeight:M}),W+=V[3],Ce.isInOldMode(dayjs(_i0.data[ce].when))?iPu=+_i0.data[ce].lvl>0?P[F][j[_iSessionType]][H[_iSessionQuality]][ue[_iFunding]]:0:iPu=+_i0.data[ce].lvl>0?U[F][j[_iSessionType]][H[_iSessionQuality]][ue[_iFunding]]:0,T.drawText(iPu.toString(),{font:a,size:E,y:w,x:W,lineHeight:M}),W+=V[4],ve+=iPu,T.drawText(ve.toString(),{font:a,size:E,y:w,x:W,lineHeight:M}),D+=1,[D,T]=ut.changePgIfNeeded(w,A,D,p),w=v-O*E*D}F+=1,D+=1,[D,T]=ut.changePgIfNeeded(w,A,D,p),w=v-O*E*D}F=1}ut.addFooter(p,`G\xE9n\xE9r\xE9 avec Facturier version ${Ce.getAppVersion()}`);let be=await p.save();download(be,`prestations_facturees_detail_${c.format("YYYYMMDD")}-${m.format("YYYYMMDD")}.pdf`,"application/pdf")}l()},gr=async function(){GM_addStyle('.formgrid{font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", Helvetica, Arial, sans-serif;}'),GM_addStyle(`
.swal2-styled[type=button]{background-color:#3085d6;border-radius:.75em;color:#fff;font-size:1.0625em;border-left-color:#3085d6;border-right-color:#3085d6;display:inline-block}
.formgrid{display:grid;grid-template-columns:1fr 1em 1fr;grid-gap:.3em .6em;grid-auto-flow:dense;align-items:center}
.formgrid input,.formgrid output,.formgrid textarea,.formgrid select,.formgrid button{grid-column:2 / 4;width:auto;margin:0}
.formgrid legend{font-size:1.2em;width:100%;border-bottom:1px dotted #99c}
.formgrid fieldset{max-width:40em;padding:4px;margin:2em auto;border:0 none}
`);let d="";d+="<legend>Que voulez vous faire ?</legend>",d+="<fieldset>",d+='<div class="formgrid">',d+='Epurer<button id="answer1" data-action="raz" class="swal2-styled" type="button">RAZ</button>',d+='Sauvegarder toute la base<button id="answer2" data-action="export" class="swal2-styled" type="button">Sauvegarder</button>',d+='Charger toute la base<button id="answer3" data-action="import" class="swal2-styled" type="button">Charger</button>',d+=`Exporter les tables
    <button class="swal2-styled" type="button"
    	hx-get="/views/test-swal-sauvegarde"
		hx-select="body"
        hx-target="#sttPlaceHolder"
        hx-include="[name='email']"
        hx-swap="innerHTML"> Exporter
    </button>
		`,d+="</fieldset>",d+="</div>";let{value:t}=await Swal.fire({title:"Gestion de la base de donn\xE9e",html:d,focusConfirm:!1,preConfirm:()=>[document.getElementById("answer1").value,document.getElementById("answer2").value],didOpen:e=>{console.log("%conOpen popup","color:coral"),htmx.process(document.querySelector(".swal2-container")),console.log("%cHtmx Process done","color:coral"),e.querySelector(".formgrid").addEventListener("click",_handler=function(s){let n=function(c){c.target.matches('button[data-action="raz"]')&&(Swal.close(),Po())},o=function(c){c.target.matches('button[data-action="export"]')&&(Swal.close(),Yo())},l=function(c){c.target.matches('button[data-action="import"]')&&(Swal.close(),Lo())};n(s),o(s),l(s)})},onClose:e=>{e.querySelector(".formgrid").removeEventListener("click",_handler),console.log("%conClose popup","color:coral")}});t&&Swal.fire(JSON.stringify(t))},Yo=async function(){let d=xt.save();console.log(`%cWanna save : ${d}`,B);let t=dayjs(),e="";e+=`<a id="download" href="data:text/plain;charset=utf-8,${encodeURIComponent(d)}" download="save_${t.format("YYYYMMDD")}.json">save_${t.format("YYYYMMDD")}.json</a>`,Swal.fire({title:"Sauvegarde de la base de donn\xE9e",html:e,focusConfirm:!1,onOpen:s=>{s.querySelector("#download").click()},onClose:s=>{}})};var Lo=async function(){console.log("%cWanna load DATABASE",B);let{value:d}=await Swal.fire({title:"Selection de la sauvegarde (json)",input:"file",inputAttributes:{accept:".json","aria-label":"Upload your database"}});if(d){let t=new FileReader;t.onload=e=>{xt.load(e.target.result),Zt(),Mt("Chargement de la base termin\xE9")},t.readAsText(d)}},Po=async function(){GM_addStyle(".form_addon {display: grid;padding: 1em;background: #f9f9f9;border: 1px solid #c1c1c1;margin: 2rem auto 0 auto;max-width: 600px;padding: 1em;}"),GM_addStyle(".form_addon input {background: #fff;border: 1px solid #9c9c9c;}"),GM_addStyle(".form_addon button {background: lightgrey;padding: 0.7em;width: 100%;border: 0;}"),GM_addStyle(".form_addon button:hover {background: gold;}"),GM_addStyle(".form_addon label {padding: 0.5em 0.5em 0.5em 0;}"),GM_addStyle(".form_addon input {padding: 0.7em;margin-bottom: 0.5rem;}"),GM_addStyle(".form_addon input:focus {outline: 3px solid gold;}"),GM_addStyle("@media (min-width: 400px) {.form_addon {grid-template-columns: 200px 1fr;grid-gap: 16px;} .form_addon label {text-align: right;grid-column: 1 / 2;} .form_addon input, .form_addon button {grid-column: 2 / 3;}}");var d="";d+='<form id="RAZ" class="form_addon" action="">',d+='<label for="students" class="cbox">Etudiants</label>',d+='<input id="students" type="checkbox" value="del_students_true" checked>',d+='<label for="sessions" class="cbox">Sessions</label>',d+='<input id="sessions" type="checkbox" value="del_sessions_true" checked>',d+='<label for="archives" class="cbox">Archives : factures</label>',d+='<input id="archives" type="checkbox" value="del_archives_true" checked>',d+='<label for="history_cache" class="cbox">Signet historique</label>',d+='<input id="history_cache" type="checkbox" value="del_history_cache_true" checked>',d+='<label for="radio1">filtrer la date</label>',d+='<input type="radio" id="radio1" name="date_filter" value="false" checked>',d+='<label for="radio2">ne pas filtrer</label>',d+='<input type="radio" id="radio2" name="date_filter" value="true">',d+='<label for="dtFrom" class="date">Date de d\xE9but</label>',d+='<input id="dtFrom" type="date" max="2030-12-31" min="2010-12-31">',d+='<label for="dtTo" class="date">Date de fin</label>',d+='<input id="dtTo" type="date" max="2030-12-31" min="2010-12-31">',d+="<!-- Switch -->",d+='<input type="checkbox" class="switch" name="s1" id="s1">',d+='<label for="s1">Switch</label>',d+="</form>";let{value:t}=await Swal.fire({title:"<strong>RAZ des donn\xE9es</strong>",icon:"info",html:d,showCloseButton:!0,focusConfirm:!1,position:"top-start",grow:"row",footer:"Choisissez ce que vous allez supprimer de la base de donn\xE9e",preConfirm:()=>{let m=document.getElementsByName("date_filter"),f="notfound";for(var p in m)m[p].checked===!0&&(f=m[p].value);return console.log(document.getElementById("s1")),[document.getElementById("students").checked,document.getElementById("sessions").checked,document.getElementById("archives").checked,document.getElementById("history_cache").checked,document.getElementById("dtFrom").disabled===!0?null:document.getElementById("dtFrom").value,document.getElementById("dtTo").disabled===!0?null:document.getElementById("dtTo").value,f]},onOpen:m=>{m.querySelector("#radio1").addEventListener("change",function(){console.log(document.getElementById("radio1").checked);let f=document.getElementById("radio1").checked;document.getElementById("dtFrom").disabled=!f,document.getElementById("dtTo").disabled=!f}),m.querySelector("#radio2").addEventListener("change",function(){let f=document.getElementById("radio1").checked;document.getElementById("dtFrom").disabled=!f,document.getElementById("dtTo").disabled=!f}),m.querySelector("#dtFrom").addEventListener("change",function(){document.getElementById("dtTo").value=dayjs(document.getElementById("dtFrom").value).endOf("month").format("YYYY-MM-DD")})},onClose:m=>{m.querySelector("#radio1").removeEventListener("change"),m.querySelector("#radio2").removeEventListener("change"),m.querySelector("#dtFrom").removeEventListener("change")}}),e=t[0],s=t[1],n=t[2],o=t[3];console.log(`%cWanna raz students ? ${e}, wanna raz sessions ? ${s}, wanna raz archives ? ${n}`,B);let l=t[4]?dayjs(t[4]):null,c=t[5]?dayjs(t[5]):null;e===!0&&(setTimeout(function(){Toastify({text:"Suppression de la base des \xE9tudiants",gravity:"top",position:"right",close:!0,backgroundColor:"linear-gradient(to right, #ff5f6d, #ffc371)"}).showToast()},500),_e.delete(l,c),ke.remStudentListUpd()),s===!0&&(setTimeout(function(){Toastify({text:"Suppression de la base des sessions",gravity:"top",position:"right",close:!0,backgroundColor:"linear-gradient(to right, #ff5f6d, #ffc371)"}).showToast()},500),Te.delete(l,c),Zt()),n===!0&&(setTimeout(function(){Toastify({text:"Suppression de la base des archives (financi\xE8res)",gravity:"top",position:"right",close:!0,backgroundColor:"linear-gradient(to right, #ff5f6d, #ffc371)"}).showToast()},500),St.delete(l,c)),o===!0&&(setTimeout(function(){Toastify({text:"Suppression de la base du cache des historique de session",gravity:"top",position:"right",close:!0,backgroundColor:"linear-gradient(to right, #ff5f6d, #ffc371)"}).showToast()},500),Et.remove(l,c))};var yr=async function(){var d="";d+="<style>",d+="form {display: grid;padding: 1em;background: #f9f9f9;border: 1px solid #c1c1c1;margin: 2rem auto 0 auto;max-width: 600px;padding: 1em;}",d+="form input {background: #fff;border: 1px solid #9c9c9c;}",d+="form button {background: lightgrey;padding: 0.7em;width: 100%;border: 0;}",d+="form button:hover {background: gold;}",d+="form label {padding: 0.5em 0.5em 0.5em 0;}",d+="form input {padding: 0.7em;margin-bottom: 0.5rem;}",d+="form input:focus {outline: 3px solid gold;}",d+="@media (min-width: 400px) {form {grid-template-columns: 200px 1fr;grid-gap: 16px;}label {text-align: right;grid-column: 1 / 2;}input,button {grid-column: 2 / 3;}}",d+="</style>",d+='<form class="form1" action="">',d+='<label for="dd" class="date">Date de d\xE9but</label>',d+='<input id="dd" type="date" max="2030-12-31" min="2010-12-31">',d+='<label for="df" class="date">Date de fin</label>',d+='<input id="df" type="date" max="2030-12-31" min="2010-12-31">',d+="</form>";var[t,e]=await Ot(dayjs().startOf("month"),dayjs().endOf("month")),s=await et.calculateBill(t,e);Ce.isInOldMode(t)?Fo(t,e,s):Ro(t,e,s)};var Fo=function(d,t,e){let s=e.get(0,0,0,0),n=4;var o="",l=null,c=0,m=0,f=0,p=[[4,"Groupe"],[1,"Niveau 1"],[2,"Niveau 2"],[3,"Niveau 3"]],a=0,b=0,y=!1,v=0,x=0,E=0,O=0,T=0,D=0,S=0,A=0,w=0,u=0,C=0,g=0,M=0,L=0,k=0,N=0,I=0,$=0,P=1;e.toConsole(),o+="<style>.wrapper{  display: grid;grid-gap: 10px;grid-template-column: 1fr 1fr;}</style>",o+='<div class="wrapper">',o+="<table>",o+="<thead>",o+="<tr>",o+='<th>Type</th><th><abbr title="nombre">nb</abbr></th><th>PU(<abbr title="hors taxes">HT</abbr>)</th><th>Total(<abbr title="hors taxes">HT</abbr>)</th>',o+="</tr>",o+="</thead>",o+="<tbody>",o+="<tr>",o+='<th colspan="4" class="pseudoheader" scope="colgroup">Sessions de Mentorat</th>',o+="</tr>";for(var a=performance.now();P<=n;)_i0=e.get(q,se,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(q,se,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(q,se,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : r\xE9alis\xE9es</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),_i0=e.get(q,ae,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(q,ae,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(q,ae,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : annul\xE9es</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),_i0=e.get(q,ne,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(q,ne,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(q,ne,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : annul\xE9es tard.</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),_i0=e.get(q,de,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(q,de,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(q,de,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : \xE9tudiant abs.</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),P+=1;var b=performance.now();console.log("%cCalculate first array"+(b-a)+" milliseconds.",We),o+="<tr>",o+="<td>Total</td>",o+=`<td>${c}</td><td></td><td>${m}\u20AC</td>`,o+="</tr>",o+="<tr>",o+="</tr>",f+=m,c=0,m=0,o+="<tr>",o+='<th colspan="4" class="pseudoheader" scope="colgroup">Sessions de Soutenance</th>',o+="</tr>",P=1;for(var a=performance.now();P<=n;)_i0=e.get(Q,se,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(Q,se,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(Q,se,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : r\xE9alis\xE9es</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),_i0=e.get(Q,ae,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(Q,ae,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(Q,ae,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : annul\xE9es</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),_i0=e.get(Q,ne,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(Q,ne,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(Q,ne,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : annul\xE9es tard.</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),_i0=e.get(Q,de,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(Q,de,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(Q,de,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : \xE9tudiant abs.</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),P+=1;var b=performance.now();console.log("%cCalculate second array"+(b-a)+" milliseconds.",We),o+="<tr>",o+="<td>Total</td>",o+=`<td>${c}</td><td></td><td>${m}\u20AC</td>`,o+="</tr>",o+="<tr>",o+="</tr>",f+=m,c=0,m=0,o+="<tr>",o+='<th colspan="4" class="pseudoheader" scope="colgroup">Sessions de Coaching</th>',o+="</tr>",P=1;for(var a=performance.now();P<=n;)_i0=e.get(z,se,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(z,se,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(z,se,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : r\xE9alis\xE9es</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),_i0=e.get(z,ae,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(z,ae,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(z,ae,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : annul\xE9es</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),_i0=e.get(z,ne,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(z,ne,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(z,ne,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : annul\xE9es tard.</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),_i0=e.get(z,de,Z,P),u=_i0===void 0?0:_i0.number,N=_i0===void 0?0:_i0.amount,_i0=e.get(z,de,X,P),C=_i0===void 0?0:_i0.number,I=_i0===void 0?0:_i0.amount,_i0=e.get(z,de,ee,P),g=_i0===void 0?0:_i0.number,$=_i0===void 0?0:_i0.amount,M=u>0?N/u:N,L=C>0?I/C:I,k=g>0?$/g:$,(y===!0||u+C+g>0)&&(c+=u,c+=C,c+=g,m+=N,m+=I,m+=$,o+="<tr>",o+=`<td>Niveau ${P} : \xE9tudiant abs.</td>`,o+=`<td>${u+C+g}</td><td>${L}</td><td>${N+I+$}\u20AC</td>`,o+="</tr>"),P+=1;var b=performance.now();console.log("%cCalculate third array"+(b-a)+" milliseconds.",We),o+="<tr>",o+="<td>Total</td>",o+=`<td>${c}</td><td></td><td>${m}\u20AC</td>`,o+="</tr>",o+="<tr>",o+="</tr>",f+=m,o+="<tr>",o+='<th colspan="4" class="pseudoheader" scope="colgroup">Total G\xE9n\xE9ral</th>',o+="</tr>",o+=`<td colspan="3"></td><td>${f}\u20AC</td>`,o+="</tr>",o+="<tr>",o+="</tr>",o+="</tbody>",o+="<tfoot>",o+="</tfoot>",o+="</table>",o+=`<p>Soit un total g\xE9n\xE9ral \xE0 facturer de ${f}\u20AC`,Swal.fire({title:`<strong>Liste des formations tarif\xE9es du ${d.format("DD/MM/YYYY")} au ${t.format("DD/MM/YYYY")}</strong>`,html:o,showCloseButton:!0,focusConfirm:!1,position:"center-start",grow:"fullscreen"})},Ro=function(d,t,e){console.log("%cEnter computation bill",B);let s=!1;var n="",o=0,l=0,c=0,m=0,f=0,p=0,a=0,b=0,y=0,v=0,x=0,E=0;let O=e.get(0,0,0,0),T=O.maxLevel;var D=0,S=0,A=0,w=0,u=0,C=0,g=0,M=0,L=0,k=0,N=0,I=0,$=0,P=0,U=0,F=0,R=0,j=0,Y=1;n+="<style>.wrapper{  display: grid;grid-gap: 10px;grid-template-column: 1fr 1fr;}</style>",n+='<div class="wrapper">',n+="<table>",n+="<thead>",n+="<tr>",n+='<th rowspan="2">Type</th><th colspan="3" scope="colgroup">Auto Financ\xE9s</th><th colspan="3" scope="colgroup">Financ\xE9s</th><th colspan="3" scope="colgroup">Autres</th><th colspan="2" scope="colgroup">Total</th>',n+="</tr>",n+="<tr>",n+='<th><abbr title="nombre">Nb.</abbr></th><th><abbr title="prix unitaire">Pu.</abbt>(<abbr title="hors taxes">HT</abbr>)</th><th><abbr title="montant">Mt.</abbt>(<abbr title="hors taxes">HT</abbr>)</th>',n+='<th><abbr title="nombre">Nb.</abbr></th><th><abbr title="prix unitaire">Pu.</abbt>(<abbr title="hors taxes">HT</abbr>)</th><th><abbr title="montant">Mt.</abbt>(<abbr title="hors taxes">HT</abbr>)</th>',n+='<th><abbr title="nombre">Nb.</abbr></th><th><abbr title="prix unitaire">Pu.</abbt>(<abbr title="hors taxes">HT</abbr>)</th><th><abbr title="montant">Mt.</abbt>(<abbr title="hors taxes">HT</abbr>)</th>',n+='<th><abbr title="nombre">Nb.</abbr></th><th><abbr title="montant">Mt.</abbt>(<abbr title="hors taxes">HT</abbr>)</th>',n+="</tr>",n+="</thead>",n+="<tbody>",n+="<tr>",n+='<th colspan="12" class="pseudoheader" scope="colgroup">Sessions de mentorat</th>',n+="</tr>";for(var H=performance.now();Y<=T;)_i0=e.get(q,se,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(q,se,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(q,se,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : r\xE9alis\xE9es</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),_i0=e.get(q,ae,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(q,ae,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(q,ae,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : annul\xE9es</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),_i0=e.get(q,ne,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(q,ne,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(q,ne,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : annul\xE9es tard.</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),_i0=e.get(q,de,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(q,de,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(q,de,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : \xE9tud. absent</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),Y+=1;var te=performance.now();for(console.log("%cCalculate first array"+(te-H)+" milliseconds.",We),n+="<tr>",n+="<td>Total</td>",n+=`<td>${o}</td><td></td><td>${m}\u20AC</td>`,n+=`<td>${l}</td><td></td><td>${f}\u20AC</td>`,n+=`<td>${c}</td><td></td><td>${p}\u20AC</td>`,n+=`<td>${o+l+c}</td><td>${m+f+p}\u20AC</td>`,n+="</tr>",n+="<tr>",n+="</tr>",a+=o,b+=l,y+=c,v+=m,x+=f,E+=p,o=0,l=0,c=0,m=0,f=0,p=0,n+="<tr>",n+='<th colspan="12" class="pseudoheader" scope="colgroup">Sessions de Soutenance</th>',n+="</tr>",Y=1;Y<=T;)_i0=e.get(Q,se,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(Q,se,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(Q,se,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : r\xE9alis\xE9es</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),_i0=e.get(Q,ae,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(Q,ae,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(Q,ae,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : annul\xE9es</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),_i0=e.get(Q,ne,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(Q,ne,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(Q,ne,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : annul\xE9es tard.</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),_i0=e.get(Q,de,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(Q,de,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(Q,de,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : \xE9tud. absent</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),Y+=1;n+="<tr>",n+="<td>Total</td>",n+=`<td>${o}</td><td></td><td>${m}\u20AC</td>`,n+=`<td>${l}</td><td></td><td>${f}\u20AC</td>`,n+=`<td>${c}</td><td></td><td>${p}\u20AC</td>`,n+=`<td>${o+l+c}</td><td>${m+f+p}\u20AC</td>`,n+="</tr>",n+="<tr>",n+="</tr>",a+=o,b+=l,y+=c,v+=m,x+=f,E+=p,o=0,l=0,c=0,m=0,f=0,p=0,n+="<tr>",n+='<th colspan="12" class="pseudoheader" scope="colgroup">Sessions de Coaching</th>',n+="</tr>";for(var Y=1;Y<=T;)_i0=e.get(z,se,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(z,se,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(z,se,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : r\xE9alis\xE9es</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),_i0=e.get(z,ae,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(z,ae,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(z,ae,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : annul\xE9es</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),_i0=e.get(z,ne,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(z,ne,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(z,ne,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : annul\xE9es tard.</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),_i0=e.get(z,de,Z,Y),k=_i0===void 0?0:_i0.number,F=_i0===void 0?0:_i0.amount,_i0=e.get(z,de,X,Y),N=_i0===void 0?0:_i0.number,R=_i0===void 0?0:_i0.amount,_i0=e.get(z,de,ee,Y),I=_i0===void 0?0:_i0.number,j=_i0===void 0?0:_i0.amount,$=k>0?F/k:F,P=N>0?R/N:R,U=I>0?j/I:j,(s===!0||k+N+I>0)&&(o+=k,l+=N,c+=I,m+=F,f+=R,p+=j,n+="<tr>",n+=`<td>Niveau ${Y} : \xE9tud. absent</td>`,n+=`<td>${k}</td><td>${$}</td><td>${F}\u20AC</td>`,n+=`<td>${N}</td><td>${P}</td><td>${R}\u20AC</td>`,n+=`<td>${I}</td><td>${U}</td><td>${j}\u20AC</td>`,n+=`<td>${k+N+I}</td><td>${F+R+j}\u20AC</td>`,n+="</tr>"),Y+=1;a+=o,b+=l,y+=c,v+=m,x+=f,E+=p,n+="<tr>",n+="<td>Total</td>",n+=`<td>${o}</td><td></td><td>${m}\u20AC</td>`,n+=`<td>${l}</td><td></td><td>${f}\u20AC</td>`,n+=`<td>${c}</td><td></td><td>${p}\u20AC</td>`,n+=`<td>${o+l+c}</td><td>${m+f+p}\u20AC</td>`,n+="</tr>",n+="<tr>",n+="</tr>",n+="</tbody>",n+="<tfoot>",n+="</tfoot>",n+="</table>";var ue=0,re="";let he=O.flatFee.length;for(var J=0;J<he;J+=1)ue+=30,re+=O.flatFee[J].who_name+", ";he>1?n+=`<p class="flat_fee">Calcul du forfait "autofinanc\xE9". Ce mois ci ${he} \xE9tudiants ont eu au moins une session il s'agit de : ${re.slice(0,-1)}`:n+=`<p class="flat_fee">Calcul du forfait "autofinanc\xE9". Ce mois ci ${he} \xE9tudiant a eu au moins une session il s'agit de : ${re.slice(0,-1)}`,n+=`. Le forfait est donc de ${ue}\u20AC</p>`,n+=`<p>Soit un total g\xE9n\xE9ral \xE0 facturer de ${v+x+E+ue}\u20AC</p>`,Swal.fire({title:`<strong>Liste des formations tarif\xE9es du ${d.format("DD/MM/YYYY")} au ${t.format("DD/MM/YYYY")}</strong>`,html:n,showCloseButton:!0,focusConfirm:!1,position:"center-start",grow:"fullscreen"})},br=async function(){var[d,t]=await Ot(dayjs().startOf("month"),dayjs().endOf("month"),!1);if(d===null||t===null)throw console.log("%cError need date from, date to",me),new Error;let e=Jt.getListStatistic(d,t),s="",n=new Array(22),o=Array.apply(null,Array(22)).map(Number.prototype.valueOf,0),l=d.clone(),c=l.endOf("month"),m="";n[0]="<thead><tr><th>Sessions</th>",n[1]="<tbody><tr><td>Sessions</td>",n[2]='<tr class="header"><td>Montant</td>',n[3]="<tr><td>Nb.",n[4]="<tr><td>Pu",n[5]='<tr class="header"><td>Soutenances</td>',n[6]="<tr><td>Montant</td>",n[7]="<tr><td>Nb.",n[8]="<tr><td>Pu",n[9]='<tr class="header"><td>Coaching</td>',n[10]="<tr><td>Montant</td>",n[11]="<tr><td>Nb.",n[12]="<tr><td>Pu",n[13]='<tr class="header"><td>Bonus</td>',n[14]="<tr><td>Bonus AF</td>",n[15]="<tr><td>Total G\xE9n\xE9ral</td>",n[16]='<tr class="header"><td>KPI</td>',n[17]="<tr><td>NbJrs</td>",n[18]="<tr><td>TJM</td>",n[19]="<tr><td>Nb hrs</td>",n[20]="<tr><td>THM</td>",n[21]="<tr><td>Nb hrs (p.)</td>",n[22]="<tr><td>THM (p)</td>";for(var f=0;f<e.length;f+=1){o[2]+=e[f].sessions.total,o[3]+=e[f].sessions.nb-e[f].sessions.nbc,o[4]+=e[f].sessions.pu,o[6]+=e[f].defenses.total,o[7]+=e[f].defenses.nb-e[f].defenses.nbc,o[8]+=e[f].defenses.pu,o[10]+=e[f].coaches.total,o[11]+=e[f].coaches.nb-e[f].coaches.nbc,o[12]+=e[f].coaches.pu,o[14]+=e[f].bonus;let p=e[f].sessions.total+e[f].defenses.total+e[f].coaches.total+e[f].bonus;o[15]+=p,o[16]+=e[f].kpi.jrs,o[18]+=e[f].kpi.hrs,o[20]+=e[f].kpi.hrsp,e.length==1&&(m="</tr>"),f===e.length-1&&e.length>1?c.isAfter(t,"day")?(o[2]-=e[f].sessions.total,o[3]-=e[f].sessions.nb-e[f].sessions.nbc,o[4]-=e[f].sessions.pu,o[6]-=e[f].defenses.total,o[7]-=e[f].defenses.nb-e[f].defenses.nbc,o[8]-=e[f].defenses.pu,o[10]-=e[f].coaches.total,o[11]-=e[f].coaches.nb-e[f].coaches.nbc,o[12]-=e[f].coaches.pu,o[14]-=e[f].bonus,o[15]-=p,o[16]-=e[f].kpi.jrs,o[18]-=e[f].kpi.hrs,o[20]-=e[f].kpi.hrsp,n[0]+=`<td>Total(moy)</td><td>${dayjs(e[f].header.dtTo).format("MMMM")}</td></thead></tr>`,n[1]+="<td>&nbsp;</td><td>&nbsp;</td></tr>",n[2]+=`<td>${o[2]} (${(o[2]/(e.length-1)).toFixed(2)})</td><td>${e[f].sessions.total}</td></tr>`,n[3]+=`<td>${o[3]} (${(o[3]/(e.length-1)).toFixed(2)})</td><td>${e[f].sessions.nb} (${e[f].sessions.nbc})</td></tr>`,n[4]+=`<td> n/a (${(o[4]/(e.length-1)).toFixed(2)})</td><td>${e[f].sessions.pu.toFixed(2)}</td></tr>`,n[5]+="<td>&nbsp;</td><td>&nbsp;</td></tr>",n[6]+=`<td>${o[6]} (${(o[6]/(e.length-1)).toFixed(2)})</td><td>${e[f].defenses.total}</td></tr>`,n[7]+=`<td>${o[7]} (${(o[7]/(e.length-1)).toFixed(2)})</td><td>${e[f].defenses.nb} (${e[f].defenses.nbc})</td></tr>`,n[8]+=`<td> n/a (${(o[8]/(e.length-1)).toFixed(2)})</td><td>${e[f].defenses.pu.toFixed(2)}</td></tr>`,n[9]+=`<td>&nbsp;</td>${m}`,n[10]+=`<td>${o[10]} (${(o[10]/(e.length-1)).toFixed(2)})</td><td>${e[f].coaches.total}</td></tr>`,n[11]+=`<td>${o[11]} (${(o[11]/(e.length-1)).toFixed(2)})</td><td>${e[f].coaches.nb} (${e[f].coaches.nbc})</td></tr>`,n[12]+=`<td> n/a (${(o[12]/(e.length-1)).toFixed(2)})</td><td>${e[f].coaches.pu.toFixed(2)}</td></tr>`,n[13]+="<td>&nbsp;</td></tr>",n[14]+=`<td>${o[14]} (${(o[14]/(e.length-1)).toFixed(2)})</td><td>${e[f].bonus}</td></tr>`,n[15]+=`<td>${o[15]} (${(o[15]/(e.length-1)).toFixed(2)})</td><td>${p}</td></tr>`,n[16]+="<td>&nbsp;</td></tr>",n[17]+=`<td>${o[16]} (${(o[16]/(e.length-1)).toFixed(2)})</td><td>${e[f].kpi.jrs}</td></tr>`,n[18]+=`<td> n/a (${(o[15]/o[16]).toFixed(2)})</td><td>${(p/e[f].kpi.jrs).toFixed(2)}</td></tr>`,n[19]+=`<td>${o[18]} (${(o[18]/(e.length-1)).toFixed(2)})</td><td>${e[f].kpi.hrs.toFixed(2)}</td></tr>`,n[20]+=`<td> n/a  (${(o[15]/o[18]).toFixed(2)})</td><td>${(p/e[f].kpi.hrs).toFixed(2)}</td></tr>`,n[21]+=`<td>${o[20].toFixed(2)} (${(o[20]/(e.length-1)).toFixed(2)})</td><td>${e[f].kpi.hrsp.toFixed(2)}</td></tr>`,n[22]+=`<td> n/a  (${(o[15]/o[20]).toFixed(2)})</td><td>${(p/e[f].kpi.hrsp).toFixed(2)}</td></tr>`):(n[0]+=`<td>${dayjs(e[f].header.dtTo).format("MMMM")}</td><td>Tot.</td></thead></tr>`,n[1]+="<td>&nbsp;</td><td>&nbsp;</td></tr>",n[2]+=`<td>${e[f].sessions.total}</td><td>${o[2]} (${(o[2]/e.length).toFixed(2)})</td></tr>`,n[3]+=`<td>${e[f].sessions.nb} (${e[f].sessions.nbc})</td><td>${o[3]} (${(o[3]/e.length).toFixed(2)})</td></tr>`,n[4]+=`<td>${e[f].sessions.pu.toFixed(2)}</td><td> n/a (${(o[4]/e.length).toFixed(2)})</td></tr>`,n[5]+="<td>&nbsp;</td><td>&nbsp;</td></tr>",n[6]+=`<td>${e[f].defenses.total}</td><td>${o[6]} (${(o[6]/e.length).toFixed(2)})</td></tr>`,n[7]+=`<td>${e[f].defenses.nb} (${e[f].defenses.nbc})</td><td>${o[7]} (${(o[7]/e.length).toFixed(2)})</td></tr>`,n[8]+=`<td>${e[f].defenses.pu.toFixed(2)}</td><td> n/a (${(o[8]/e.length).toFixed(2)})</td></tr>`,n[9]+=`<td>&nbsp;</td>${m}`,n[10]+=`<td>${e[f].coaches.total}</td><td>${o[10]} (${(o[10]/e.length).toFixed(2)})</td></tr>`,n[11]+=`<td>${e[f].coaches.nb} (${e[f].coaches.nbc})</td><td>${o[11]} (${(o[11]/e.length).toFixed(2)})</td></tr>`,n[12]+=`<td>${e[f].coaches.pu.toFixed(2)}</td><td> n/a (${(o[12]/e.length).toFixed(2)})</td></tr>`,n[13]+="<td>&nbsp;</td></tr>",n[14]+=`<td>${e[f].bonus}</td><td>${o[14]} (${(o[14]/e.length).toFixed(2)})</td></tr>`,n[15]+=`<td>${p}</td><td>${o[15]} (${(o[15]/e.length).toFixed(2)})</td></tr>`,n[16]+="<td>&nbsp;</td></tr>",n[17]+=`<td>${e[f].kpi.jrs}</td><td>${o[16]} (${(o[16]/e.length).toFixed(2)})</td></tr>`,n[18]+=`<td>${(p/e[f].kpi.jrs).toFixed(2)}</td><td> n/a (${(o[15]/o[16]).toFixed(2)})</td></tr>`,n[19]+=`<td>${e[f].kpi.hrs.toFixed(2)}</td><td>${o[18]} (${(o[18]/e.length).toFixed(2)})</td></tr>`,n[20]+=`<td>${(p/e[f].kpi.hrs).toFixed(2)}</td><td> n/a  (${(o[15]/o[18]).toFixed(2)})</td></tr>`,n[21]+=`<td>${e[f].kpi.hrsp.toFixed(2)}</td><td>${o[20].toFixed(2)} (${(o[20]/e.length).toFixed(2)})</td></tr>`,n[22]+=`<td>${(p/e[f].kpi.hrsp).toFixed(2)}</td><td> n/a  (${(o[15]/o[20]).toFixed(2)})</td></tr>`):(n[0]+=`<td>${dayjs(e[f].header.dtTo).format("MMMM")}</td>${m}`,n[1]+=`<td>&nbsp;</td>${m}`,n[2]+=`<td>${e[f].sessions.total}</td>${m}`,n[3]+=`<td>${e[f].sessions.nb} (${e[f].sessions.nbc})</td>${m}`,n[4]+=`<td>${e[f].sessions.pu.toFixed(2)}</td>${m}`,n[5]+=`<td>&nbsp;</td>${m}`,n[6]+=`<td>${e[f].defenses.total}</td>${m}`,n[7]+=`<td>${e[f].defenses.nb} (${e[f].defenses.nbc})</td>${m}`,n[8]+=`<td>${e[f].defenses.pu.toFixed(2)}</td>${m}`,n[9]+=`<td>&nbsp;</td>${m}`,n[10]+=`<td>${e[f].coaches.total}</td>${m}`,n[11]+=`<td>${e[f].coaches.nb} (${e[f].coaches.nbc})</td>${m}`,n[12]+=`<td>${e[f].coaches.pu.toFixed(2)}</td>${m}`,n[13]+=`<td>&nbsp;</td>${m}`,n[14]+=`<td>${e[f].bonus}</td>${m}`,n[15]+=`<td>${p}</td>${m}`,n[16]+=`<td>&nbsp;</td>${m}`,n[17]+=`<td>${e[f].kpi.jrs}</td>${m}`,n[18]+=`<td>${(p/e[f].kpi.jrs).toFixed(2)}</td>${m}`,n[19]+=`<td>${e[f].kpi.hrs.toFixed(2)}</td>${m}`,n[20]+=`<td>${(p/e[f].kpi.hrs).toFixed(2)}</td>${m}`,n[21]+=`<td>${e[f].kpi.hrsp.toFixed(2)}</td>${m}`,n[22]+=`<td>${(p/e[f].kpi.hrsp).toFixed(2)}</td>${m}`),l=l.add(1,"month"),c=l.endOf("month")}s="<table>"+n.join(" ")+`</tbody><tfoot><tr><td colspan=${e.length+1}>la valeur entre parenth\xE8se fait reference aux annul\xE9s</td></tr></tfoot></table>`,Swal.fire({title:`<strong>Statistiques du ${d.format("DD/MM/YYYY")} au ${t.format("DD/MM/YYYY")}</strong>`,icon:"info",html:s,showCloseButton:!0,focusConfirm:!1,position:"center-start",grow:"fullscreen",onOpen:p=>{}})};var Ue=class{},Gt=Ue;G(Gt,"init",function(){console.log("%cin initUI",B),Ue.build();var t=new Draggabilly(".draggable",{handle:".handle"})}),G(Gt,"build",function(){console.log("%c in buildUI","background-color:green;color:white"),GM_addStyle(`
.flow > * + * {
  margin-top: var(--flow-space, 1em);
}
		`),GM_addStyle(".panel {/* because of stacking context : https://stackoverflow.com/questions/5218927/z-index-not-working-with-fixed-positioning */position: relative;z-index: 666; /*seems that 4 is good*/}"),GM_addStyle(".menuBar {padding:7px;/*for handler*/font-size: 1rem; pointer-events: inherit;}"),GM_addStyle(".draggable {background: transparent;border-radius: 10px;padding: 20px;}"),GM_addStyle(".draggable.is-pointer-down {background: #09F;}"),GM_addStyle(".draggable.is-dragging { opacity: 0.7; }"),GM_addStyle(".handle {background: #555;background: hsla(0, 0%, 0%, 0.4);width: 20px;height: 20px; border-radius: 10px; position: relative; top:10px; left:-10px;}"),GM_addStyle(`
.menuBar{
/*Smol Responsive CSS Grid*/
--min: 15ch;
--gap: 1rem;
display: grid;
grid-gap: var(--gap);
/* min() with 100% prevents overflow
in extra narrow spaces */
grid-template-columns: repeat(auto-fit, minmax(min(100%, var(--min)), 1fr)); /* 20 px is size of handle*/ 
}
		`);var t=document.createElement("div"),e=document.createElement("div");e.classList.add("handle"),t.appendChild(e),t.classList.add("panel","draggable"),document.body.insertAdjacentElement("beforeend",t),t.setAttribute("style",`top:-${document.body.offsetHeight-t.offsetHeight}px`);var s=document.createElement("div");s.classList.add("menuBar"),t.appendChild(s),Ue.addButton("collectChecked",pr,{},s),Ue.addButton("CollectAuto",fr,{},s),Ue.addButton("showBill",yr,{},s),Ue.addButton("billInDetails",cr,{},s),Ue.addButton("PDF",hr,{},s),Ue.addButton("SList",_e.showList,{},s),Ue.addButton("DbgMode",mr,{},s),Ue.addButton("statistics",br,{},s),Ue.addButton("Database",gr,{},s),Ue.addButton("about",qt,{},s);let n=document.createElement("div"),o=n.style;n.id="sttPlaceHolder";let l={position:"absolute",bottom:"7%",left:"4%","z-index":999,display:"hidden"};document.body.insertAdjacentElement("beforeend",n),Object.keys(l).forEach(c=>o[c]=l[c])}),G(Gt,"addButton",function(t,e,s,n){n=n||document.body,s=s||{position:"absolute",bottom:"7%",left:"4%","z-index":3};let o=document.createElement("button"),l=o.style;return o.classList.add("button--primary","button"),n.appendChild(o),o.innerHTML=t,o.onclick=e,Object.keys(s).forEach(c=>l[c]=s[c]),o});var bn=class{};G(bn,"start",function(t){let e=document.getElementById(t),s=m=>e.style.transform=`translateX(${m}px)`,n=0,o=7,l=m=>{s(n),n+=o,n>100?requestAnimationFrame(c):requestAnimationFrame(l)},c=m=>{s(n),n-=o,n<-100?requestAnimationFrame(l):requestAnimationFrame(c)};return requestAnimationFrame(l)}),G(bn,"stop",function(t){window.cancelAnimationFrame(t)});var vr=Gt;var Ho="#OCAddonsCfg {background-color: lightblue;} #OCAddonsCfg .reset_holder {float: left; position: relative; bottom: -1em;} #OCAddonsCfg .saveclose_buttons {margin: .7em;}",Uo="height: 16.7em; width: 30em; border: 1px solid; border-radius: 3px; position: fixed; z-index: 999;";var wr={id:"OCAddonsCfg",title:"Configuration du module",fields:{nbHrsAfM:{section:["Statistiques","param\xE8tres"],label:"Nombre de minutes pour une session d'\xE9tudiant auto financ\xE9",title:"Dur\xE9e moyenne d'une session AF (calcul du THM)",labelPos:"left",type:"input",default:30},nbHrsfM:{label:"Nombre de minutes pour une session d'\xE9tudiant financ\xE9",title:"Dur\xE9e moyenne d'une session Financ\xE9e (calcul du THM)",labelPos:"left",type:"input",default:45},nbHrsS:{label:"Nombre de minutes pour une session (avant 01/07/2020)",title:"Dur\xE9e moyenne d'une session avant la s\xE9paration auto financ\xE9 | financ\xE9 (calcul du THM)",labelPos:"left",type:"input",default:45},nbHrsD:{label:"Nombre de minutes pour une session de soutenance",title:"Dur\xE9e moyenne d'une sessionde soutenance AF (calcul du THM)",labelPos:"left",type:"input",default:45},nbHrsC:{label:"Nombre de minutes pour une session de coaching",title:"Dur\xE9e moyenne d'une session de coachine (calcul du THM)",labelPos:"left",type:"input",default:45},maxfetchpg:{section:["Application","optimisation"],label:"Maximum de page recherch\xE9es dans l'historique",labelPos:"left",type:"input",default:1e3},datacachelifetime:{label:"Temps de conservation des donn\xE9es dans le cache (en ms)",labelPos:"left",type:"input",default:12e4},checksessionalreadyexists:{section:["Application","Base de donn\xE9e"],label:"sessions: v\xE9rifier existence avant insertion",labelPos:"left",type:"checkbox",default:!0},sizeofcontentlist:{section:["Interface","th\xE8me"],label:"taille de la police des listes",labelPos:"left",type:"input",default:"1em;"},use_custom_css:{label:"utiliser des styles personnalis\xE9s",labelPos:"left",type:"checkbox",default:!1},custom_css_url:{label:"url de la feuille de style (si plusieurs les s\xE9parer par des virgules)",labelPos:"left",type:"input",default:""},custom_css_data:{label:"code css \xE0 injecter ?",title:"saisir ici le code css \xE0 injecter directement dans la page web g\xE9n\xE9r\xE9e",labelPos:"left",type:"input",default:""},alwaysaddcbox:{section:["Interface","Gadget"],label:"Toujours ajouter les checkbox sur l'interface",labelPos:"left",type:"checkbox",default:!0},hackheaderzindex:{section:["","Hack"],label:"Changer le zindex du bandeau haut",title:"le bandeau haut \xE0 un z-index  (1000) qui le place au dessus de tout ce qui est pr\xE9sent \xE0 l'\xE9cran, ce qui g\xEAne la barre de menu ; activer cette option r\xE9duit ce chiffre \xE0 0",labelPos:"left",type:"checkbox",default:!0},use_student_cache:{section:["Avanc\xE9es",""],label:"Utiliser le cache \xE9tudiant",title:"Lorsque l' application recherche si un \xE9tudiant est pr\xE9sent on utilise un cache pour \xE9viter de passer trop de temps dans les requ\xEAtes, d\xE9sactiver le cache permettra de toujours faire une requete en base ",labelPos:"left",type:"checkbox",default:!0},support:{section:["","Support"],label:"StephaneTy-Pro.github.io",title:"more info on https://github.com/StephaneTy-Pro",type:"button",click:()=>{GM_openInTab("https://github.com/StephaneTy-Pro/OC-Mentors-AccountAddon",{active:!0,insert:!0,setParent:!0})}}},css:Ho,events:{save:function(){GM_config.close()}}},vn=function(){GM_config.open(),OCAddonsCfg.style=Uo};var _n=class{};G(_n,"longTaskTiming",function(){if(window.self===window.top){console.log("LongTasks: Initializing");var t=new window.PerformanceObserver(function(e){for(var s=e.getEntries(),n=0;n<s.length;n++)console.log("LongTasks: ",s[n].name,s[n].duration,s[n].attribution.length,s[n].attribution.length>0?s[n].attribution[0].containerType:null,s[n].attribution.length>0?s[n].attribution[0].containerName:null,s[n].attribution.length>0?s[n].attribution[0].containerSrc:null,s[n].attribution.length>0?s[n].attribution[0].containerId:null,s[n])});typeof window.PerformanceLongTaskTiming!="undefined"?console.log("LongTasks: Appears to be supported"):console.log("LongTasks: Not supported");try{t.observe({entryTypes:["longtask"]})}catch(e){console.log("LongTasks: Not supported")}}}),G(_n,"paintTiming",function(){if(window.self===window.top){console.log("PaintTiming: Initializing");var t=new window.PerformanceObserver(function(e){for(var s=e.getEntries(),n=0;n<s.length;n++)console.log("PaintTiming: ",s[n].name,s[n].startTime)});if(typeof window.PerformancePaintTiming!="undefined")console.log("PaintTiming: Appears to be supported");else{console.log("PaintTiming: Not supported");return}try{t.observe({entryTypes:["paint"],buffered:!0})}catch(e){console.log("PaintTiming: Not supported")}}});var wn=function(d,t,e,s,n,o,l){o=t.createElement(e),l=t.getElementsByTagName(e)[0],o.appendChild(t.createTextNode(s.text)),o.onload=n(s),l?l.parentNode.insertBefore(o,l):t.head.appendChild(o)};var qo=function(d,t){if(!arguments.length)return Promise.reject(new ReferenceError("Failed to execute 'fetchInject': 1 argument required but only 0 present."));if(arguments[0]&&arguments[0].constructor!==Array)return Promise.reject(new TypeError("Failed to execute 'fetchInject': argument 1 must be of type 'Array'."));if(arguments[1]&&arguments[1].constructor!==Promise)return Promise.reject(new TypeError("Failed to execute 'fetchInject': argument 2 must be of type 'Promise'."));let e=[],s=t?[].concat(t):[],n=[];return d.forEach(o=>s.push(window.fetch(o).then(l=>[l.clone().text(),l.blob()]).then(l=>Promise.all(l).then(c=>{e.push({text:c[0],blob:c[1]})})))),Promise.all(s).then(()=>(e.forEach(o=>{n.push({then:l=>{o.blob.type.includes("text/css")?wn(window,document,"style",o,l):wn(window,document,"script",o,l)}})}),Promise.all(n)))},Ct=qo;var bd=function(d,t,e){"use strict";if(!d.MutationObserver||typeof HTMLElement=="undefined")return;var s=0,n=function(){var v=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(x,E){return x instanceof HTMLElement&&v.call(x,E)},addMethod:function(x,E,O){var T=x[E];x[E]=function(){if(O.length==arguments.length)return O.apply(this,arguments);if(typeof T=="function")return T.apply(this,arguments)}},callCallbacks:function(x,E){E&&E.options.onceOnly&&E.firedElems.length==1&&(x=[x[0]]);for(var O=0,T;T=x[O];O++)T&&T.callback&&T.callback.call(T.elem,T.elem);E&&E.options.onceOnly&&E.firedElems.length==1&&E.me.unbindEventWithSelectorAndCallback.call(E.target,E.selector,E.callback)},checkChildNodesRecursively:function(x,E,O,T){for(var D=0,S;S=x[D];D++)O(S,E,T)&&T.push({callback:E.callback,elem:S}),S.childNodes.length>0&&n.checkChildNodesRecursively(S.childNodes,E,O,T)},mergeArrays:function(x,E){var O={},T;for(T in x)x.hasOwnProperty(T)&&(O[T]=x[T]);for(T in E)E.hasOwnProperty(T)&&(O[T]=E[T]);return O},toElementsArray:function(x){return typeof x!="undefined"&&(typeof x.length!="number"||x===d)&&(x=[x]),x}}}(),o=function(){var v=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return v.prototype.addEvent=function(x,E,O,T){var D={target:x,selector:E,options:O,callback:T,firedElems:[]};return this._beforeAdding&&this._beforeAdding(D),this._eventsBucket.push(D),D},v.prototype.removeEvent=function(x){for(var E=this._eventsBucket.length-1,O;O=this._eventsBucket[E];E--)if(x(O)){this._beforeRemoving&&this._beforeRemoving(O);var T=this._eventsBucket.splice(E,1);T&&T.length&&(T[0].callback=null)}},v.prototype.beforeAdding=function(x){this._beforeAdding=x},v.prototype.beforeRemoving=function(x){this._beforeRemoving=x},v}(),l=function(v,x){var E=new o,O=this,T={fireOnAttributesModification:!1};return E.beforeAdding(function(D){var S=D.target,A;(S===d.document||S===d)&&(S=document.getElementsByTagName("html")[0]),A=new MutationObserver(function(u){x.call(this,u,D)});var w=v(D.options);A.observe(S,w),D.observer=A,D.me=O}),E.beforeRemoving(function(D){D.observer.disconnect()}),this.bindEvent=function(D,S,A){S=n.mergeArrays(T,S);for(var w=n.toElementsArray(this),u=0;u<w.length;u++)E.addEvent(w[u],D,S,A)},this.unbindEvent=function(){var D=n.toElementsArray(this);E.removeEvent(function(S){for(var A=0;A<D.length;A++)if(this===e||S.target===D[A])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(D){var S=n.toElementsArray(this),A=D,w;typeof D=="function"?w=function(u){for(var C=0;C<S.length;C++)if((this===e||u.target===S[C])&&u.callback===A)return!0;return!1}:w=function(u){for(var C=0;C<S.length;C++)if((this===e||u.target===S[C])&&u.selector===D)return!0;return!1},E.removeEvent(w)},this.unbindEventWithSelectorAndCallback=function(D,S){var A=n.toElementsArray(this);E.removeEvent(function(w){for(var u=0;u<A.length;u++)if((this===e||w.target===A[u])&&w.selector===D&&w.callback===S)return!0;return!1})},this},c=function(){var v={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};function x(D){var S={attributes:!1,childList:!0,subtree:!0};return D.fireOnAttributesModification&&(S.attributes=!0),S}function E(D,S){D.forEach(function(A){var w=A.addedNodes,u=A.target,C=[],g;w!==null&&w.length>0?n.checkChildNodesRecursively(w,S,O,C):A.type==="attributes"&&O(u,S,C)&&C.push({callback:S.callback,elem:u}),n.callCallbacks(C,S)})}function O(D,S,A){return n.matchesSelector(D,S.selector)&&(D._id===e&&(D._id=s++),S.firedElems.indexOf(D._id)==-1)?(S.firedElems.push(D._id),!0):!1}f=new l(x,E);var T=f.bindEvent;return f.bindEvent=function(D,S,A){typeof A=="undefined"?(A=S,S=v):S=n.mergeArrays(v,S);var w=n.toElementsArray(this);if(S.existing){for(var u=[],C=0;C<w.length;C++)for(var g=w[C].querySelectorAll(D),M=0;M<g.length;M++)u.push({callback:A,elem:g[M]});if(S.onceOnly&&u.length)return A.call(u[0].elem,u[0].elem);setTimeout(n.callCallbacks,1,u)}T.call(this,D,S,A)},f},m=function(){var v={};function x(){var D={childList:!0,subtree:!0};return D}function E(D,S){D.forEach(function(A){var w=A.removedNodes,u=[];w!==null&&w.length>0&&n.checkChildNodesRecursively(w,S,O,u),n.callCallbacks(u,S)})}function O(D,S){return n.matchesSelector(D,S.selector)}p=new l(x,E);var T=p.bindEvent;return p.bindEvent=function(D,S,A){typeof A=="undefined"?(A=S,S=v):S=n.mergeArrays(v,S),T.call(this,D,S,A)},p},f=new c,p=new m;function a(v,x,E){n.addMethod(x,E,v.unbindEvent),n.addMethod(x,E,v.unbindEventWithSelectorOrCallback),n.addMethod(x,E,v.unbindEventWithSelectorAndCallback)}function b(v){v.arrive=f.bindEvent,a(f,v,"unbindArrive"),v.leave=p.bindEvent,a(p,v,"unbindLeave")}t&&b(t.fn),b(HTMLElement.prototype),b(NodeList.prototype),b(HTMLCollection.prototype),b(HTMLDocument.prototype),b(Window.prototype);var y={};return a(f,y,"unbindAllArrive"),a(p,y,"unbindAllLeave"),y}(window,typeof jQuery=="undefined"?null:jQuery,void 0);var Sr={data:"DwCwLgtgNgfAUKApgQwCb2BRZkAIDGIyATgM7YC8ARAK5gBmAtABxUYCEjjuADgPY1iARxp8AlrjEA7fFEGJcURKUViARitSIaAD1z1xKgPy5GMXgOIWaAN3FWlKgFYDEVxFNwQ+W3KRxSqMhQfFIKXBik+MRiPGB+xPjU4GA8pABcAPSZ+KhSAHROpFpQYjbE+WFgmVI8EJmkAO6I2MFuYABMAAIAjAAMbMAN0bFgkSNxCUlUKWlZmTS1ANYA5vn4fPVBAJ5FvfnM+R09mTtF+RDShaRUuFr0brgwQ1ExcRxcuNZWAJIAoj0eqYzAhXqMpskwKkMtlcgUiiUyhUqpkViBMsEeNJEEUMVAsWEujYOvkdKTTmJ-HiCYhGGJEIDrrd7m5nsM3mMEJxuPxBIplLhkHRiAKpMgbGIVsgwNoyMDxhyITMoXNYXlrojypVsKj0Zjsbj9YTiaTyahKdUjYgmWywe84KCwNslPA1D5trgAN5wL4GKRgRj0ZCXKDbdK4KgAeR4HlwAGVkFIbgAaUzIHg8JSMUjbfyICCpgBCpSkSwAssh8HHczKIAAxUJgVNUOOIFZ8BQAVR+VFTACU+G6wHxU5GdNsVh5GAmk6nO2pFmAaKmAMKJnAiqBQZsACUQUBs2DE+DwADltIhe7g9wejyfUwBBGLBVOkROkbNuMT0ADcuDgAC+CANE6LrASAKDoA6wBuqg2zwAg5o2AQUDIKQpDULWmbSpeGAUjYCGghMnJwI00ioHwjT5CyxAADJ8Gg0grA++LYrgFD6Is+BgGIoS4AAFCeW5qJWSwAJRenAACQUkbEmfBKPkIQrPxVA0YoDHmlIKxUGJP4+l8hlfGRgSUfkaCoH8h7+rRFoeG4-EAORNMEjmpvQXE8Xx-GIBJ3pGUZsmhKQCnWspqmINZ8TOY0rm4CK+CIGUiCoKmFEEMEUAifgSy6fpAWGUF8mKeFvn5QVAVCVlon8XpBkFQBdUVQQwWhUpfAqY5kUePE5BgI5TWGQB+lySFJUdapNH0Yx2ksTSfjYDKqB5XAHkyF5niTmAnbEFAABqJCkLVklGTYJC4GdcocZ6w31Rd508CQYAqBxJkUVRIQnht+QgCK9D5CK2GJfxmQANpGAAZAAugA1PxoMAHoUNDMNiRQ8MI9DABUYmomI7mebxUj8QWSyINsyZnXIvknRVl2kKDZPbFD7H3dT5VfI1HPxdggiePT+lAathN8VtO1QAACiQwb8Y9xDBtgbhpYgQY0FAYBUzQvn+YZl24II+LS1gMpWBx9xCurmuINz378W9ZmfdKRM-X9+TkYgOiRvQstG4rxASeYjA9GJOsFQbcsKybrNi7tB1kLVoMR8bbhQ9zRlAUZIpLsQnjh77JuCw6esURAfaQR6HFrdxRMCX50lZ3zuBhI0uAS8QmyUog-EimNh7seY3oyd+AkUfgNBYP6APl3GOAyuxHFUCEM06XXMlSaP489eZqCWVFtl5mExCqQAIpGZYro2PXTVoy2pj3CmHmJ0lSQBuD7uQklr-ft61fpMlAS-J+t04D8TQtsGQx0KAD2kqNNq4UqAAFJ8D5HyP4J6V4qAbBCMQdIGx5ZQBWlJZAsUxDxBLmXNA2xf4wNauNFSiDch8HwJIFQIpKEYKwXwHBeDgiEP4DwGgPBqFFTGmFCaDCUH5A8LfCMnDuFcN4XVKSgExLULgJkLGPosb6x4qUJ0nF1o1xoOQVAkhTFnBUJSRy-p9YmK0f+XA2ivgNxzgQQQIobFBBlKmR6O8Uq4DImAEAuA+iSHoE3FoN8tGZDgHrLaAAVCCx8cLsSrhtY6g80k118fxUgfkebZ08Lk3AwBcD9AkiYRyfRHK4Bhn4XA4ZSB-gAcXVmzdcDJJlLVeuvNXGg1QPkLadY1ZQAAJooCPhJHxaB+IDK2mWRsIBaow2DtM1AszBnYE6V3MSYkoaFHEMTRyjABqASLg9PgAieCszATIAx1dQi1UHsPfiToYx8HCXGWKUBcDsAoBxRyWTQgDUHiItqbh25HwYT8YgCU+CHnlmoJQb9YVcIwdlVY7dFioEYHI9IIpUp4qRaJQhUkXFSD-i-aS2RgR3AAJf0GkKQmuWgVD7nzD1FQGwIAQEWKQalORgq9RlGkVmoNHI9DcrgRyHQpWOQAMyOShtJJQwrECio4uKyVyYZVKpoUmXq3yACKWstYz3VazL5wQLhiB0NIfioKAD6WE44ZCbiM5MBkZJyUZcQCAhY6DDikPEj2YBwyOTjDQMo65cAQ3lrCn8bkvWyUTIlKAAaoShBDToMN0q250vwHSrQNiIaoQTUmr4MkeDtxWD3Ug5q5h+BFaQT1layXdTIIgDNQa3VgGIFrVtuAZJUzEF4omZZlBvknOGlcChCDBlFcoeIIoRBWM9TJc0qBoweHDECop3gghQFXmvWBdDVKSKtVAdIm7t1SFJTJe2VFzSkEemAQgVker8WfmvdpK5jHDggB+-0TkXJQCld+mSnpcALjUEi5Q4Y+0DruK0MQV6vS4BlDm8MUYADS+RbivwAWvKST9iNKJfqmZ+ZEty3t3SLYm2tv2nrEfQi93z0jUagLe0lAF13r1HWXQIbg6OGO8ge4IIcIPMfaqxtjwRr0CekW4e9UlH3UUpK+99UV+K-v-ZsIDYAQPfKlVBmDcHe39sQMrHAqHwxQcw7myB5gHMkBQPkK2uBCO7OfrxqjqGoArhCOQETDzibiaPaC71tCWPnskfkS9HH-OBb4OQHjfHN3JeC-c9J4XJPEek-AuLKCEsZaC5ecjvmN2juPku9uYZstExJj4CTkWwVnqoEV4r7HN01f8HVtLz9pJc2kvq-wbMtYvVwKDVOKrsBuNhT1Btf9RvxEemEKAjrGggFCpGYgrYlDcVZqCniYBkVSXDSahQdg1aIAAF4XQECoN8tg2wkC0MQJNMlwDQCMuGAABs-YAShJyBBgCubblJKTkHu2BulMpAhayGMD6R8AZLAEZfuVAfVUdSWAEhFCaEMJUAMH62to62CA+kAI+Io7qCEHEIlW4YosB04h4zjD2wYzJFHcW24VtqBSBGYMbkRBAjIoXJmzwshjxLAIGz8IIIZLxIEPED2-BiAmxgoGvitOqDvmaMQHozJpTIEYJWDa1A1dcLAI6zKtxZCE+oKBjo2ZQIpVuG8xA1AJdBrYJGHDQwfehBx3GOlUAC0bUPvyFQOBzNa8l2Y6g+u3AdGNzgM3oXLc6HVzb0Il4CfoSd98l3-hnTu451zqgQe70wH94H7XUgcdDAx1ALH2Am+ohiFBGSf2+PVsQBfKQvqIAhfScgVMahkz4GTKlGmn8ovFRi+Pyf0-Z-kakqq3Azr8w8Fdd+vtHpWvb4gLvw6rMABScZIynnyHLcgsymGb0niINw2x9uIG4lwpyoNmde8wfLqgKGAadzYILWdfKSWEaLGTVSENE-dIK8Y-U-MgdfV+L6QgHyY9GSSAxfaAv7JBP4HQRKOIGuAAEk9EQAAl72lTxR4SgB-AxVrQEECFxQUi4XxRSgGkpRkkvVQW20aAOlKDHVCAnXQmQEnH4j+wnUSAkF8Hp0hysEWAUFZWQ10FwEuQ2lID+3APJX0GCHIC4KIzaxi0v2v1v0Oi7g3gnjAHyBf2IDf3ZU-yPkch-wVlZwZ0vCALEhAOpl2S4OyFtk9w+S3xdTP3+QBWxRVmxFQBqQAB8Yjgid9XV54OJBctw8sh5vYEiT8kiwj3U0jWseDSA+CBDR0nZhDJ0xCu5JC3B8AZC50IdSAxAFCwhkNNBtA9B1CiZNDtDelPAgwoB9Dv1X5v1sDRFcCkFYCkCWFcAyDEDXVKDkxMFWD5F8F70dDPQ8weB0gehUwrZ0g5jDohZ-4+MNFn4nArtkBKRkM7AmjeAnpbjSA+RFDkMZRQs7hHI6VrIOUbE5smhSFCBHhHiHBHJFg1CaBFBHIhQ+0lCBR2UrC2jFA8AX8tY34+jQhQsziFAYxVCtBXio5UIWoDU7j1tNttslBdt39uJUxzivAupPByANc7h0TvheB25HpJwHAFBiA6VHj1ZpRcBJFcAABzvAFov0ULFox6FQZ+LGGJB9fzWjBrbyfcTAgrcROTK9Tjbjdfb9fcGwrWOwyk4cJw-IEnCAMnaIrwiyAzfeeHByRyaXHKKVR1UXVAJQU2JUhjSTKTKA8KPA-AAzXAeJEgLacMMg60DcLaBYpY7BXBBRAhcAn0okq3DXFiDbc3GuSuejHyGwMAdIteW2SKawyM7AC4aUAEo6RyavfpE3DPC3KgFMm3O3Tw-Mk9X0iaf0ggnPXAB8WiWiOXdw3vGMtg2glTLAzINbfcUknbPbBw6wg4q6aVRs23LcRyP8GlDYNWPIRyeIYxBQUhCDGSIs9YdxHqYM4gLafU1-I0r-Zw3-Nw48Dw4AjzDiEwm-PrJib8KhT0PYhs7Pa3FcghRqQ8iA04RABcFYDkrgmSIdHgx0pYQfYfYRYjIdQwmSclaC26fLIVN+f8jXSMMIW3N4rM0TBjXM1sqSQs3M-IEs6ww8iAcsiCSs6srxU3DM0ILPHPR1PPQAgaCi0CycjbLbGco0-IBcybLqPC3PMINc3ADcgQVvKQHc2xfcsAEC48seBbf0c8y82w+wg7Y07-e8--dw3irwl83AN81BPtT8+gb8385cni4C4jKSIdNUlSf0n4JMdoQUJtC1fk-gRojaBpGYz0HgraS7M1EVZZHoaMmg+Msc2C75N2byjXSKxABtH2EkrbaUZXBMQ8ZMcK7AdKzKsSFZUjFyzY0gVBTMR8-iIqsAEq6KsqnYkJVMCVNQTgkCng6QBkxq01DK6KwSx1M06UQq5KiKga0qmGDoCq4jKqmq0oYGBqpq9VZZDoVMPodqnofALqlyoybITfR1NQMATwDiBqxCpo-1BvZCteIdbIY6069YJapYW6mCqSOCl6y6v1N6l+f8YjDCiDLCteDRQUN40hRxOUteRstMoi9JMqCDRsgixAOGxrBGteYbf+IbB0ERVbRMKcnKsAPK8UBQa6Z+E7M7C7FE67JQe7a7J7IUQ8KUYgd7T7KSb7KAc7XAAHNePHMoZNKSHQRgVi6gUOIdGSWPRwOzO6NtKSHoOzMxcMfoVMMAJFdIZyJcYtZ6KVBzcNP4TWsQdcUgGpXzAqNeDoBW0dcMDoLajDNW5ySdLonW0NcNVsdCJ2zzQdQKGSeVS21AcMeVW21Wq9DWmgLW0gF0i0LhbYZ2rDaVHcKOmIF-FQOHMOw2-0Y2z2mW8WqSAAFj9vDFzqDvtpAETu2EdXIHdtCEdRPABNjtzUcgrGEBRPZIUErsaOChNq9sKhkgAFYC7cBe7i6Q7jZkB67w1j5QgpA6UWgVB0xaqvpkpM7Tae6qVZaAIqBv0cdcc1Z4BZbgBuQeYxsgisJUI54Ig7pebT6cJs614haSdqBQZR1djQDEAWZpBcBIw1BzjuIpF-QYhlBXlkBzMxJN6zaZJ0gmZqBydL6ZI96ApebSh4Hva0cqc6AK8-8ASco3QdBbh0hdcrY3ZloGljLCHg6+dX7qAKdwG0dUI1B9wGkH6qBCHydcAhaHNqAyHQ1BhMg6H9xkHV6kcxABHebMhr6ZRt7ccFhYBv0hgkIcde9n5+9vqR9a5+559QLBQY8IIRRpi8AsGlgcGAlSFgkpA+AzFJAvB-19BUMo4ddTFhw+AmMcLuLLUJrsAJZLlBFaorzDS5yuE0zv9PcKADGcGoYn7UBPCuDN8JAOJuKlIPAVgglUxbdYU2lEAW4nx5YqExA9J-qZISd+I-wxAuA-xUniAn6WZrorbuLKmiHUxf99i+A6nf8p8IIcoUomm6mDGUpMb0Lej0NNj0gNrxtEBwxymiMAEsLRo8aSSvFSb58KbEAuaqBLstwBR5mUxn4OauaebcdS8wIsDtEhJpEAGrA0B0wwA6VkNcBZgYRBVsFSg1B1hNhMhsB8BMgRQVgzSHmuEnnGAvmzTGAOhe7MhbmVR7m5EnmXmthKIpAl5UBMgegABOVFsF2U5+DRPhqAaiHCdIdIZAegKOT0OSeHXNKgAAHUQGYHlQADYqAfxArmVQhwxNwnZDwfwlAiXC6+geAdAfxhwtjB6+WfwAIMWCmuEIAvRn1sJ6sLTGWLImIlb8x6DRJGDsVwwABiegZFnVnV+grhd7JWvlvwBSUdXATV-AHa61n8Bii86Qa2kUKVqE8x0JF1215AIWsiVAIJcMWlvoXl-l3xLSFYZViAUV5+M0yQWodBz0BgrFQILV+gZNg1lm4TMpE1sac1zV5F-AXN3NiNiVv1aDBvL0eNpg-21QNEMAWtcmBVneJVkJfIAAdhVe9d9bKQDYQVTaNZCULakijer3SG2wRTLbVYTcrfbFb37ajexa9GDcbb6HyF7vzCbZXalaXfXb7aIyjbQfiE9AXe0nDCXdbfDbtZWGkEYCHAA2PeXadZnclejep3SAMDHhUE9BVxLDGdwHlUzbNdMSndQH7a6CwHNDwBJkvfbZAB5cDb8lNMldtx3j4k9AtMYHEdpCwXHiTGtoDZNZ6HoGIB-FQ6lCFZ6FpZFdfng79UQ4ok8Dnc9AczN1KBWCkFZclHACI67xYLkAgFY7KTktwA6FFYFLNJo51xjabBE4Q4sj4mry9FQ8w94+toE-lVFaIxeDdyb13dQGoD7AfAAC17dUJC9idpOkO70wb6yKdUGJOMHWcP9DG+BcHE8q8jS082LM8qA+oK65yjB7d2myZu9cc52mH8A1AjTdtTw+AwA2BQ8DKiYo9nieA6UYgfAFAjAkdgH+HAcQuuFqAfW6x24IAjPHc1IcI2BtkbnUA6UJdMv6GZGbPqcXOCuiuPdOc-95nbgGKdBqAbbA6g4Xd5UjcvBpBeu+h+gBvGAhv3O6yiYndsBHV5mRrWu7hazUJtIaBKiKBAUPsm9cviB8uia+ASuTPOuYBKvfBGUpA6vsvGv0HdcfXlc2vK9OuvBPWxv+uehBvhvLgpAxuJuvupvhvWLZuOKvOFulvhwZv1uVhNvJxtuCPHIO8zSm8X1EwYAouZRwxkVGV1ZdGgTETVu54WjShLg54X9o8Foq6kwClLBp7lAXg1sFG+8RQVHwwnMNHv01BzwUpKuzZH8rDNkwA-glArDCxtgfh1kqyjTgCemgPv0WvNhWZLCt4toRfviwBxfJenJFeIBnzX6uDHvzH+ex5Be1fReeotepfdf9f2Zv1v1bZufIk+f-kMNLNY0IYBI7gwBCulfciqBbg4jvfldkiIxdJcBWzCjijghSiNoRCp0qipDaibnSAw8P9I9Hhnj5mwT6UNgASYd9G0IYS-A0-QstDoKdD+jBiMb8nlEv4BnWshn5VKNiM9jQZDyVfJ5zeNerenJwu5zZeAuUo+M15O-rDu+xeJfrefeivgDn1gGlBTFcjEN0u8iflwwx+hf1fJ-tfHIbfzLX6R+N0BfVfsBt-Lep+deju5-KQF--Fl-3eTBUj1+mTTfT-heLf-Re+9-r+D-qYINlUGNSlJVn4xboYwfHHyEenUZi1AoepPSjeRNKicZOSlK0jvBtJ2RD4TkedNpEQDOlXS7pVmHugwIwCKouNBaGAG2S+8IAqNPiCRVCw5k8yrWSit7GPK0Uyyb6Jit-hB7sU-u4PG3EtwI6bAzKFFTfBYlZh1hzcggekBUCebVUru6yY3uYD4BEN540qCxHtWIy2wxBuRCIldxSj8V3KqkJBD8D7B9g-gK4SMHtD+B6dCwtEP4LgGsF9hIwfYXAKeD+B-Bj4PZFcCuD+Bxg4wQZSMPGDPj2CHwEsCWLRB+ArgHw8SH4NflwB7QHwfYOML2BApVlx2FbbjmwQJR-giUqEHKImhArgF+mhSaClShcraDVuuwaqnEGIAd8T+XfM-p-016X8f+yuW3iiQ4ggULED+N-g0I-498Wh+-bwmARAp-0t03sRyN4H9AgBgCo1QzFQFGSLDRkjAMsGWEYDHxj4Y5KSOQCgD-RxKYqT0IINUab8J+F-XfkMKtgq0+A16eoeP0aEDDzhv-YYRQUAEoU0K7aEoUDWgpJkxsfUB8HBjypzk+enpBgRRSorFkQypZBihwMAbOFuBnnbzjsPT5+cWyTAoyEdTUDK9bhW-Jod-374GVB+DnFKKUPXjYjThX-QYTP02A383wcGJfr8i3xqAuhZI+4Tv2n5tCvC8-OkazHYCMjDyaFYGkc0s41wIa4rNeH1EoFFcaBXpaCn8IBF8AjS2yDAmnAqjDZmoB1QVDgXgRIJQgt6CwFcg4TLE4yqxQaKqO7pGRSsKWb9pAIkhQJaY6ogKHAINL6V0+t5KjtQOQHAEnW8KRAOgIPgOR-8iYScAgVFyt43ApogKJViGx-wZmxJKcnMKOzk1SElNaVGs30CStpQbNHZv9kBxIQBaQtEWlQDFprxJa8Ge0avXlroYranbdyBmLDSOQigwKFWi7WlSNilKWdGhhbSrGVsbatYv1NKHVr4BSANgcetQWHFd1b6MkWBmvRzob0t6sjXegLQPqfAe48QE+jvjPoK4RGaOdDpOMFqBg8uVACJi-Wpjv1PAX9H+tYR6gAMjopYvJGAwQYQMoGVAGBigwEb70kGe43HHuzs7-4HOODPBgQ1fpEM8GpDYCXMIobUwqG74nOsFyy7r8mGLDYhuw1DScNgJDmHhtixgmiNPxKDIYOh0kZDBFxojeRoNh7ws8B8oQYfOz1tHQIQaYLNCBhh0b7k56cuf8U52MZBIm45jc1hIF5RjZcedjTwOa0cY-D4grjc6u4zACeMrkPjeAf42ICBNnCwTUJk53CajoomEGGJqzHiZKBtIyTLfCQA9LtIsmyAHJnkwgyFNimpTQybCkqZHYamzTMQPsmfpNwFYXTZyZUAVhtMiR-tWpp5Ll59NihjcKDEM1zonitY4zIyYYSmbLZthxqKaiKivJax4YSjfGkJTJKIAKSc5PvOlMW44R10UMLwkEg8D8QBIPcNWHmWgHPxRBjqY+CJA-gcQJB3EKQW4HyBLBjOcg8iPxEUFqEVBrvRyPVKL4aCtBdUhqaTVd66Coi+ZQwdClMHmDLB1gh8LYPsGODnBrg9wZ4IfDeDfB-g+JIEKvxlgQhYQiIVEJiFxCEhSQlIWvDSE5R1WzBPFNkJaixliUOUY2t+nXyA0saG6MaUX2V6-TyAt+PtM-BeQVT1YzwzAjSj7TvgzSjwMDIOHOKq5PA5oCUpcRFDfojqKM1mGDOsKEMCUNAYGKAmTA6BaJAkT0JInHxTYyQmxKGOGDJBWxGoqYG6BJChnywkwUbBGenwwzmMUZQaMUHYQEhMx0gmxCKWMythzVN8pAHcJACgDUApSNzbkryVngMsMZc2XXm0g9TB9jea-LgiMTBaNF+QcuBdJoBSRLpUSa-VMASWz5KUzZ8s6tJ3HNnco4giAB3uEn4iLdjwoMeVOEz6BVNXeK-TAuvCpFSspIcTFGV7PCY9AZsxGI3kOjDmezvZoMDoNHLbJaiOySCHng43MZ7kieCgMgrr1fjcB85R3BYrIiNGjkUC9vAspkQ9n4BQYUcj3l8Frn1z9kL5V3n+S4p24Q4clMFg2jKQQYaUOc0uioATH0MTwOciGrFG0YKA88KlUxB-StACQScb8MBC1B4DbA5qZAu8YmJcqVioM1Y5WnbRDr+Aw6nKUcY5H1pp0jaE4lyl2P3k9jh66tduk7WbFx0I0jtTulnRcq+1uxAdR+aHXDqR1-A0dc+QnWAVJ0JsuAVOmBwzo3ziM+dX+bgCLoq0S6ZdHztTxrqVgII58puhT1bpU8O6SYOBWvH7qIKh6KCkeq0HPmT0pA9PAUPPSWrstlAxCmcbLSOr3YOIF49Pn-RsqAM7xLMsFoU14nnjv63C68fSFvF388kIcQwXeIiZFTX4HiG4goGeIQpZQ7xd2HoD-DIpe6b8MbPLL7QCAbAdKLSb8S7LW4qGf4SyV-j1hiAKAjqW7Ak30kgAg4xTGABQD6DWTGAIg34sGTgyngFYOk27JUxbk0UkUpQ2aZxlwo54rwpAPxUoACVYAihpAcxYyRhivkr875GytpC-IOpSxws+JYgESVWZWK16AGdaEbLxIkUyuN8rkkKXFK0owcxpcrjEhBSyh4o6WdAEsUQYpZMs9JX9mAB4AHucLBFrcF+gqx8uJudIA5gnKoRpAP4edJ2jAAUA6ATAZgMmHDIyA0unYPsJEM2D8AwgwGFJVJVaXMgRlmkTigBTIIJIkkOEWqABGuChA2Ay5a5dgESSIAlRrSx5ddwxAwA-s0FbIL0ugD9LgAPAGAFc3DyLLJwVhG5i8s9BmMqIcwpyEsNGSrCNhA0B5W2MdmWBqqkiIYGCv+Vrwhib8AYgoCgw0pmgASRMGKGiXW5fKSIt4ifTv4DzeGFobGcoEqnPCyyQiPQHaIdSJgxADFNDDoEajgEaUnwUsdzNpUa5TF4k27BQGmzQVJZIqR1I2R0nhzk5Vi7CmnJUi1zN5EGNQA2H7FgA3y6qz2bnX2TyCypvU5Qb-lUENiQoKA9YEP1QAGqjV0IlcHGD2hfB45dci1aaW6lqF1GtqwJQNKHEjivCcvCDI73dXShPVe0CioUyOp2LbajqCABQE2KqqpKTipJiAB-COoxAwANNWUzEAwxUYTAowtAUzWNlQYBaoqSSNtjVqpKtagKS6v4pSQHFt+YxEslr4uVPQNTfGCBQ3RTKPAGwLQDsr2Un488wGVAOUqkRSUqlUAZXPGtyQqqa1daryVgEaVUDmlfAXZEf2IyNMm1OeFtfslaZDqpILYh0uOIvXvCZIRQ9pRjSBrRrvYhqusW+UTVf5k1HilJumuPXW4c1QSfNYWuLVb5S15akCoYP-Ua5T1D6xtWuubUbq5e7aztQIiKJlSL1-avyYOpcqj8R1Wy8dbsovhTrDlhmKyh+RyV2VZkc6ypdUr4C1LoNYAU9Zuqsze8d1Ws3ZGJAPU-p3JjG5jeetw1Hk35bYxyLeqHUPr3hAoiDD0s6WyyqAwAXeirOIxJq5sBan9VvilZxNHFek3NSWqLXhswNZanxb1DrCoYiloa7mnCocX8aFYAER1K8qJq3KukXy2YsEo3WhpKCh5IFVAH6WHkgcwjECoMua7nK0AYyv6JMpwDTLQ0syy4hSkWV9QVlDAFgBss9DWaN1rFOcYJvejwsLlVAMgqQFM0JLbNbAVzTZqwAAR+IpW9zTmmcq4bAtvyvzayr+XPr5qsm9JfJukYwAlNWNb2jwV9RdwSBEtZMd+0cimbCA0glQCsDpTT1FZ7ACtI+I5o5jmodfNHPI3y2yaAIcjMoNhKkiKNwGPqK6t2izRXr6Ih4UMHNtgZ9MpmdUV+IZGAh2hOQged0HhA5rwAgAA",method:"decompressFromEncodedURIComponent"};var Ar=function(){var d=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function n(l,c){if(!s[l]){s[l]={};for(var m=0;m<l.length;m++)s[l][l.charAt(m)]=m}return s[l][c]}var o={compressToBase64:function(l){if(l==null)return"";var c=o._compress(l,6,function(m){return t.charAt(m)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:o._decompress(l.length,32,function(c){return n(t,l.charAt(c))})},compressToUTF16:function(l){return l==null?"":o._compress(l,15,function(c){return d(c+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:o._decompress(l.length,16384,function(c){return l.charCodeAt(c)-32})},compressToUint8Array:function(l){for(var c=o.compress(l),m=new Uint8Array(c.length*2),f=0,p=c.length;f<p;f++){var a=c.charCodeAt(f);m[f*2]=a>>>8,m[f*2+1]=a%256}return m},decompressFromUint8Array:function(l){if(l==null)return o.decompress(l);for(var c=new Array(l.length/2),m=0,f=c.length;m<f;m++)c[m]=l[m*2]*256+l[m*2+1];var p=[];return c.forEach(function(a){p.push(d(a))}),o.decompress(p.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":o._compress(l,6,function(c){return e.charAt(c)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),o._decompress(l.length,32,function(c){return n(e,l.charAt(c))}))},compress:function(l){return o._compress(l,16,function(c){return d(c)})},_compress:function(l,c,m){if(l==null)return"";var f,p,a={},b={},y="",v="",x="",E=2,O=3,T=2,D=[],S=0,A=0,w;for(w=0;w<l.length;w+=1)if(y=l.charAt(w),Object.prototype.hasOwnProperty.call(a,y)||(a[y]=O++,b[y]=!0),v=x+y,Object.prototype.hasOwnProperty.call(a,v))x=v;else{if(Object.prototype.hasOwnProperty.call(b,x)){if(x.charCodeAt(0)<256){for(f=0;f<T;f++)S=S<<1,A==c-1?(A=0,D.push(m(S)),S=0):A++;for(p=x.charCodeAt(0),f=0;f<8;f++)S=S<<1|p&1,A==c-1?(A=0,D.push(m(S)),S=0):A++,p=p>>1}else{for(p=1,f=0;f<T;f++)S=S<<1|p,A==c-1?(A=0,D.push(m(S)),S=0):A++,p=0;for(p=x.charCodeAt(0),f=0;f<16;f++)S=S<<1|p&1,A==c-1?(A=0,D.push(m(S)),S=0):A++,p=p>>1}E--,E==0&&(E=Math.pow(2,T),T++),delete b[x]}else for(p=a[x],f=0;f<T;f++)S=S<<1|p&1,A==c-1?(A=0,D.push(m(S)),S=0):A++,p=p>>1;E--,E==0&&(E=Math.pow(2,T),T++),a[v]=O++,x=String(y)}if(x!==""){if(Object.prototype.hasOwnProperty.call(b,x)){if(x.charCodeAt(0)<256){for(f=0;f<T;f++)S=S<<1,A==c-1?(A=0,D.push(m(S)),S=0):A++;for(p=x.charCodeAt(0),f=0;f<8;f++)S=S<<1|p&1,A==c-1?(A=0,D.push(m(S)),S=0):A++,p=p>>1}else{for(p=1,f=0;f<T;f++)S=S<<1|p,A==c-1?(A=0,D.push(m(S)),S=0):A++,p=0;for(p=x.charCodeAt(0),f=0;f<16;f++)S=S<<1|p&1,A==c-1?(A=0,D.push(m(S)),S=0):A++,p=p>>1}E--,E==0&&(E=Math.pow(2,T),T++),delete b[x]}else for(p=a[x],f=0;f<T;f++)S=S<<1|p&1,A==c-1?(A=0,D.push(m(S)),S=0):A++,p=p>>1;E--,E==0&&(E=Math.pow(2,T),T++)}for(p=2,f=0;f<T;f++)S=S<<1|p&1,A==c-1?(A=0,D.push(m(S)),S=0):A++,p=p>>1;for(;;)if(S=S<<1,A==c-1){D.push(m(S));break}else A++;return D.join("")},decompress:function(l){return l==null?"":l==""?null:o._decompress(l.length,32768,function(c){return l.charCodeAt(c)})},_decompress:function(l,c,m){var f=[],p,a=4,b=4,y=3,v="",x=[],E,O,T,D,S,A,w,u={val:m(0),position:c,index:1};for(E=0;E<3;E+=1)f[E]=E;for(T=0,S=Math.pow(2,2),A=1;A!=S;)D=u.val&u.position,u.position>>=1,u.position==0&&(u.position=c,u.val=m(u.index++)),T|=(D>0?1:0)*A,A<<=1;switch(p=T){case 0:for(T=0,S=Math.pow(2,8),A=1;A!=S;)D=u.val&u.position,u.position>>=1,u.position==0&&(u.position=c,u.val=m(u.index++)),T|=(D>0?1:0)*A,A<<=1;w=d(T);break;case 1:for(T=0,S=Math.pow(2,16),A=1;A!=S;)D=u.val&u.position,u.position>>=1,u.position==0&&(u.position=c,u.val=m(u.index++)),T|=(D>0?1:0)*A,A<<=1;w=d(T);break;case 2:return""}for(f[3]=w,O=w,x.push(w);;){if(u.index>l)return"";for(T=0,S=Math.pow(2,y),A=1;A!=S;)D=u.val&u.position,u.position>>=1,u.position==0&&(u.position=c,u.val=m(u.index++)),T|=(D>0?1:0)*A,A<<=1;switch(w=T){case 0:for(T=0,S=Math.pow(2,8),A=1;A!=S;)D=u.val&u.position,u.position>>=1,u.position==0&&(u.position=c,u.val=m(u.index++)),T|=(D>0?1:0)*A,A<<=1;f[b++]=d(T),w=b-1,a--;break;case 1:for(T=0,S=Math.pow(2,16),A=1;A!=S;)D=u.val&u.position,u.position>>=1,u.position==0&&(u.position=c,u.val=m(u.index++)),T|=(D>0?1:0)*A,A<<=1;f[b++]=d(T),w=b-1,a--;break;case 2:return x.join("")}if(a==0&&(a=Math.pow(2,y),y++),f[w])v=f[w];else if(w===b)v=O+O.charAt(0);else return null;x.push(v),f[b++]=O+v.charAt(0),a--,O=v,a==0&&(a=Math.pow(2,y),y++)}}};return o}();var Go=function(){var d=[{id:"/views/test-swal-sauvegarde",path:"views",file:"test-swal-sauvegarde",ptr:Sr}],t=function(e){oCurView=d.find(o=>o.id==e),oCurView===void 0&&console.log(`%cError view ${e} could't be found`,me),oCurView=oCurView.ptr;let s=oCurView.data;return Ar[oCurView.method](s)};return Object.freeze({load:t})},Vo=Go(),Er=Vo;var Qo=Object.create,Sn=Object.defineProperty,zo=Object.getOwnPropertyDescriptor,Wo=Object.getOwnPropertyNames,Ko=Object.getPrototypeOf,Jo=Object.prototype.hasOwnProperty,Zo=d=>Sn(d,"__esModule",{value:!0}),Xo=(d,t)=>function(){return t||(0,d[Object.keys(d)[0]])((t={exports:{}}).exports,t),t.exports},ei=(d,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Wo(t))!Jo.call(d,s)&&s!=="default"&&Sn(d,s,{get:()=>t[s],enumerable:!(e=zo(t,s))||e.enumerable});return d},ti=d=>ei(Zo(Sn(d!=null?Qo(Ko(d)):{},"default",d&&d.__esModule&&"default"in d?{get:()=>d.default,enumerable:!0}:{value:d,enumerable:!0})),d),ni=Xo({"vendor/cross-fetch.js"(d){(function(t){(function(e){var s="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(g){return!1}}(),l="FormData"in t,c="ArrayBuffer"in t;if(c)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(g){return g&&m.indexOf(Object.prototype.toString.call(g))>-1};function p(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(g))throw new TypeError("Invalid character in header field name");return g.toLowerCase()}function a(g){return typeof g!="string"&&(g=String(g)),g}function b(g){var M={next:function(){var L=g.shift();return{done:L===void 0,value:L}}};return n&&(M[Symbol.iterator]=function(){return M}),M}function y(g){this.map={},g instanceof y?g.forEach(function(M,L){this.append(L,M)},this):Array.isArray(g)?g.forEach(function(M){this.append(M[0],M[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(M){this.append(M,g[M])},this)}function v(g){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}function x(g){return new Promise(function(M,L){g.onload=function(){M(g.result)},g.onerror=function(){L(g.error)}})}function E(g){var M=new FileReader,L=x(M);return M.readAsArrayBuffer(g),L}function O(g){if(g.slice)return g.slice(0);var M=new Uint8Array(g.byteLength);return M.set(new Uint8Array(g)),M.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(g){var M;this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:o&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:l&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:s&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():c&&o&&(M=g)&&DataView.prototype.isPrototypeOf(M)?(this._bodyArrayBuffer=O(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(g)||f(g))?this._bodyArrayBuffer=O(g):this._bodyText=g=Object.prototype.toString.call(g):this._bodyText="",this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var g=v(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(E)}),this.text=function(){var g,M,L,k=v(this);if(k)return k;if(this._bodyBlob)return g=this._bodyBlob,M=new FileReader,L=x(M),M.readAsText(g),L;if(this._bodyArrayBuffer)return Promise.resolve(function(N){for(var I=new Uint8Array(N),$=new Array(I.length),P=0;P<I.length;P++)$[P]=String.fromCharCode(I[P]);return $.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}y.prototype.append=function(g,M){g=p(g),M=a(M);var L=this.map[g];this.map[g]=L?L+", "+M:M},y.prototype.delete=function(g){delete this.map[p(g)]},y.prototype.get=function(g){return g=p(g),this.has(g)?this.map[g]:null},y.prototype.has=function(g){return this.map.hasOwnProperty(p(g))},y.prototype.set=function(g,M){this.map[p(g)]=a(M)},y.prototype.forEach=function(g,M){for(var L in this.map)this.map.hasOwnProperty(L)&&g.call(M,this.map[L],L,this)},y.prototype.keys=function(){var g=[];return this.forEach(function(M,L){g.push(L)}),b(g)},y.prototype.values=function(){var g=[];return this.forEach(function(M){g.push(M)}),b(g)},y.prototype.entries=function(){var g=[];return this.forEach(function(M,L){g.push([L,M])}),b(g)},n&&(y.prototype[Symbol.iterator]=y.prototype.entries);var D=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function S(g,M){var L,k,N=(M=M||{}).body;if(g instanceof S){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,M.headers||(this.headers=new y(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,N||g._bodyInit==null||(N=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=M.credentials||this.credentials||"same-origin",!M.headers&&this.headers||(this.headers=new y(M.headers)),this.method=(L=M.method||this.method||"GET",k=L.toUpperCase(),D.indexOf(k)>-1?k:L),this.mode=M.mode||this.mode||null,this.signal=M.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&N)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(N)}function A(g){var M=new FormData;return g.trim().split("&").forEach(function(L){if(L){var k=L.split("="),N=k.shift().replace(/\+/g," "),I=k.join("=").replace(/\+/g," ");M.append(decodeURIComponent(N),decodeURIComponent(I))}}),M}function w(g,M){M||(M={}),this.type="default",this.status=M.status===void 0?200:M.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in M?M.statusText:"OK",this.headers=new y(M.headers),this.url=M.url||"",this._initBody(g)}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})},T.call(S.prototype),T.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},w.error=function(){var g=new w(null,{status:0,statusText:""});return g.type="error",g};var u=[301,302,303,307,308];w.redirect=function(g,M){if(u.indexOf(M)===-1)throw new RangeError("Invalid status code");return new w(null,{status:M,headers:{location:g}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(g){e.DOMException=function(M,L){this.message=M,this.name=L;var k=Error(M);this.stack=k.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function C(g,M){return new Promise(function(L,k){var N=new S(g,M);if(N.signal&&N.signal.aborted)return k(new e.DOMException("Aborted","AbortError"));var I=new XMLHttpRequest;function $(){I.abort()}I.onload=function(){var P,U,F={status:I.status,statusText:I.statusText,headers:(P=I.getAllResponseHeaders()||"",U=new y,P.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(j){var Y=j.split(":"),H=Y.shift().trim();if(H){var te=Y.join(":").trim();U.append(H,te)}}),U)};F.url="responseURL"in I?I.responseURL:F.headers.get("X-Request-URL");var R="response"in I?I.response:I.responseText;L(new w(R,F))},I.onerror=function(){k(new TypeError("Network request failed"))},I.ontimeout=function(){k(new TypeError("Network request failed"))},I.onabort=function(){k(new e.DOMException("Aborted","AbortError"))},I.open(N.method,N.url,!0),N.credentials==="include"?I.withCredentials=!0:N.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&o&&(I.responseType="blob"),N.headers.forEach(function(P,U){I.setRequestHeader(U,P)}),N.signal&&(N.signal.addEventListener("abort",$),I.onreadystatechange=function(){I.readyState===4&&N.signal.removeEventListener("abort",$)}),I.send(N._bodyInit===void 0?null:N._bodyInit)})}C.polyfill=!0,t.fetch||(t.fetch=C,t.Headers=y,t.Request=S,t.Response=w),e.Headers=y,e.Request=S,e.Response=w,e.fetch=C,Object.defineProperty(e,"__esModule",{value:!0})})({})})(typeof self!="undefined"?self:d)}}),An={url:"",query:"",target:null,fetchSize:0,labels:[],rowTemplate:null,callback:null,reset:!1},xr={sql:"query",resetStatus:"reset",chunkSize:"fetchSize",rowHandler:"rowTemplate"},Cr={2014:{apiEndpoint:"https://docs.google.com/spreadsheets/d/%key%/gviz/tq?",keyFormat:new RegExp("spreadsheets/d/([^/#]+)","i"),gidFormat:new RegExp("gid=([^/&#]+)","i")},2010:{apiEndpoint:"https://spreadsheets.google.com/tq?key=%key%&",keyFormat:new RegExp("key=([^&#]+)","i"),gidFormat:new RegExp("gid=([^/&#]+)","i")}};function Tr(d){let t=d?d.f||d.v||d:"";return t instanceof Array&&(t=t.join("")),typeof t=="object"?"":`${t}`.replace(/^\s+|\s+$/,"")}function ri(d){let t=d;return typeof t=="object"&&t.jquery&&t.length&&([t]=t),t&&t.nodeType&&t.nodeType===1?t:null}function oi(d,t){d&&d.insertAdjacentHTML&&d.insertAdjacentHTML("beforeEnd",t)}function ii(d,t){return` ${d.className} `.indexOf(` ${t} `)!==-1}function si(d){return d&&d.tagName==="TABLE"}function Xt(d,t){return`<${t}>${d}</${t}>`}function ai(d){let t=d.num?"td":"th",e="";return Object.keys(d.cells).forEach(s=>{e+=Xt(d.cells[s],t)}),Xt(e,"tr")}function di(d,t){if(typeof Event=="function"){let e=new Event(t);d.dispatchEvent(e)}}var ct=class extends Error{constructor(d="",t=null){super();this.name="SheetrockError",this.code=t,this.message=d}};function li(d){let t={};return Object.keys(d).forEach(e=>{({}).hasOwnProperty.call(xr,e)?t[xr[e]]=d[e]:t[e]=d[e]}),t}function ui(d){let t={};if(t.target=ri(d.target),t.fetchSize=Math.max(0,parseInt(d.fetchSize,10)||0),!t.target&&!d.callback&&!An.callback)throw new ct("No element targeted or callback provided.");return{...An,...d,...t}}function ci(d,t){if(t)return{data:t};let e=null;if(Object.keys(Cr).forEach(s=>{let n=Cr[s];n.keyFormat.test(d.url)&&n.gidFormat.test(d.url)&&(e=n)}),e){let s=d.url.match(e.keyFormat)[1];return{key:s,gid:d.url.match(e.gidFormat)[1],apiEndpoint:e.apiEndpoint.replace("%key%",s)}}throw new ct("No key/gid in the provided URL.")}var fi=class{constructor(d={},t=!1){this.user=ui(li(d)),this.request=ci(this.user,t),this.requestIndex=`${this.request.key}_${this.request.gid}_${this.user.query}`}},Bt={defaults:{failed:!1,header:0,labels:null,loaded:!1,offset:0},store:{}},pi=class{constructor(d){if(this.options=d,this.index=d.requestIndex,this.state.failed)throw new ct("A previous request for this resource failed.");if(this.state.loaded)throw new ct("No more rows to load!")}get state(){let d={}.hasOwnProperty.call(Bt.store,this.index),t=this.options.user.reset||this.options.request.data;if(!d||t){let e={labels:d?Bt.store[this.index].labels:null};Bt.store[this.index]={...Bt.defaults,...e}}return Bt.store[this.index]}get url(){let d=this.options.user.fetchSize,t=d?` limit ${d+1} offset ${this.state.offset}`:"",e=[`gid=${encodeURIComponent(this.options.request.gid)}`,`tq=${encodeURIComponent(this.options.user.query+t)}`];return this.options.request.apiEndpoint+e.join("&")}update(d={}){Bt.store[this.index]=Object.assign(this.state,d)}},Dr=class{constructor(d,t,e){this.num=d,this.cellsArray=t.map(Tr),this.labels=e}get cells(){let d={};return this.labels.forEach((t,e)=>{d[t]=this.cellsArray[e]}),d}},mi=class{constructor(d){this.request=d,this.options=d.options}setAttributes(){let{fetchSize:d}=this.options.user,{rows:t}=this.raw.table,{cols:e}=this.raw.table,s={last:t.length-1,rowNumberOffset:this.request.state.header||0},n=this.request.state.labels;this.request.state.offset||(n=e.map((c,m)=>c.label?c.label.replace(/\s/g,""):(s.last+=1,s.rowNumberOffset=1,Tr(t[0].c[m])||c.id)),this.request.update({header:s.rowNumberOffset,labels:n,offset:this.request.state.offset+s.rowNumberOffset})),(!d||t.length-s.rowNumberOffset<d)&&(s.last+=1,this.request.update({loaded:!0}));let o=this.options.user.labels,l=o&&o.length===n.length;s.labels=l?o:n,this.attributes=s}setOutput(){this.rows=[],!this.request.state.offset&&!this.attributes.rowNumberOffset&&this.rows.push(new Dr(0,this.attributes.labels,this.attributes.labels)),this.raw.table.rows.forEach((d,t)=>{if(d.c&&t<this.attributes.last){let e=this.request.state.offset+t+1-this.attributes.rowNumberOffset;this.rows.push(new Dr(e,d.c,this.attributes.labels))}}),this.request.update({offset:this.request.state.offset+this.options.user.fetchSize})}setHTML(){let{target:d}=this.options.user;if(typeof d=="undefined"||d===null)return;let t=this.options.user.rowTemplate||ai,e=si(d),s=d&&ii(d,"sheetrock-header"),n="",o="";this.rows.forEach(l=>{l.num?o+=t(l):(e||s)&&(n+=t(l))}),e&&(n=Xt(n,"thead"),o=Xt(o,"tbody")),oi(d,n+o),di(d,"sheetrock:loaded"),this.html=n+o}loadData(d,t){this.raw=d;try{this.setAttributes(),this.setOutput()}catch(e){t(new ct("Unexpected API response format."));return}this.setHTML(),t(null)}},hi=ti(ni());function gi(d,t){let e={headers:{"X-DataSource-Auth":"true"}};(0,hi.default)(d.request.url,e).then(s=>{if(!s.ok)throw new ct("Request failed.",s.status);return s.text()}).then(s=>{let n=JSON.parse(s.replace(/^\)]\}'\n/,""));d.loadData(n,t)}).catch(s=>{if(s instanceof ct)return t(s);let n=s&&s.message?s.message:"Request failed.";return t(new ct(n,500))})}var Or=0;function yi(d,t){let e=window.document.getElementsByTagName("head")[0],s=window.document.createElement("script"),n=`_sheetrock_callback_${Or}`;Or+=1;function o(){e.removeChild(s),delete window[n]}function l(m){o(),d.loadData(m,t)}function c(){o(),t(new ct("Request failed."))}unsafeWindow[n]=l,s.addEventListener&&(s.addEventListener("error",c,!1),s.addEventListener("abort",c,!1)),s.type="text/javascript",s.src=`${d.request.url}&tqx=responseHandler:${n}`,e.appendChild(s)}var bi="1.2.0";function En(d={},t=null){let e=null,s=null,n=null;function o(l){if(l&&l.name==="SheetrockError"&&s&&s.update&&s.update({failed:!0}),d.callback){d.callback(l,e,n);return}if(l)throw l}try{e=new fi({target:this,...d},!!t),s=new pi(e),n=new mi(s)}catch(l){o(l)}return t?n.loadData(t,o):e&&s&&n&&(typeof window=="object"&&"document"in window?yi(n,o):gi(n,o)),this}Object.assign(En,{defaults:An,version:bi});try{window.jQuery.fn.sheetrock=En}catch(d){}var xn=En;var Mr="https://docs.google.com/spreadsheets/d/1hn8gBDB-7l02Gp0jAnFq15ogCjpDixKrsxLqAIk3Gt0/edit#gid=0",vi=function(){var d=function(s,n,o){if(!s)for(insert="",console.log("my callback"),console.dir(o),i=0;i<o.raw.table.rows.length;i++){for(insert="insert into data (`Team`,`Pos`,`First`,`Last`,`Bats`,`AB`,`R`,`H`,`HR`,`RBI`,`SB`,`BA`) values (",datos="",h=0;h<o.raw.table.rows[i].c.length;h++)o.raw.table.rows[i].c[h]==null?val="":val=o.raw.table.rows[i].c[h].v,datos+="'"+val+"'",h<o.raw.table.rows[i].c.length-1&&(datos+=",");insert+=datos,insert+=");",console.log(insert)}};return Object.freeze({test_1:function(){xn({url:Mr,query:"select A,B,C",callback:d},null)},test_dbg:function(){let s=!1;xn({url:Mr,callback:function(n,o,l){console.log(n,o,l)}},{});debugger}})},_i=vi(),Cn=_i;var ie={Cfg:{dbase:null},raf:null,cssMainDataSelector:Yt,ID_MENU_FORCE_LOADING:null,ID_MENU_FORCE_ADDTOLEFTMENU:null,ID_MENU_FORCE_BAR_ON_TOP:null,_isStarted:!1,start:async function(){if(console.log(`%cIn start check Facturier._isStarted: ${ie._isStarted}`,B),ie._isStarted===!0)return;await Pn();let d=ie.checkSupport();console.log(`%cAre all functions supported ? : ${d}`,B);var t="header [class*=MuiAvatar-img]";document.querySelector(t)===null?(console.log(`%c All condition not met, waiting element '${t}' `,B),document.arrive(t,ie._warmup),ie.ID_MENU_FORCE_LOADING=GM_registerMenuCommand("force - loading",ie._warmup),ie.ID_MENU_FORCE_ADDTOLEFTMENU=GM_registerMenuCommand("force - populate menuleft",ie._addLinkToMenu)):(console.log("%c All condition already met go",B),ie._warmup())},checkSupport:function(){return!0},_warmup:function(){if(document.unbindArrive(ie._warmup),ie._isStarted!==!0){ie._isStarted=!0,GM_unregisterMenuCommand(ie.ID_MENU_FORCE_LOADING),GM===void 0?(console.log("%cI am not in a tamper env",B),ie._userscriptless()):console.log(`%cTamper environment detected the version is ${GM.info.version}`,B),GM_addStyle(GM_getResourceText("jspanelcss")),GM_addStyle(GM_getResourceText("toastifycss")),GM_addStyle(GM_getResourceText("simpledatatablecss")),GM_addStyle(GM_getResourceText("loading_barcss")),GM_addStyle(GM_getResourceText("nprogress_css")),GM_config.init(wr),GM_registerMenuCommand("collectauto",vn,"a"),GM_registerMenuCommand("configure",vn,"a"),ie.ID_MENU_FORCE_BAR_ON_TOP=GM_registerMenuCommand("Menu Bar on Top",function(){document.querySelector(".panel.draggable").scrollIntoView()}),GM_config.get("hackheaderzindex")===!0&&(document.getElementById("header").style.zIndex=0),GM_addStyle(".swal2-title{font-size:1.275em}"),GM_addStyle(`
		.button {
			display: inline-flex;
			-webkit-box-align: center;
			align-items: center;
			-webkist-box-pack: center;
			justify-content: center;
			text-decoration: none;
			cursor: pointer;
			font-weight: 700;
		}
		.button--primary{
			font-family: "Montserrat";
			font-size: .875rem;
			font-weight: 700;
			text-align: center;
			line-height: 1.5rem;
			border-radius: 4px;
			border-width: 1px;
			border-style: solid;
			outline: none;
			padding: 8px 16px;
			text-transform: uppercase;
			position: relative;
			overflow: hidden;
			color: #fff;
			background-color: #7451eb;
			border-color: #7451eb;
			box-shadow: 0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.2);
		}
		.button--primary:hover{
			color: #fff;
			background-color: #7451eb;
			border-color: #7451eb;
			box-shadow: 0 6px 6px 0 rgba(0,0,0,0.26),0 10px 20px 0 rgba(0,0,0,0.19);
		}
		.button--primary:active{
			color: #fff;
			background-color: #7451eb;
			border-color: #7451eb;
			-webkistbox-shadow: none;
			box-shadow: none;
		}
		.button--primary:after{
			content: '';
			position: 'absolute';
			top: 50%;
			left: 50%;
			width: 5px;
			height: 5px;
			background-color: #fff;
			opacity: 0;
			border-radius: 100%;
			-webkit-transform:scale(1,1) translate(-50%);
			transform:scale(1,1) translate(-50%);
			-webkit-transform-origin: 50% 50%;
			transform-origin: 50% 50%;
		}
		.button--primary:disabled{
			color: #545454;
			background-color: #d2d2d2;
			border-color: #d2d2d2;
			-webkit-box-shadow: none;
			box-shadow: none;
		}`);var d=ie.cssMainDataSelector;document.querySelector(d)===null?(console.log(`%c All condition not met, waiting element '${d}' `,B),document.arrive(d,ie._main)):(console.log("%c All condition already met go",B),ie._main())}},_forceCbox:function(){ie._applyInjectionForSessionsHistory()},pathname:document.location.pathname,_getOCMainClass:function(){try{let t=document.querySelector(ie.cssMainDataSelector).classList.value.match(/webapp-(\d)/);if(t.length==2)return`webapp-${t[1]}`;throw new Error("_aOCMainSrvId.length must be 2")}catch(d){return console.error("%cError in _getOCMainClass():%s",me,d),""}},_sOCMainSrvClassName:"",_eventMonitor:function(){var d=document.querySelector("body"),t=new MutationObserver(function(s){s.forEach(function(n){n.target.classList.contains(`${ie._sOCMainSrvClassName}-MuiTouchRipple-root`),n.target.nodeName==="TBODY"&&n.target.parentElement.nodeName==="TABLE"&&_t(ie._applyInjectionOnPathNameMutation()),n.target.nodeName==="OL"&&_t(ie._applyInjectionOnPathNameMutation()),function(l){if(typeof l=="undefined"||l.nodeName==="#text"||l.nodeName==="IFRAME"||l.children.length==0||l.parentElement&&(l.parentElement.querySelector(".Facturier__cbox")||l.parentElement.querySelector(".Facturier__cbox_all")||l.parentElement.querySelector(".Facturier__header"))||l.nodeName==="UL")return null;if(l.nodeName==="LI"){_t(ur(l)),ie._lastMutation=dayjs().valueOf();return}if(l.nodeName==="A"&&l.href.includes("/users/")){l.parentElement.parentElement!==null?_t(dr(l.parentElement.parentElement)):console.warn("OC a chang\xE9 la mani\xE8re avec laquelles les lignes sont cr\xE9es");return}}(n.addedNodes[0]),n.target.nodeName==="BUTTON"&&n.target.parentElement.parentElement.parentElement.firstElementChild.nodeName==="TABLE"&&_t(ie._applyInjectionOnPathNameMutation()),n.target.ariaLabel==="Page pr\xE9c\xE9dente",ie.pathname!=document.location.pathname&&(ie.pathname=document.location.pathname,_t(ie._applyInjectionOnPathNameMutation()))})}),e={childList:!0,subtree:!0};t.observe(d,e)},_applyInjectionOnPathNameMutation:function(){let d=!1;d===!1&&document.location.pathname.match(/\/sessions$/)&&(d=!0,ie._applyInjectionForSessionsToComplete()),d===!1&&document.location.pathname.match(/\/booked-mentorship-sessions$/)&&(d=!0,ie._applyInjectionForSessionsBooked()),d===!1&&document.location.pathname.match(/\/mentorship-sessions-history$/)&&(d=!0,ie._applyInjectionForSessionsHistory()),d===!1&&console.log("%cUnknow Route so could't guess what to do",me)},_lastMutation:0,_applyInjectionForSessionsToComplete:function(){document.querySelector(`${ie.cssMainDataSelector} .Facturier__cbox_all`)!==null&&(document.querySelector(`${ie.cssMainDataSelector} .Facturier__cbox_all`).style.display="none"),console.log("%cWill Patch All Buttons corresponding to this CSS PATH %s",B,`${ie.cssMainDataSelector} a a[href*=sessions]`);var d=Array.from(document.querySelectorAll(`${ie.cssMainDataSelector} a a[href*=sessions]`)),t;d.forEach(function(e){console.log("%cWill Patch Button %o",B,e),e.innerText=".:"+e.innerText+":.",e.addEventListener("click",t=function(s){s.stopPropagation(),s.preventDefault();var n=e.parentElement.parentElement.parentElement,o=n.children[1].querySelector("time").getAttribute("datetime").trim(),l=Dt(n.children[2],-2),c=n.children[3].querySelector("a").getAttribute("href-sav"),m=(c||"/").split("/"),f=m[m.length-1],p=dayjs(o).toISOString(),a=Te.getHashId(p,l);let b=parseInt(f,10),y=Me.exists(b,1,Me.TYPE.SESSIONID_DATEREFID),v=Me.exists(a,2,Me.TYPE.SESSIONID_DATEREFID);y&&(v||(console.log(`[SESSIONID_DATEREFID] iSessionId ${b} est connu mais pas iHash${a}`),Me.updKey2(b,a,Me.TYPE.SESSIONID_DATEREFID))),v&&(y||(console.log(`[SESSIONID_DATEREFID] iHash${a} est connu mais pas iSessionId ${b}`),Me.updKey1(b,a,Me.TYPE.SESSIONID_DATEREFID))),!y&&!v&&(console.log(`[SESSIONID_DATEREFID] iHash${a} et iSessionId ${b} sont INconnus`),Me.add(b,a,Me.TYPE.SESSIONID_DATEREFID)),window.open(c,"blank").focus()}),e.setAttribute("href-sav",e.getAttribute("href")),e.removeAttribute("href")})},_applyInjectionForSessionsBooked:function(){document.querySelector(`${ie.cssMainDataSelector} .Facturier__cbox_all`)!==null&&(document.querySelector(`${ie.cssMainDataSelector} .Facturier__cbox_all`).style.display="none")},_applyInjectionForSessionsHistory:function(d=100){document.querySelector(`${ie.cssMainDataSelector} .Facturier__cbox_all`)!==null&&(document.querySelector(`${ie.cssMainDataSelector} .Facturier__cbox_all`).style.display="block"),!(dayjs().valueOf()-ie._lastMutation<d)&&(Zt(),ie._lastMutation=dayjs().valueOf())},_addHeader:function(){ie._sOCMainSrvClassName.length===0&&(ie._sOCMainSrvClassName=ie._getOCMainClass()),ie._sOCMainSrvClassName.length===0&&(console.error("%c[index._addHeader()] _sOCMainSrvClassName is still unknow",me),console.log("[index._addHeader()]check this %o",document.querySelector(ie.cssMainDataSelector)));let d=document.querySelector("#mainContent > :not(div:empty)").children,t=0;for(t=d.length-1;t>=0&&(console.log(t,d[t].nodeName),d[t].nodeName!=="SECTION");t--);if(t===0){console.error("IRRECOVERABLE ERROR element <section> not found");return}t=t-1;let e=document.querySelector('#mainContent[class*="webapp"]'),s=document.querySelector('[role="tablist"]');var n=function(p){let a=document.querySelector('[role="tablist"]'),b=document.createElement("span");if(b.innerText="Facturier v."+GM.info.script.version,b.classList.add(...p.classList),b.classList.add("Facturier__header"),p.children.length>1){let v=document.createElement("span");v.classList.add(...p.children[1].classList),v.classList.add("Facturier__header")}let y=document.createElement("a");y.onclick=qt,y.classList.add(...p.classList),y.classList.add("Facturier__header"),y.appendChild(b),p.children.length>1&&y.appendChild(m),y.style="margin-left: auto",a.appendChild(y)},o=new MutationObserver(function(p,a){let b=s.querySelector("a[aria-selected=false]");if(b.children){n(b),a.disconnect();return}});o.observe(document,{childList:!0,subtree:!0})},_userscriptless(){console.log("%cIm'not in a Tamper environment so i need to load js scripts",B)},_main:function(){console.log("\u200B\u200B\u200B%c[index._main()]MainLoaded\u200B\u200B\u200B",B),document.unbindArrive(ie._main),ie._eventMonitor();let d=new LocalStorage("db");var t=low(d);t.defaults({students:[],sessions:[],f_archives:[],history_session_cache:[],meta:[],refs:[],students_history:[]}).write(),ie.Cfg.dbase=t,dayjs.extend(dayjs_plugin_isSameOrAfter),dayjs.extend(dayjs_plugin_isSameOrBefore),dayjs.extend(dayjs_plugin_isBetween),dayjs.extend(dayjs_plugin_localeData),dayjs.extend(dayjs_plugin_customParseFormat),dayjs.locale("fr"),Me.checkSupport(),ke.checkSupport(),document.querySelector(".panel.menuBar.flex.draggable")===null&&vr.init(),ie._addHeader(),ie._applyInjectionOnPathNameMutation(),console.log("%cWait for side menu to add element to it",B),sCSSObserved="nav:not([role])",document.arrive(sCSSObserved,ie._addLinkToMenu);let e=ke.getDbVersion();if(Lt(GM.info.script.version,e)==1&&(console.log(`%cDB is in version: ${ke.getDbVersion()} need to go to version ${GM.info.script.version}`,B),xt.update(GM.info.script.version)),Ct(["https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js"]).then(async function(s){console.log("%cALPINE js fetched",B)}),Ct(["https://unpkg.com/htmx.org@1.1.0","https://unpkg.com/htmx.org@1.1.0/dist/ext/debug.js"]).then(async function(s){htmx.on("htmx:configRequest",function(n){}),htmx.on("htmx:beforeRequest",function(n){if(n.detail.pathInfo.finalPath&&Hn(n.detail.pathInfo.finalPath)!=="html"){n.detail.xhr.addEventListener("abort",function(){}),n.detail.xhr.onloadstart=function(f){this.abort()};let c=Er.load(n.detail.pathInfo.finalPath),m=n.detail.target;var o=n.detail.elt.getAttribute("hx-select");if(o){let f=new DOMParser().parseFromString(c,"text/html");oNode=f.querySelector(o),oNode?c=oNode.outerHTML:console.log(`%cWanna select target ${o} in data received from calling ${n.detail.pathInfo.finalPath} but this node could'nt be found so return the whole string`,me)}var l=function(f,p){for(var a=document.createRange(),b=a.createContextualFragment(f),y=b.childNodes.length-1;y>=0;y--){var v=b.childNodes[y];p.appendChild(v),htmx.process(v)}return p.lastChild};l(c,n.detail.target)}}),htmx.on("htmx:xhr:loadstart",function(n){})}),Ct(["https://cdn.jsdelivr.net/npm/sweetalert2@10"]).then(async function(s){console.log("%cSweetAlert fetched",B)}),GM_config.get("use_custom_css")===!0){let n=GM_config.get("custom_css_url").split(",");if(n.length!==0)console.log(`%cWanna inject Custom CSS from URL:${n}`,B),Ct(n).then(()=>{console.log(`%cCustom CSS from URL:${n} loaded`,B)}).catch(o=>console.log(`%cError detected when loading dependencies ${o}`,me));else{let o=GM_config.get("custom_css_data");if(o.length()>0){console.log(`%cNeed to inject a custom css in application content is ${o}`,B);let l=document.createElement("style");l.innerHTML=o,document.head.insertAdjacentElement("beforeend",l)}}}unsafeWindow.Facturier={libs:[],cfg:{dbase:null},klass:[]},unsafeWindow.Facturier.cfg.dbase=ie.Cfg.dbase,unsafeWindow.Facturier.libs.push({id:"fetchInject",ptr:Ct}),unsafeWindow.Facturier.libs.push({id:"dayjs",ptr:dayjs}),unsafeWindow.Facturier.klass.push({id:"Student",ptr:_e}),unsafeWindow.Facturier.klass.push({id:"Session",ptr:Te}),unsafeWindow.Facturier.klass.push({id:"Archive",ptr:St}),unsafeWindow.Facturier.klass.push({id:"History",ptr:Et}),unsafeWindow.Facturier.klass.push({id:"StudentHistory",ptr:Ve}),unsafeWindow.Facturier.klass.push({id:"Ref",ptr:Me}),unsafeWindow.Facturier.klass.push({id:"Dbase",ptr:xt}),unsafeWindow.Facturier.klass.push({id:"Meta",ptr:ke}),unsafeWindow.Facturier.klass.push({id:"Ref",ptr:Me}),unsafeWindow.Facturier.klass.push({id:"Api",ptr:It}),unsafeWindow.Facturier.libs.push({id:"NProgress",ptr:NProgress}),Cn.test_1(),unsafeWindow.Facturier.klass.push({id:"SandBox_Google",ptr:Cn}),unsafeWindow.Facturier.libs.push({id:"Moise",ptr:moize}),GM.info.script.downloadURL==="http://localhost:8000/dist/app-facturier.iife.js"?(console.log("%cALERTE .... version locale !!!!!! ","background-color:coral;color:white"),console.log("%c test readfile",B),Un("file:////media/pwyll/USB120Go/DevStt/UserScripts/SttAddon/src/update_data_base.js",function(s){console.log(s)}),ie.loadDependencies()):console.log(`%c GM.info.script.downloadURL url : ${GM.info.script.downloadURL}`,B)},_addLinkToMenu:function(){if(console.log("%cSide menu will be added",B),document.unbindArrive(ie._addLinkToMenu),document.querySelector("ul.Facturier__Menu-header")!==null){console.log("%cDirty Check no double launch",B);return}try{let d=document.querySelectorAll("nav:not([role])")[0],t=d.children[0].lastChild.cloneNode(!0);t.firstChild.innerText="Facturier",elMenu=document.querySelector(".panel.draggable"),t.firstChild.href="javascript::void(0);",t.firstChild.onclick=function(n){n.preventDefault(),n.stopPropagation(),elMenu=document.querySelector(".panel.draggable"),elMenu.style.display=elMenu.style.display!="block"?"block":"none"};let e=d.children[0].lastChild.firstChild;t.firstChild.appendChild(e.children[0].cloneNode(!0)),t.firstChild.appendChild(e.children[1].cloneNode(!1)),t.firstChild.appendChild(e.children[2].cloneNode(!1));let s=d.children[0].cloneNode(!1);s.appendChild(t),s.classList.add("Facturier__Menu-header"),d.appendChild(s),console.log("%cSide menu will added",B)}catch(d){console.log("%cInjecting menu encounter an error: %o",me,d)}},loadDependencies:function(){let d=[];d.push("http://localhost:8000/src/branch01/sandbox.js"),d.push("http://localhost:8000/src/branch01/sandbox.css"),Ct(d).then(()=>{console.log(`dependencies ${d} loaded`)})},dbUpdate:function(){console.log("%c Need to update DB",B),Lt(GM.info.script.version,"1.00.0006")==0&&(console.log("%c Need to update DB to version '1.00.0006'",B),xt.update("1.00.0006"))}};window.Facturier!==void 0?window.Facturier.start():ie.start();var K=ie;})();
/* @license
Papa Parse
v5.3.0
https://github.com/mholt/PapaParse
License: MIT
*/
/*!
 * Sheetrock
 * Quickly connect to, query, and lazy-load data from Google Sheets.
 * https://chriszarate.github.io/sheetrock/
 * License: MIT
 */
/*! @preserve
 *
 * tcomb.js - Type checking and DDD for JavaScript
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014-2016 Giulio Canti
 *
 */
/**
 * Fetch Inject module.
 *
 * @module fetchInject
 * @license Zlib
 * @param {(USVString[]|Request[])} inputs Resources you wish to fetch.
 * @param {Promise} [promise] A promise to await before attempting injection.
 * @throws {Promise<ReferenceError>} Rejects with error when given no arguments.
 * @throws {Promise<TypeError>} Rejects with error on invalid arguments.
 * @throws {Promise<Error>} Whatever `fetch` decides to throw.
 * @throws {SyntaxError} Via DOM upon attempting to parse unexpected tokens.
 * @returns {Promise<Object[]>} A promise which resolves to an `Array` of
 *     Objects containing `Response` `Body` properties used by the module.
 */
//# sourceMappingURL=app.min.js.map
